webpackJsonp([0],{"./src/App.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),u=a(r),l=n("./src/styles/App.sass"),o=a(l),s=n("./src/styles/buttons.scss"),i=(a(s),n("./node_modules/classnames/index.js")),c=(a(i),n("./node_modules/history/createHashHistory.js")),d=a(c),f=n("./node_modules/react-router/es/index.js"),m=n("./node_modules/react-router-dom/es/index.js"),p=n("./node_modules/react-portal/build/portal.js"),E=(a(p),n("./src/constants/index.js")),h=n("./src/tracker.js"),v=n("./src/containers/Navigation.js"),_=a(v),y=n("./src/components/elements/Main.jsx"),b=a(y),C=n("./src/components/elements/Footer.jsx"),S=a(C),g=n("./src/components/elements/Page.jsx"),A=(a(g),n("./src/components/elements/Onboarding.jsx")),O=a(A),T=n("./src/containers/Documents.js"),D=a(T),x=n("./src/containers/Contacts.js"),R=a(x),N=n("./src/containers/Recalls.js"),j=a(N),k=n("./src/containers/Trash.js"),w=a(k),L=n("./src/containers/Data.js"),P=a(L),M=n("./src/components/elements/Assistant.jsx"),I=a(M),F=n("./src/containers/DataForm.js"),U=a(F),q=n("./src/containers/News.js"),z=a(q),V=n("./src/components/elements/Preferences.jsx"),B=a(V),Y=n("./src/components/elements/Help.jsx"),H=a(Y),W=n("./src/components/elements/About.jsx"),G=a(W),Q=n("./src/containers/Alerter.js"),K=a(Q),Z=function(e){var t=(0,d.default)();if((0,h.shouldEnableTracking)()&&(0,h.getTracker)()){var n=(0,h.getTracker)();t=n.connectToHistory(t),n.track(t.location.pathname)}return cozy.client.files.statByPath(E.ROOT_PATH).then(function(){e.initilizeGauge()}).catch(function(t){console.log("No route file"),e.initilizeDocs()}),u.default.createElement(f.Router,{history:t},u.default.createElement("div",{className:o.default.app},u.default.createElement("div",{className:o.default.container},u.default.createElement(_.default,null),u.default.createElement("div",{className:o.default.page},u.default.createElement(b.default,null,u.default.createElement(m.Route,{exact:!0,path:"/",component:O.default}),u.default.createElement(m.Route,{path:"/Documents/:path*",component:D.default}),u.default.createElement(m.Route,{path:"/data/:slug/:id",component:P.default}),u.default.createElement(m.Route,{path:"/contacts",component:R.default}),u.default.createElement(m.Route,{path:"/rappels",component:j.default}),u.default.createElement(m.Route,{path:"/corbeille",component:w.default}),u.default.createElement(m.Route,{exact:!0,path:"/assistant",component:I.default}),u.default.createElement(m.Route,{path:"/assistant/:slug",component:U.default}),u.default.createElement(m.Route,{path:"/actualites/:path*",component:z.default}),u.default.createElement(m.Route,{path:"/preferences",component:B.default}),u.default.createElement(m.Route,{path:"/aide",component:H.default}),u.default.createElement(m.Route,{path:"/a-propos",component:G.default}),u.default.createElement(S.default,null)))),u.default.createElement(K.default,null)))};t.default=Z},"./src/actions/alerts.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.alertClear=t.alertDismiss=t.alertShow=t.ALERT_CLEAR=t.ALERT_DISMISS=t.ALERT_SHOW=void 0;var a=n("./src/constants/index.js"),r=t.ALERT_SHOW="ALERT_SHOW",u=t.ALERT_DISMISS="ALERT_DISMISS",l=t.ALERT_CLEAR="ALERT_CLEAR";t.alertShow=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.ALERT_LEVEL_INFO;return{type:r,alert:{id:Date.now(),message:e,level:t}}},t.alertDismiss=function(e){return{type:u,id:e}},t.alertClear=function(){return{type:l}}},"./src/actions/contacts.js":function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.contactsSave=t.contactsNew=t.contactsRestore=t.contactsRemove=t.contactsSelect=t.CONTACTS_SELECT=t.CONTACTS_RESTORE_FAILURE=t.CONTACTS_RESTORE_SUCCESS=t.CONTACTS_RESTORE=t.CONTACTS_REMOVE_FAILURE=t.CONTACTS_REMOVE_SUCCESS=t.CONTACTS_REMOVE=t.CONTACTS_SAVE_FAILURE=t.CONTACTS_SAVE_SUCCESS=t.CONTACTS_SAVE=t.CONTACTS_NEW_FAILURE=t.CONTACTS_NEW_SUCCESS=t.CONTACTS_NEW=void 0;var r=n("./src/constants/index.js"),u=t.CONTACTS_NEW="CONTACTS_NEW",l=t.CONTACTS_NEW_SUCCESS="CONTACTS_NEW_SUCCESS",o=t.CONTACTS_NEW_FAILURE="CONTACTS_NEW_FAILURE",s=t.CONTACTS_SAVE="CONTACTS_SAVE",i=t.CONTACTS_SAVE_SUCCESS="CONTACTS_SAVE_SUCCESS",c=t.CONTACTS_SAVE_FAILURE="CONTACTS_SAVE_FAILURE",d=t.CONTACTS_REMOVE="CONTACTS_REMOVE",f=t.CONTACTS_REMOVE_SUCCESS="CONTACTS_REMOVE_SUCCESS",m=t.CONTACTS_REMOVE_FAILURE="CONTACTS_REMOVE_FAILURE",p=t.CONTACTS_RESTORE="CONTACTS_RESTORE",E=t.CONTACTS_RESTORE_SUCCESS="CONTACTS_RESTORE_SUCCESS",h=t.CONTACTS_RESTORE_FAILURE="CONTACTS_RESTORE_FAILURE",v=t.CONTACTS_SELECT="CONTACTS_SELECT";t.contactsSelect=function(e){return{type:v,contact:e}},t.contactsRemove=function(e){return function(){var t=a(regeneratorRuntime.mark(function t(n,a){var u,l,o,s,i,c,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:d,contacts:e}),t.prev=1,u=[],console.log("Contacts",e),l=!0,o=!1,s=void 0,t.prev=7,i=e[Symbol.iterator]();case 9:if(l=(c=i.next()).done){t.next=19;break}return p=c.value,t.t0=u,t.next=14,cozy.client.data.updateAttributes(r.DOCTYPE_CONTACTS,p._id,{trash:!0});case 14:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 16:l=!0,t.next=9;break;case 19:t.next=25;break;case 21:t.prev=21,t.t2=t.catch(7),o=!0,s=t.t2;case 25:t.prev=25,t.prev=26,!l&&i.return&&i.return();case 28:if(t.prev=28,!o){t.next=31;break}throw s;case 31:return t.finish(28);case 32:return t.finish(25);case 33:return t.abrupt("return",n({type:f,ids:u.map(function(e){return e._id})}));case 36:return t.prev=36,t.t3=t.catch(1),t.abrupt("return",n({type:m,err:t.t3}));case 39:case"end":return t.stop()}},t,void 0,[[1,36],[7,21,25,33],[26,,28,32]])}));return function(e,n){return t.apply(this,arguments)}}()},t.contactsRestore=function(e){return function(){var t=a(regeneratorRuntime.mark(function t(n,a){var u,l,o,s,i,c,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:p,contacts:e}),t.prev=1,u=[],console.log("Contacts",e),l=!0,o=!1,s=void 0,t.prev=7,i=e[Symbol.iterator]();case 9:if(l=(c=i.next()).done){t.next=19;break}return d=c.value,t.t0=u,t.next=14,cozy.client.data.updateAttributes(r.DOCTYPE_CONTACTS,d._id,{trash:!1});case 14:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 16:l=!0,t.next=9;break;case 19:t.next=25;break;case 21:t.prev=21,t.t2=t.catch(7),o=!0,s=t.t2;case 25:t.prev=25,t.prev=26,!l&&i.return&&i.return();case 28:if(t.prev=28,!o){t.next=31;break}throw s;case 31:return t.finish(28);case 32:return t.finish(25);case 33:return t.abrupt("return",n({type:E,ids:u.map(function(e){return e._id})}));case 36:return t.prev=36,t.t3=t.catch(1),t.abrupt("return",n({type:h,err:t.t3}));case 39:case"end":return t.stop()}},t,void 0,[[1,36],[7,21,25,33],[26,,28,32]])}));return function(e,n){return t.apply(this,arguments)}}()},t.contactsNew=function(e,t){return function(){var n=a(regeneratorRuntime.mark(function n(a,s){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:u,name:e}),n.prev=1,n.next=4,cozy.client.data.create(r.DOCTYPE_CONTACTS,t);case 4:return i=n.sent,n.abrupt("return",a({type:l,contact:i}));case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",a({type:o,err:n.t0}));case 11:case"end":return n.stop()}},n,void 0,[[1,8]])}));return function(e,t){return n.apply(this,arguments)}}()},t.contactsSave=function(e,t){return function(){var n=a(regeneratorRuntime.mark(function n(a,u){var l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:s,id:e}),n.prev=1,n.next=4,cozy.client.data.updateAttributes(r.DOCTYPE_CONTACTS,e,t);case 4:return l=n.sent,n.abrupt("return",a({type:i,contact:l}));case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",a({type:c,err:n.t0}));case 11:case"end":return n.stop()}},n,void 0,[[1,8]])}));return function(e,t){return n.apply(this,arguments)}}()}},"./src/actions/data.js":function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var r=t.DATA_REMOVE="DATA_REMOVE",u=t.DATA_REMOVE_SUCCESS="DATA_REMOVE_SUCCESS",l=t.DATA_REMOVE_FAILURE="DATA_REMOVE_FAILURE",o=t.DATA_NEW="DATA_NEW",s=t.DATA_NEW_SUCCESS="DATA_NEW_SUCCESS",i=t.DATA_NEW_FAILURE="DATA_NEW_FAILURE",c=t.DATA_SAVE="DATA_SAVE",d=t.DATA_SAVE_SUCCESS="DATA_SAVE_SUCCESS",f=t.DATA_SAVE_FAILURE="DATA_SAVE_FAILURE",m=t.DATA_RESTORE="DATA_RESTORE",p=t.DATA_RESTORE_SUCCESS="DATA_RESTORE_SUCCESS",E=t.DATA_RESTORE_FAILURE="DATA_RESTORE_FAILURE",h=t.DATA_SELECT="DATA_SELECT",v=t.DATA_LOAD="DATA_LOAD",_=t.DATA_LOAD_SUCCESS="DATA_LOAD_SUCCESS",y=t.DATA_LOAD_FAILURE="DATA_LOAD_FAILURE";t.dataSelect=function(e){return{type:h,data:e}},t.dataRemove=function(e,t){return function(){var n=a(regeneratorRuntime.mark(function n(a,o){var s,i,c,d,f,m,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a({type:r,data:t,doctype:e}),n.prev=1,s=[],i=!0,c=!1,d=void 0,n.prev=6,f=t[Symbol.iterator]();case 8:if(i=(m=f.next()).done){n.next=18;break}return p=m.value,n.t0=s,n.next=13,cozy.client.data.updateAttributes(e,p._id,{trash:!0});case 13:n.t1=n.sent,n.t0.push.call(n.t0,n.t1);case 15:i=!0,n.next=8;break;case 18:n.next=24;break;case 20:n.prev=20,n.t2=n.catch(6),c=!0,d=n.t2;case 24:n.prev=24,n.prev=25,!i&&f.return&&f.return();case 27:if(n.prev=27,!c){n.next=30;break}throw d;case 30:return n.finish(27);case 31:return n.finish(24);case 32:return n.abrupt("return",a({type:u,ids:s.map(function(e){return e._id}),doctype:e}));case 35:return n.prev=35,n.t3=n.catch(1),n.abrupt("return",a({type:l,err:n.t3}));case 38:case"end":return n.stop()}},n,void 0,[[1,35],[6,20,24,32],[25,,27,31]])}));return function(e,t){return n.apply(this,arguments)}}()},t.dataRestore=function(e){return function(){var t=a(regeneratorRuntime.mark(function t(n,a){var r,u,l,o,s,i,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:m,data:e}),t.prev=1,r=[],u=!0,l=!1,o=void 0,t.prev=6,s=e[Symbol.iterator]();case 8:if(u=(i=s.next()).done){t.next=18;break}return c=i.value,t.t0=r,t.next=13,cozy.client.data.updateAttributes(c.doctype,c._id,{trash:!1});case 13:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 15:u=!0,t.next=8;break;case 18:t.next=24;break;case 20:t.prev=20,t.t2=t.catch(6),l=!0,o=t.t2;case 24:t.prev=24,t.prev=25,!u&&s.return&&s.return();case 27:if(t.prev=27,!l){t.next=30;break}throw o;case 30:return t.finish(27);case 31:return t.finish(24);case 32:return t.abrupt("return",n({type:p,ids:r.map(function(e){return e._id})}));case 35:return t.prev=35,t.t3=t.catch(1),t.abrupt("return",n({type:E,err:t.t3}));case 38:case"end":return t.stop()}},t,void 0,[[1,35],[6,20,24,32],[25,,27,31]])}));return function(e,n){return t.apply(this,arguments)}}()},t.dataNew=function(e,t){return function(){var n=a(regeneratorRuntime.mark(function n(a,r){var u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:o,data:t,doctype:e}),n.prev=1,n.next=4,cozy.client.data.create(e,t);case 4:return u=n.sent,n.abrupt("return",a({type:s,data:u,doctype:e}));case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",a({type:i,err:n.t0}));case 11:case"end":return n.stop()}},n,void 0,[[1,8]])}));return function(e,t){return n.apply(this,arguments)}}()},t.dataSave=function(e,t,n){return function(){var r=a(regeneratorRuntime.mark(function a(r,u){var l;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:c,id:t,data:n,doctype:e}),a.prev=1,a.next=4,cozy.client.data.updateAttributes(e,t,n);case 4:return l=a.sent,a.abrupt("return",r({type:d,data:l,doctype:e}));case 8:return a.prev=8,a.t0=a.catch(1),a.abrupt("return",r({type:f,err:a.t0}));case 11:case"end":return a.stop()}},a,void 0,[[1,8]])}));return function(e,t){return r.apply(this,arguments)}}()},t.dataLoad=function(e,t){return function(){var n=a(regeneratorRuntime.mark(function n(a,r){var u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:v,id:t,doctype:e}),n.prev=1,n.next=4,cozy.client.data.find(e,t);case 4:return u=n.sent,n.abrupt("return",a({type:_,data:u,doctype:e}));case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",a({type:y,err:n.t0}));case 11:case"end":return n.stop()}},n,void 0,[[1,8]])}));return function(e,t){return n.apply(this,arguments)}}()}},"./src/actions/documents.js":function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.documentsChangeType=t.documentsMove=t.documentsRename=t.documentsRestore=t.documentsRemove=t.documentsInitialize=t.documentsNewFolder=t.documentsDownload=t.documentsClick=t.documentsChangeViewMode=t.documentsChangeFilter=t.documentsSelect=t.HTTP_CODE_CONFLICT=t.DOCUMENTS_CHANGE_TYPE_FAILURE=t.DOCUMENTS_CHANGE_TYPE_SUCCESS=t.DOCUMENTS_CHANGE_TYPE=t.DOCUMENTS_MOVE_FAILURE=t.DOCUMENTS_MOVE_SUCCESS=t.DOCUMENTS_MOVE=t.DOCUMENTS_RENAME_FAILURE=t.DOCUMENTS_RENAME_SUCCESS=t.DOCUMENTS_RENAME=t.DOCUMENTS_CHANGE_FILTER=t.DOCUMENTS_CLICK=t.DOCUMENTS_NEW_FOLDER_FAILURE_DUPLICATE=t.DOCUMENTS_NEW_FOLDER_FAILURE_GENERIC=t.DOCUMENTS_NEW_FOLDER_SUCCESS=t.DOCUMENTS_NEW_FOLDER=t.DOCUMENTS_CHANGE_VIEW_MODE=t.DOCUMENTS_DOWNLOAD_ALL=t.DOCUMENTS_DOWNLOAD=t.DOCUMENTS_INITIALIZE_FAILURE=t.DOCUMENTS_INITIALIZE_SUCCESS=t.DOCUMENTS_INITIALIZE=t.DOCUMENTS_RESTORE_FAILURE=t.DOCUMENTS_RESTORE_SUCCESS=t.DOCUMENTS_RESTORE=t.DOCUMENTS_REMOVE_FAILURE=t.DOCUMENTS_REMOVE_SUCCESS=t.DOCUMENTS_REMOVE=t.DOCUMENTS_SELECT=void 0;var r=n("./src/tools/index.js"),u=n("./src/constants/index.js"),l=n("./src/actions/load.js"),o=n("./src/actions/gauge.js"),s=t.DOCUMENTS_SELECT="DOCUMENTS_SELECT",i=t.DOCUMENTS_REMOVE="DOCUMENTS_REMOVE",c=t.DOCUMENTS_REMOVE_SUCCESS="DOCUMENTS_REMOVE_SUCCESS",d=t.DOCUMENTS_REMOVE_FAILURE="DOCUMENTS_REMOVE_FAILURE",f=t.DOCUMENTS_RESTORE="DOCUMENTS_RESTORE",m=t.DOCUMENTS_RESTORE_SUCCESS="DOCUMENTS_RESTORE_SUCCESS",p=t.DOCUMENTS_RESTORE_FAILURE="DOCUMENTS_RESTORE_FAILURE",E=t.DOCUMENTS_INITIALIZE="DOCUMENTS_INITIALIZE",h=t.DOCUMENTS_INITIALIZE_SUCCESS="DOCUMENTS_INITIALIZE_SUCCESS",v=t.DOCUMENTS_INITIALIZE_FAILURE="DOCUMENTS_INITIALIZE_FAILURE",_=t.DOCUMENTS_DOWNLOAD="DOCUMENTS_DOWNLOAD",y=(t.DOCUMENTS_DOWNLOAD_ALL="DOCUMENTS_DOWNLOAD_ALL",t.DOCUMENTS_CHANGE_VIEW_MODE="DOCUMENTS_CHANGE_VIEW_MODE"),b=t.DOCUMENTS_NEW_FOLDER="DOCUMENTS_NEW_FOLDER",C=t.DOCUMENTS_NEW_FOLDER_SUCCESS="DOCUMENTS_NEW_FOLDER_SUCCESS",S=t.DOCUMENTS_NEW_FOLDER_FAILURE_GENERIC="DOCUMENTS_NEW_FOLDER_FAILURE_GENERIC",g=t.DOCUMENTS_NEW_FOLDER_FAILURE_DUPLICATE="DOCUMENTS_NEW_FOLDER_FAILURE_DUPLICATE",A=t.DOCUMENTS_CLICK="DOCUMENTS_CLICK",O=t.DOCUMENTS_CHANGE_FILTER="DOCUMENTS_CHANGE_FILTER",T=t.DOCUMENTS_RENAME="DOCUMENTS_RENAME",D=t.DOCUMENTS_RENAME_SUCCESS="DOCUMENTS_RENAME_SUCCESS",x=t.DOCUMENTS_RENAME_FAILURE="DOCUMENTS_RENAME_FAILURE",R=t.DOCUMENTS_MOVE="DOCUMENTS_MOVE",N=t.DOCUMENTS_MOVE_SUCCESS="DOCUMENTS_MOVE_SUCCESS",j=t.DOCUMENTS_MOVE_FAILURE="DOCUMENTS_MOVE_FAILURE",k=t.DOCUMENTS_CHANGE_TYPE="DOCUMENTS_CHANGE_TYPE",w=t.DOCUMENTS_CHANGE_TYPE_SUCCESS="DOCUMENTS_CHANGE_TYPE_SUCCESS",L=t.DOCUMENTS_CHANGE_TYPE_FAILURE="DOCUMENTS_CHANGE_TYPE_FAILURE",P=t.HTTP_CODE_CONFLICT=409,M=(t.documentsSelect=function(e){return{type:s,document:e}},t.documentsChangeFilter=function(e){return{type:O,filter:e}},t.documentsChangeViewMode=function(){return{type:y}},t.documentsClick=function(e){return{type:A,document:e}},t.documentsDownload=function(e){return console.log("Docnload",e),function(){var t=a(regeneratorRuntime.mark(function t(n){var a,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==e.length||(0,r.isDirectory)(e[0])){t.next=2;break}return t.abrupt("return",n(M(e[0])));case 2:return a=e.map(function(e){return e.path}),t.next=5,cozy.client.files.getArchiveLinkByPaths(a);case 5:return u=t.sent,t.next=8,cozy.client.fullpath(u);case 8:return l=t.sent,(0,r.forceFileDownload)(l,"homebook.zip"),t.abrupt("return",n({type:_,selected:e}));case 11:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}()},function(e){return console.log("DL file",e),function(){var t=a(regeneratorRuntime.mark(function t(n){var a,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cozy.client.files.downloadById(e.id).catch(function(e){throw e});case 2:return a=t.sent,t.next=5,a.blob();case 5:return u=t.sent,l=e.name,(0,r.forceFileDownload)(window.URL.createObjectURL(u),l),t.abrupt("return",n({type:_,file:e}));case 9:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}()}),I=(t.documentsNewFolder=function(e){return function(){var t=a(regeneratorRuntime.mark(function t(n,a){var l,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l=a().documents.files,!(o=l&&l.find(function(t){return(0,r.isDirectory)(t)&&t.name===e}))){t.next=4;break}return t.abrupt("return",n({type:g,alert:{message:"L'élément "+e+" existe déjà, merci de choisir un nouveau nom."}}));case 4:return n({type:b,name:e}),t.prev=5,t.next=8,cozy.client.files.createDirectory({name:e,dirID:a().documents.folder.id});case 8:s=t.sent,n({type:C,folder:(0,r.extractFileAttributes)(s)}),t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(5),n(t.t0.response&&t.t0.response.status===P?{type:g,alert:{message:"L'élément "+e+" existe déjà, merci de choisir un nouveau nom.",level:u.ALERT_LEVEL_ERROR}}:{type:S,err:t.t0,alert:{message:"Impossible de créer le nouveau dossier "+e,level:u.ALERT_LEVEL_ERROR}}),t.t0;case 16:case"end":return t.stop()}},t,void 0,[[5,12]])}));return function(e,n){return t.apply(this,arguments)}}()},function(){var e=a(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cozy.client.files.statByPath(t).catch(function(e){var a=t.substring(t.lastIndexOf("/")+1);return console.log("Create initial folder",a),cozy.client.files.createDirectory({name:a,dirID:n})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),F=(t.documentsInitialize=function(e){return function(){var t=a(regeneratorRuntime.mark(function t(n,a){var r,s,i,c,d,f,m,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:E,name:e}),t.prev=1,t.next=4,I(u.ROOT_PATH,u.COZY_ROOT_ID);case 4:r=t.sent,s=!0,i=!1,c=void 0,t.prev=8,d=u.FOLDER_LIST[Symbol.iterator]();case 10:if(s=(f=d.next()).done){t.next=18;break}return m=f.value,t.next=14,I(m,r._id);case 14:p=t.sent;case 15:s=!0,t.next=10;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(8),i=!0,c=t.t0;case 24:t.prev=24,t.prev=25,!s&&d.return&&d.return();case 27:if(t.prev=27,!i){t.next=30;break}throw c;case 30:return t.finish(27);case 31:return t.finish(24);case 32:return n((0,l.loadFolder)(u.ROOT_PATH)),n((0,o.gaugeInitialize)()),t.abrupt("return",n({type:h}));case 37:return t.prev=37,t.t1=t.catch(1),t.abrupt("return",n({type:v,err:t.t1,alert:{message:"alert.folder_name",messageData:{folderName:e}}}));case 40:case"end":return t.stop()}},t,void 0,[[1,37],[8,20,24,32],[25,,27,31]])}));return function(e,n){return t.apply(this,arguments)}}()},u.DATA_LIST.map(function(e){return e.path}));t.documentsRemove=function(e){return function(){var t=a(regeneratorRuntime.mark(function t(n){var a,r,l,o,s,f,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:i,files:e}),a=[],t.prev=2,r=!0,l=!1,o=void 0,t.prev=6,s=e[Symbol.iterator]();case 8:if(r=(f=s.next()).done){t.next=20;break}if(m=f.value,!m.path||-1===F.indexOf(m.path)){t.next=12;break}return t.abrupt("continue",17);case 12:return t.t0=a,t.next=15,cozy.client.files.trashById(m.id);case 15:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 17:r=!0,t.next=8;break;case 20:t.next=26;break;case 22:t.prev=22,t.t2=t.catch(6),l=!0,o=t.t2;case 26:t.prev=26,t.prev=27,!r&&s.return&&s.return();case 29:if(t.prev=29,!l){t.next=32;break}throw o;case 32:return t.finish(29);case 33:return t.finish(26);case 34:return t.abrupt("return",n({type:c,ids:a.map(function(e){return e._id})}));case 37:return t.prev=37,t.t3=t.catch(2),t.abrupt("return",n({type:d,err:t.t3,alert:{message:"Impossible de deplacer ces éléments dans la corbeille",level:u.ALERT_LEVEL_ERROR}}));case 40:case"end":return t.stop()}},t,void 0,[[2,37],[6,22,26,34],[27,,29,33]])}));return function(e){return t.apply(this,arguments)}}()},t.documentsRestore=function(e){return function(){var t=a(regeneratorRuntime.mark(function t(n){var a,r,u,l,o,s,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:f,files:e}),a=[],t.prev=2,r=!0,u=!1,l=void 0,t.prev=6,o=e[Symbol.iterator]();case 8:if(r=(s=o.next()).done){t.next=18;break}return i=s.value,t.t0=a,t.next=13,cozy.client.files.restoreById(i.id);case 13:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 15:r=!0,t.next=8;break;case 18:t.next=24;break;case 20:t.prev=20,t.t2=t.catch(6),u=!0,l=t.t2;case 24:t.prev=24,t.prev=25,!r&&o.return&&o.return();case 27:if(t.prev=27,!u){t.next=30;break}throw l;case 30:return t.finish(27);case 31:return t.finish(24);case 32:t.next=37;break;case 34:return t.prev=34,t.t3=t.catch(2),t.abrupt("return",n({type:p}));case 37:return t.abrupt("return",n({type:m,ids:e.map(function(e){return e.id})}));case 38:case"end":return t.stop()}},t,void 0,[[2,34],[6,20,24,32],[25,,27,31]])}));return function(e){return t.apply(this,arguments)}}()},t.documentsRename=function(e,t){return function(){var n=a(regeneratorRuntime.mark(function n(a){var u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:T,id:e,name:t}),n.prev=1,n.next=4,cozy.client.files.updateAttributesById(e,{name:t});case 4:return u=n.sent,n.abrupt("return",a({type:D,file:(0,r.extractFileAttributes)(u)}));case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",a({type:x,err:n.t0}));case 11:case"end":return n.stop()}},n,void 0,[[1,8]])}));return function(e){return n.apply(this,arguments)}}()},t.documentsMove=function(e,t){return function(){var n=a(regeneratorRuntime.mark(function n(a){var r,u,l,o,s,i,c,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:R,files:e,path:t}),r=[],n.prev=2,n.next=5,cozy.client.files.statByPath(t);case 5:u=n.sent,l=!0,o=!1,s=void 0,n.prev=9,i=e[Symbol.iterator]();case 11:if(l=(c=i.next()).done){n.next=23;break}if(d=c.value,!d.path||-1===F.indexOf(d.path)){n.next=15;break}return n.abrupt("continue",20);case 15:return n.t0=r,n.next=18,cozy.client.files.updateAttributesById(d.id,{dir_id:u._id});case 18:n.t1=n.sent,n.t0.push.call(n.t0,n.t1);case 20:l=!0,n.next=11;break;case 23:n.next=29;break;case 25:n.prev=25,n.t2=n.catch(9),o=!0,s=n.t2;case 29:n.prev=29,n.prev=30,!l&&i.return&&i.return();case 32:if(n.prev=32,!o){n.next=35;break}throw s;case 35:return n.finish(32);case 36:return n.finish(29);case 37:return n.abrupt("return",a({type:N,ids:r.map(function(e){return e._id})}));case 40:return n.prev=40,n.t3=n.catch(2),n.abrupt("return",a({type:j,err:n.t3}));case 43:case"end":return n.stop()}},n,void 0,[[2,40],[9,25,29,37],[30,,32,36]])}));return function(e){return n.apply(this,arguments)}}()},t.documentsChangeType=function(e,t){return function(){var n=a(regeneratorRuntime.mark(function n(a){var u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:k,file:e,slug:t}),n.prev=1,n.next=4,cozy.client.files.updateAttributesById(e.id,{tags:[t]});case 4:return u=n.sent,n.abrupt("return",a({type:w,file:(0,r.extractFileAttributes)(u)}));case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",a({type:L,err:n.t0}));case 11:case"end":return n.stop()}},n,void 0,[[1,8]])}));return function(e){return n.apply(this,arguments)}}()}},"./src/actions/gauge.js":function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.gaugeInitialize=t.GAUGE_INITIALIZE_FAILURE=t.GAUGE_INITIALIZE_SUCCESS=t.GAUGE_INITIALIZE=void 0;var r=n("./src/constants/index.js"),u=t.GAUGE_INITIALIZE="GAUGE_INITIALIZE",l=t.GAUGE_INITIALIZE_SUCCESS="GAUGE_INITIALIZE_SUCCESS",o=t.GAUGE_INITIALIZE_FAILURE="GAUGE_INITIALIZE_FAILURE",s=(t.gaugeInitialize=function(){return function(){var e=a(regeneratorRuntime.mark(function e(t,n){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:u}),e.prev=1,a=[],e.next=5,s(r.ROOT_PATH,a);case 5:return e.abrupt("return",t({type:l,types:a}));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",t({type:o,err:e.t0}));case 11:case"end":return e.stop()}},e,void 0,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}()},function(){var e=a(regeneratorRuntime.mark(function e(t,n){var a,r,u,l,o,i,c,d,f,m,p,E,h,v,_,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cozy.client.files.statByPath(t);case 2:a=e.sent,r=a.relations("contents"),u=!0,l=!1,o=void 0,e.prev=7,i=r[Symbol.iterator]();case 9:if(u=(c=i.next()).done){e.next=51;break}if(d=c.value,!d.attributes||!d.attributes.type||"directory"!==d.attributes.type){e.next=16;break}return e.next=14,s(d.attributes.path,n);case 14:e.next=48;break;case 16:if(!(d.attributes.tags&&d.attributes.tags.length>0)){e.next=48;break}f=d.attributes.tags[0],m=!1,p=!0,E=!1,h=void 0,e.prev=22,v=n[Symbol.iterator]();case 24:if(p=(_=v.next()).done){e.next=33;break}if(y=_.value,y.type!==f){e.next=30;break}return y.count=y.count+1||1,m=!0,e.abrupt("break",33);case 30:p=!0,e.next=24;break;case 33:e.next=39;break;case 35:e.prev=35,e.t0=e.catch(22),E=!0,h=e.t0;case 39:e.prev=39,e.prev=40,!p&&v.return&&v.return();case 42:if(e.prev=42,!E){e.next=45;break}throw h;case 45:return e.finish(42);case 46:return e.finish(39);case 47:m||n.push({type:f,count:1});case 48:u=!0,e.next=9;break;case 51:e.next=57;break;case 53:e.prev=53,e.t1=e.catch(7),l=!0,o=e.t1;case 57:e.prev=57,e.prev=58,!u&&i.return&&i.return();case 60:if(e.prev=60,!l){e.next=63;break}throw o;case 63:return e.finish(60);case 64:return e.finish(57);case 65:case"end":return e.stop()}},e,void 0,[[7,53,57,65],[22,35,39,47],[40,,42,46],[58,,60,64]])}));return function(t,n){return e.apply(this,arguments)}}())},"./src/actions/importer.js":function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.importerFilesUpload=t.importerTree=t.importerViewChange=t.importerDirectoryChange=t.importerClick=t.IMPORTER_TREE_FAILURE=t.IMPORTER_TREE_SUCCESS=t.IMPORTER_TREE=t.IMPORTER_VIEW_CHANGE=t.IMPORTER_DIRECTORY_CHANGE=t.IMPORTER_FILE_UPLOAD_FAILURE=t.IMPORTER_FILE_UPLOAD_SUCESS=t.IMPORTER_FILE_UPLOAD=t.IMPORTER_CLICK=void 0;var r=n("./node_modules/lodash/isEmpty.js"),u=function(e){return e&&e.__esModule?e:{default:e}}(r),l=n("./src/tools/index.js"),o=n("./src/constants/index.js"),s=t.IMPORTER_CLICK="IMPORTER_CLICK",i=t.IMPORTER_FILE_UPLOAD="IMPORTER_FILE_UPLOAD",c=t.IMPORTER_FILE_UPLOAD_SUCESS="IMPORTER_FILE_UPLOAD_SUCESS",d=t.IMPORTER_FILE_UPLOAD_FAILURE="IMPORTER_FILE_UPLOAD_FAILURE",f=t.IMPORTER_DIRECTORY_CHANGE="IMPORTER_DIRECTORY_CHANGE",m=t.IMPORTER_VIEW_CHANGE="IMPORTER_VIEW_CHANGE",p=t.IMPORTER_TREE="IMPORTER_TREE",E=t.IMPORTER_TREE_SUCCESS="IMPORTER_TREE_SUCCESS",h=t.IMPORTER_TREE_FAILURE="IMPORTER_TREE_FAILURE",v=(t.importerClick=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return""===e&&(e=o.ROOT_PATH),function(n,a){return(0,u.default)(a().importer.documentsTree)&&n(_()),n({type:s,slug:t,path:e})}},t.importerDirectoryChange=function(e){return{type:f,path:e}},t.importerViewChange=function(e){return{type:m,view:e}},function(){var e=a(regeneratorRuntime.mark(function e(t){var n,a,r,u,l,o,s,i,c,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cozy.client.files.statByPath(t.path);case 2:n=e.sent,a=[],r=n.relations("contents"),u=!0,l=!1,o=void 0,e.prev=8,s=r[Symbol.iterator]();case 10:if(u=(i=s.next()).done){e.next=23;break}if(c=i.value,"directory"!==c.attributes.type){e.next=20;break}return d={path:c.attributes.path,name:c.attributes.name,childs:[]},e.t0=a,e.next=17,v(d);case 17:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),t.childs.push(d);case 20:u=!0,e.next=10;break;case 23:e.next=29;break;case 25:e.prev=25,e.t2=e.catch(8),l=!0,o=e.t2;case 29:e.prev=29,e.prev=30,!u&&s.return&&s.return();case 32:if(e.prev=32,!l){e.next=35;break}throw o;case 35:return e.finish(32);case 36:return e.finish(29);case 37:return e.abrupt("return",a);case 38:case"end":return e.stop()}},e,void 0,[[8,25,29,37],[30,,32,36]])}));return function(t){return e.apply(this,arguments)}}()),_=t.importerTree=function(){return function(){var e=a(regeneratorRuntime.mark(function e(t,n){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:p}),e.prev=1,a={path:o.ROOT_PATH,childs:[],name:o.ROOT_NAME},e.next=5,v(a);case 5:return e.abrupt("return",t({type:E,tree:a}));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",t({type:h,err:e.t0}));case 11:case"end":return e.stop()}},e,void 0,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}()};t.importerFilesUpload=function(e,t){return function(){var n=a(regeneratorRuntime.mark(function n(a,r){var u,o,s,f,m,p,E,h,v,_,y,b,C,S,g,A;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a({type:i,dirId:t}),u=[],o=[],n.prev=3,s=!0,f=!1,m=void 0,n.prev=7,p=e[Symbol.iterator]();case 9:if(s=(E=p.next()).done){n.next=85;break}if(h=E.value,v=void 0,!h.isDirectory){n.next=63;break}return n.prev=13,n.next=16,cozy.client.files.createDirectory({name:h.name,dirID:t});case 16:_=n.sent,y=!0,b=!1,C=void 0,n.prev=20,S=h.content[Symbol.iterator]();case 22:if(y=(g=S.next()).done){n.next=36;break}return A=g.value,n.prev=24,n.next=27,cozy.client.files.create(A,{name:A.name,dirID:_._id});case 27:A=n.sent,n.next=33;break;case 30:throw n.prev=30,n.t0=n.catch(24),n.t0;case 33:y=!0,n.next=22;break;case 36:n.next=42;break;case 38:n.prev=38,n.t1=n.catch(20),b=!0,C=n.t1;case 42:n.prev=42,n.prev=43,!y&&S.return&&S.return();case 45:if(n.prev=45,!b){n.next=48;break}throw C;case 48:return n.finish(45);case 49:return n.finish(42);case 50:u.push(_),n.next=61;break;case 53:if(n.prev=53,n.t2=n.catch(13),409!==n.t2.status){n.next=60;break}console.log("Confict with file",h.name),o.push(h),n.next=61;break;case 60:throw n.t2;case 61:n.next=82;break;case 63:return n.prev=63,n.next=66,cozy.client.files.create(h,{name:h.name,dirID:t});case 66:if(v=n.sent,!h.typeFile){n.next=71;break}return n.next=70,cozy.client.files.updateAttributesById(v._id,{tags:[h.typeFile]});case 70:v=n.sent;case 71:u.push(v),n.next=82;break;case 74:if(n.prev=74,n.t3=n.catch(63),409!==n.t3.status){n.next=81;break}console.log("Confict with file",h.name),o.push(h),n.next=82;break;case 81:throw n.t3;case 82:s=!0,n.next=9;break;case 85:n.next=91;break;case 87:n.prev=87,n.t4=n.catch(7),f=!0,m=n.t4;case 91:n.prev=91,n.prev=92,!s&&p.return&&p.return();case 94:if(n.prev=94,!f){n.next=97;break}throw m;case 97:return n.finish(94);case 98:return n.finish(91);case 99:return n.abrupt("return",a({type:c,files:u.map(function(e){return(0,l.extractFileAttributes)(e)}),currentDir:r().documents.folder.id===t,conflits:o}));case 102:return n.prev=102,n.t5=n.catch(3),n.abrupt("return",a({type:d,err:n.t5}));case 105:case"end":return n.stop()}},n,void 0,[[3,102],[7,87,91,99],[13,53],[20,38,42,50],[24,30],[43,,45,49],[63,74],[92,,94,98]])}));return function(e,t){return n.apply(this,arguments)}}()}},"./src/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./src/actions/contacts.js");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var r=n("./src/actions/documents.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var u=n("./src/actions/importer.js");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var l=n("./src/actions/load.js");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var o=n("./src/actions/recalls.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var s=n("./src/actions/trash.js");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var i=n("./src/actions/data.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var c=n("./src/actions/gauge.js");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var d=n("./src/actions/alerts.js");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}})})},"./src/actions/load.js":function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadTrash=t.loadData=t.loadNews=t.loadContacts=t.loadRecalls=t.loadFolder=t.LOAD_NEWS_FAILURE=t.LOAD_NEWS_SUCCESS=t.LOAD_NEWS=t.LOAD_FILE_SUCCESS=t.LOAD_TRASH_FAILURE=t.LOAD_TRASH_SUCCESS=t.LOAD_TRASH=t.LOAD_DATA_FAILURE=t.LOAD_DATA_SUCCESS=t.LOAD_DATA=t.LOAD_CONTACTS_FAILURE=t.LOAD_CONTACTS_SUCCESS=t.LOAD_CONTACTS=t.LOAD_RECALLS_FAILURE=t.LOAD_RECALLS_SUCCESS=t.LOAD_RECALLS=t.LOAD_DOCS_FAILURE=t.LOAD_DOCS_SUCCESS=t.LOAD_DOCS=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=n("./node_modules/moment/moment.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(l),s=n("./src/tools/index.js"),i=n("./src/constants/index.js"),c=t.LOAD_DOCS="LOAD_DOCS",d=t.LOAD_DOCS_SUCCESS="LOAD_DOCS_SUCCESS",f=t.LOAD_DOCS_FAILURE="LOAD_DOCS_FAILURE",m=t.LOAD_RECALLS="LOAD_RECALLS",p=t.LOAD_RECALLS_SUCCESS="LOAD_RECALLS_SUCCESS",E=t.LOAD_RECALLS_FAILURE="LOAD_RECALLS_FAILURE",h=t.LOAD_CONTACTS="LOAD_CONTACTS",v=t.LOAD_CONTACTS_SUCCESS="LOAD_CONTACTS_SUCCESS",_=t.LOAD_CONTACTS_FAILURE="LOAD_CONTACTS_FAILURE",y=t.LOAD_DATA="LOAD_DATA",b=t.LOAD_DATA_SUCCESS="LOAD_DATA_SUCCESS",C=t.LOAD_DATA_FAILURE="LOAD_DATA_FAILURE",S=t.LOAD_TRASH="LOAD_TRASH",g=t.LOAD_TRASH_SUCCESS="LOAD_TRASH_SUCCESS",A=t.LOAD_TRASH_FAILURE="LOAD_TRASH_FAILURE",O=t.LOAD_FILE_SUCCESS="LOAD_FILE_SUCCESS",T=t.LOAD_NEWS="LOAD_NEWS",D=t.LOAD_NEWS_SUCCESS="LOAD_NEWS_SUCCESS",x=t.LOAD_NEWS_FAILURE="LOAD_NEWS_FAILURE",R=(t.loadFolder=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.ROOT_PATH;return function(){var t=r(regeneratorRuntime.mark(function t(n,a){var r,u,l,o,i,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:c,path:e}),t.prev=1,t.next=4,cozy.client.files.statByPath(e);case 4:if(r=t.sent,u=r.attributes.dir_id,t.t0=!!u,!t.t0){t.next=11;break}return t.next=10,cozy.client.files.statById(u).catch(function(e){if(403!==e.status)throw e;console.warn("User don't have access to parent folder")});case 10:t.t0=t.sent;case 11:if(l=t.t0,"directory"!==r.attributes.type){t.next=24;break}if(o=r.relationships.contents,i=r.relations("contents").filter(function(e){return void 0!==e})||[],!((m=o.meta.count||0)>i.length)){t.next=21;break}return console.log("More files",r._id),t.next=20,R(r._id,i,m);case 20:i=t.sent;case 21:return t.abrupt("return",n({type:d,folder:Object.assign((0,s.extractFileAttributes)(r),{parent:(0,s.extractFileAttributes)(l)}),fileCount:m,files:i.map(function(e){return(0,s.extractFileAttributes)(e)})}));case 24:return t.abrupt("return",n({type:O,file:Object.assign((0,s.extractFileAttributes)(r),{parent:(0,s.extractFileAttributes)(l),path:l.attributes.path+"/"+r.attributes.name})}));case 25:t.next=30;break;case 27:return t.prev=27,t.t1=t.catch(1),t.abrupt("return",n({type:f,error:t.t1}));case 30:case"end":return t.stop()}},t,void 0,[[1,27]])}));return function(e,n){return t.apply(this,arguments)}}()},function(){var e=r(regeneratorRuntime.mark(function e(t,n,a){var r,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cozy.client.files.statById(t,!0,{skip:n.length});case 2:if(r=e.sent,u=r.relations("contents").filter(function(e){return void 0!==e})||[],n=n.concat(u),!(a>n.length)){e.next=9;break}return e.next=8,R(t,n,a);case 8:n=e.sent;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n,a){return e.apply(this,arguments)}}()),N=(t.loadRecalls=function(){return function(){var e=r(regeneratorRuntime.mark(function e(t,n){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:m}),e.prev=1,e.next=4,(0,s.getDataElements)(i.DOCTYPE_RECALLS);case 4:return a=e.sent,a.map(function(e){return u({},e,{deadline:(0,o.default)(e.deadline,"DD/MM/YYYY"),alert:(0,o.default)(e.alert,"DD/MM/YYYY")})}),e.abrupt("return",t({type:p,recalls:a}));case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",t({type:E,error:e.t0}));case 12:case"end":return e.stop()}},e,void 0,[[1,9]])}));return function(t,n){return e.apply(this,arguments)}}()},t.loadContacts=function(){return function(){var e=r(regeneratorRuntime.mark(function e(t,n){var a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:h}),e.prev=1,e.next=4,(0,s.getDataElements)(i.DOCTYPE_CONTACTS);case 4:return a=e.sent,r=a.filter(function(e){return!e.trash}),e.abrupt("return",t({type:v,contacts:r}));case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",t({type:_,error:e.t0}));case 12:case"end":return e.stop()}},e,void 0,[[1,9]])}));return function(t,n){return e.apply(this,arguments)}}()},t.loadNews=function(){return function(){var e=r(regeneratorRuntime.mark(function e(t,n){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:T}),e.prev=1,e.next=4,(0,s.getDataElements)(i.DOCTYPE_NEWS);case 4:return a=e.sent,e.abrupt("return",t({type:D,news:a}));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",t({type:x,error:e.t0}));case 11:case"end":return e.stop()}},e,void 0,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}()},t.loadData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.DOCTYPE_DIAGNOSIS;return N(y,b,C,e)},function(e,t,n,a){return function(){var u=r(regeneratorRuntime.mark(function r(u,l){var o,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u({type:e}),r.prev=1,r.next=4,(0,s.getDataElements)(a);case 4:return o=r.sent,i=o.filter(function(e){return!e.trash}),r.abrupt("return",u({type:t,data:i.map(function(e){return e.doctype=a,e}),doctype:a}));case 9:return r.prev=9,r.t0=r.catch(1),r.abrupt("return",u({type:n,error:r.t0}));case 12:case"end":return r.stop()}},r,void 0,[[1,9]])}));return function(e,t){return u.apply(this,arguments)}}()});t.loadTrash=function(){return function(){var e=r(regeneratorRuntime.mark(function e(t,n){var r,u,l,o,c,d,f,m,p,E,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:S}),e.prev=1,e.next=4,cozy.client.files.listTrash();case 4:return r=e.sent,e.next=7,(0,s.getDataElements)(i.DOCTYPE_CONTACTS);case 7:u=e.sent,l=u.filter(function(e){return e.trash}),o=[],c=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.getDataElements)(t.doctype);case 2:n=e.sent,r=n.filter(function(e){return e.trash}).map(function(e){return e.doctype=t.doctype,e}),o.push.apply(o,a(r));case 5:case"end":return e.stop()}},e,void 0)}),d=!0,f=!1,m=void 0,e.prev=14,p=i.DATA_LIST[Symbol.iterator]();case 16:if(d=(E=p.next()).done){e.next=22;break}return h=E.value,e.delegateYield(c(h),"t0",19);case 19:d=!0,e.next=16;break;case 22:e.next=28;break;case 24:e.prev=24,e.t1=e.catch(14),f=!0,m=e.t1;case 28:e.prev=28,e.prev=29,!d&&p.return&&p.return();case 31:if(e.prev=31,!f){e.next=34;break}throw m;case 34:return e.finish(31);case 35:return e.finish(28);case 36:return e.abrupt("return",t({type:g,files:r.map(function(e){return(0,s.extractFileAttributes)(e)}),contacts:l,data:o}));case 39:return e.prev=39,e.t2=e.catch(1),e.abrupt("return",t({type:A,error:e.t2}));case 42:case"end":return e.stop()}},e,void 0,[[1,39],[14,24,28,36],[29,,31,35]])}));return function(t,n){return e.apply(this,arguments)}}()}},"./src/actions/recalls.js":function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.recallsSave=t.recallsNew=t.recallsRemove=t.recallsCalendarClick=t.RECALLS_REMOVE_FAILURE=t.RECALLS_REMOVE_SUCCESS=t.RECALLS_REMOVE=t.RECALLS_SAVE_FAILURE=t.RECALLS_SAVE_SUCCESS=t.RECALLS_SAVE=t.RECALLS_NEW_FAILURE=t.RECALLS_NEW_SUCCESS=t.RECALLS_NEW=t.RECALLS_CALENDAR_CLICK=void 0;var r=n("./src/constants/index.js"),u=n("./src/scripts/cozyRecalls.js"),l=t.RECALLS_CALENDAR_CLICK="RECALLS_CALENDAR_CLICK",o=t.RECALLS_NEW="RECALLS_NEW",s=t.RECALLS_NEW_SUCCESS="RECALLS_NEW_SUCCESS",i=t.RECALLS_NEW_FAILURE="RECALLS_NEW_FAILURE",c=t.RECALLS_SAVE="RECALLS_SAVE",d=t.RECALLS_SAVE_SUCCESS="RECALLS_SAVE_SUCCESS",f=t.RECALLS_SAVE_FAILURE="RECALLS_SAVE_FAILURE",m=t.RECALLS_REMOVE="RECALLS_REMOVE",p=t.RECALLS_REMOVE_SUCCESS="RECALLS_REMOVE_SUCCESS",E=t.RECALLS_REMOVE_FAILURE="RECALLS_REMOVE_FAILURE";t.recallsCalendarClick=function(e){return{type:l,id:e}},t.recallsRemove=function(e){return function(){var t=a(regeneratorRuntime.mark(function t(n,a){var l,o,s,i,c,d,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:m,recalls:e}),t.prev=1,l=[],o=!0,s=!1,i=void 0,t.prev=6,c=e[Symbol.iterator]();case 8:if(o=(d=c.next()).done){t.next=20;break}return f=d.value,t.next=12,(0,u.deleteTrigger)(f.triggerId);case 12:return t.t0=l,t.next=15,cozy.client.data.delete(r.DOCTYPE_RECALLS,f);case 15:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 17:o=!0,t.next=8;break;case 20:t.next=26;break;case 22:t.prev=22,t.t2=t.catch(6),s=!0,i=t.t2;case 26:t.prev=26,t.prev=27,!o&&c.return&&c.return();case 29:if(t.prev=29,!s){t.next=32;break}throw i;case 32:return t.finish(29);case 33:return t.finish(26);case 34:return console.log("remove recalls",l),t.abrupt("return",n({type:p,ids:l.map(function(e){return e.id})}));case 38:return t.prev=38,t.t3=t.catch(1),t.abrupt("return",n({type:E,err:t.t3}));case 41:case"end":return t.stop()}},t,void 0,[[1,38],[6,22,26,34],[27,,29,33]])}));return function(e,n){return t.apply(this,arguments)}}()},t.recallsNew=function(e,t){return function(){var n=a(regeneratorRuntime.mark(function n(a,l){var c,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:o,name:e}),n.prev=1,n.next=4,(0,u.trigger)({date:t.alert||t.deadline,recallName:t.name,deadline:t.deadline});case 4:return c=n.sent,t.triggerId=c.data.id,n.next=8,cozy.client.data.create(r.DOCTYPE_RECALLS,t);case 8:return d=n.sent,n.abrupt("return",a({type:s,recall:d}));case 12:return n.prev=12,n.t0=n.catch(1),n.abrupt("return",a({type:i,err:n.t0}));case 15:case"end":return n.stop()}},n,void 0,[[1,12]])}));return function(e,t){return n.apply(this,arguments)}}()},t.recallsSave=function(e,t){return console.log("recall save",t),function(){var n=a(regeneratorRuntime.mark(function n(a,l){var o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:c,id:e}),n.prev=1,n.next=4,(0,u.deleteTrigger)(t.triggerId);case 4:return n.next=6,(0,u.trigger)({date:t.alert||t.deadline,recallName:t.name,deadline:t.deadline});case 6:return o=n.sent,t.triggerId=o.data.id,n.next=10,cozy.client.data.updateAttributes(r.DOCTYPE_RECALLS,e,t);case 10:return s=n.sent,n.abrupt("return",a({type:d,recall:s}));case 14:return n.prev=14,n.t0=n.catch(1),n.abrupt("return",a({type:f,err:n.t0}));case 17:case"end":return n.stop()}},n,void 0,[[1,14]])}));return function(e,t){return n.apply(this,arguments)}}()}},"./src/actions/trash.js":function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.trashEmpty=t.trashSelectAll=t.trashSelectData=t.trashSelectDocument=t.trashSelectContact=t.trashChangeViewMode=t.TRASH_SELECT_ALL=t.TRASH_SELECT_DATA=t.TRASH_SELECT_CONTACT=t.TRASH_SELECT_DOCUMENT=t.TRASH_CHANGE_VIEW_MODE=t.TRASH_EMPTY_FAILURE=t.TRASH_EMPTY_SUCCESS=t.TRASH_EMPTY=void 0;var r=n("./src/constants/index.js"),u=t.TRASH_EMPTY="TRASH_EMPTY",l=t.TRASH_EMPTY_SUCCESS="TRASH_EMPTY_SUCCESS",o=t.TRASH_EMPTY_FAILURE="TRASH_EMPTY_FAILURE",s=t.TRASH_CHANGE_VIEW_MODE="TRASH_CHANGE_VIEW_MODE",i=t.TRASH_SELECT_DOCUMENT="TRASH_SELECT_DOCUMENT",c=t.TRASH_SELECT_CONTACT="TRASH_SELECT_CONTACT",d=t.TRASH_SELECT_DATA="TRASH_SELECT_DATA",f=t.TRASH_SELECT_ALL="TRASH_SELECT_ALL";t.trashChangeViewMode=function(){return{type:s}},t.trashSelectContact=function(e){return{type:c,contact:e}},t.trashSelectDocument=function(e){return{type:i,document:e}},t.trashSelectData=function(e){return{type:d,data:e}},t.trashSelectAll=function(e){return{type:f,count:e}},t.trashEmpty=function(){return function(){var e=a(regeneratorRuntime.mark(function e(t,n){var a,s,i,c,d,f,m,p,E,h,v,_,y,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:u}),e.prev=1,e.next=4,cozy.client.files.clearTrash();case 4:a=n().trash.contacts,s=!0,i=!1,c=void 0,e.prev=8,d=a[Symbol.iterator]();case 10:if(s=(f=d.next()).done){e.next=17;break}return m=f.value,e.next=14,cozy.client.data.delete(r.DOCTYPE_CONTACTS,m);case 14:s=!0,e.next=10;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(8),i=!0,c=e.t0;case 23:e.prev=23,e.prev=24,!s&&d.return&&d.return();case 26:if(e.prev=26,!i){e.next=29;break}throw c;case 29:return e.finish(26);case 30:return e.finish(23);case 31:p=n().trash.data,E=!0,h=!1,v=void 0,e.prev=35,_=p[Symbol.iterator]();case 37:if(E=(y=_.next()).done){e.next=44;break}return b=y.value,e.next=41,cozy.client.data.delete(b.doctype,b);case 41:E=!0,e.next=37;break;case 44:e.next=50;break;case 46:e.prev=46,e.t1=e.catch(35),h=!0,v=e.t1;case 50:e.prev=50,e.prev=51,!E&&_.return&&_.return();case 53:if(e.prev=53,!h){e.next=56;break}throw v;case 56:return e.finish(53);case 57:return e.finish(50);case 58:return e.abrupt("return",t({type:l,alert:{message:"La corbeille a bien été vidé"}}));case 61:return e.prev=61,e.t2=e.catch(1),e.abrupt("return",t({type:o,alert:{message:"Impossible de vider la corbeille",level:r.ALERT_LEVEL_ERROR}}));case 64:case"end":return e.stop()}},e,void 0,[[1,61],[8,19,23,31],[24,,26,30],[35,46,50,58],[51,,53,57]])}));return function(t,n){return e.apply(this,arguments)}}()}},"./src/components/elements/About.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.About=void 0;var r=n("./node_modules/react/react.js"),u=a(r),l=n("./src/components/elements/Page.jsx"),o=a(l),s=t.About=function(e){return u.default.createElement(o.default,{title:"À propos de HOMEBOOK"},u.default.createElement("article",null,u.default.createElement("h3",null,"Qui sommes-nous ?"),u.default.createElement("br",null),u.default.createElement("p",null,"Homebook est une application de carnet numérique de suivi et d’entretien du logement développée par EDF & Cozy Cloud dans le cadre d’une expérimentation lancée par le Ministère du Logement et du Développement Durable en 2016.",u.default.createElement("br",null),u.default.createElement("br",null),u.default.createElement("b",null,"EDF"),": Electricité De France est le premier producteur et fournisseur d'électricité en France et dans le monde.",u.default.createElement("br",null),u.default.createElement("br",null),u.default.createElement("b",null,"Cozy Cloud"),": Startup reconnue dans le domaine de la confidentialité des données qui offre un service de cloud personnel garantissant la non diffusion des données privées.")),u.default.createElement("article",null,u.default.createElement("h3",null,"Pourquoi une expérimentation ?"),u.default.createElement("br",null),u.default.createElement("p",null,"HLa LTECV du 17 août 2015 (Article 11), instaure un « carnet numérique de suivi et d’entretien du logement » (hors bailleurs sociaux)",u.default.createElement("br",null),u.default.createElement("br",null),"Le carnet numérique sera obligatoire dès 2017 dans le neuf et à partir de 2025 dans l’existant (à la mutation)",u.default.createElement("br",null),u.default.createElement("br",null),"NB: Le décret d’application n’a pas été publié",u.default.createElement("br",null),u.default.createElement("br",null),"Septembre 2016 : Lancement d’un appel à projets par l’Etat",u.default.createElement("br",null),u.default.createElement("br",null),"Objectif: alimenter les réflexions pour la rédaction du décret d’application définissant le contenu du carnet numérique et les modalités de mise en oeuvre .",u.default.createElement("br",null),u.default.createElement("br",null),"Décembre 2016 : COZY CLOUD & EDF font parti des 12 lauréats de l’Appel A Projet du Plan Transition Numérique dans le Bâtiment (PTNB)",u.default.createElement("br",null),u.default.createElement("br",null),"L’expérimentation commence!")),u.default.createElement("article",null,u.default.createElement("h3",null,"Dois-je être client EDF pour utiliser Homebook ?"),u.default.createElement("br",null),u.default.createElement("p",null,"Non, tout le monde peut utiliser Homebook.!")))};t.default=s},"./src/components/elements/Assistant.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Assistant=void 0;var r=n("./node_modules/react/react.js"),u=a(r),l=n("./src/components/elements/Page.jsx"),o=a(l),s=n("./node_modules/react-router-dom/es/index.js"),i=t.Assistant=function(e){return u.default.createElement(o.default,{title:"Assistant de donnée"},u.default.createElement("ul",null,u.default.createElement("li",null,u.default.createElement(s.Link,{replace:!0,to:"/assistant/diagnosis"},"Créer une donnée de diagnostic")),u.default.createElement("li",null,u.default.createElement(s.Link,{replace:!0,to:"/assistant/homedata"},"Créer une donnée de maison")),u.default.createElement("li",null,u.default.createElement(s.Link,{replace:!0,to:"/assistant/equipments"},"Créer une donnée d'équipement")),u.default.createElement("li",null,u.default.createElement(s.Link,{replace:!0,to:"/assistant/works"},"Créer une donnée de travaux")),u.default.createElement("li",null,u.default.createElement(s.Link,{replace:!0,to:"/assistant/maintenances"},"Créer une donnée d'entretien"))))};t.default=i},"./src/components/elements/ContactList.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.ContactList=void 0;var u=n("./node_modules/react/react.js"),l=a(u),o=n("./node_modules/classnames/index.js"),s=a(o),i=n("./node_modules/moment/moment.js"),c=(a(i),n("./src/styles/ElementList.sass")),d=a(c),f=n("./src/constants/index.js"),m=t.ContactList=function(e){var t;return l.default.createElement("div",{className:(0,s.default)(d.default.list,(t={},r(t,d.default.viewList,e.view===f.VIEW_LIST),r(t,d.default.viewGrid,e.view===f.VIEW_GRID),t))},e.children.map(function(t,n){return l.default.createElement("div",{key:n,onClick:function(n){return e.onClickItem(t,n)},className:(0,s.default)(d.default.document,r({},d.default.selected,t.selected))},e.onSelectItem&&t.selected&&l.default.createElement("i",{className:(0,s.default)(d.default.checkbox,"ion-android-checkbox-outline"),onClick:function(n){n.stopPropagation(),e.onSelectItem(t,n)}}),e.onSelectItem&&!t.selected&&l.default.createElement("i",{className:(0,s.default)(d.default.checkbox,"ion-android-checkbox-outline-blank"),onClick:function(n){n.stopPropagation(),e.onSelectItem(t,n)}}),l.default.createElement("div",{className:d.default.content},l.default.createElement("img",{src:t.selected?"/images/contact.selected.png":"/images/contact.png",onError:function(e){return console.log("Error icon")}})),l.default.createElement("div",{className:d.default.name,title:t.firstName+" "+t.lastName},l.default.createElement("span",null,t.firstName," ",t.lastName)),l.default.createElement("div",{className:d.default.contact,title:t.email},t.telephones&&t.telephones[0]&&l.default.createElement("span",null,"Tel : ",t.telephones[0].phone),t.type&&l.default.createElement("span",null,"Spec : ",t.type),t.email&&l.default.createElement("span",null,"@ : ",t.email)))}))};t.default=m},"./src/components/elements/Contacts.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/lodash/map.js"),s=a(o),i=n("./node_modules/lodash/groupBy.js"),c=a(i),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=n("./node_modules/react/react.js"),m=a(f),p=n("./node_modules/classnames/index.js"),E=a(p),h=n("./node_modules/react-portal/build/portal.js"),v=a(h),_=n("./src/styles/buttons.scss"),y=a(_),b=n("./src/styles/Contacts.sass"),C=a(b),S=n("./src/components/elements/ToolBoxOptions.jsx"),g=a(S),A=n("./src/components/elements/Page.jsx"),O=a(A),T=n("./src/components/elements/Loader.jsx"),D=a(T),x=n("./src/components/elements/ContactList.jsx"),R=a(x),N=n("./src/components/modals/Modal.jsx"),j=a(N),k=n("./src/components/modals/ContactsModal.jsx"),w=a(k),L=n("./src/constants/index.js"),P=function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={current:null,modalOpen:!1,edition:!1},a}return l(t,e),d(t,[{key:"componentWillMount",value:function(){this.props.onLoadContacts()}},{key:"componentWillReceiveProps",value:function(e){e.elements.length!==e.count&&e.onLoadContacts()}},{key:"add",value:function(){this.setState({current:null,modalOpen:!0,edition:!0})}},{key:"open",value:function(e){this.setState({current:e,modalOpen:!0})}},{key:"select",value:function(e){this.props.onSelectContact(e)}},{key:"remove",value:function(){this.state.current&&(this.props.onRemoveContacts([this.state.current]),this.setState({modalOpen:!1,current:null}))}},{key:"addOrSaveContact",value:function(e){this.state.current?this.props.onSaveContact(this.state.current._id,e):this.props.onNewContact(e.firstName,e),this.setState({modalOpen:!1,current:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.elements,a=t.count,r=t.selectedCount,u=t.status,l=u===L.STATUS_LOAD,o=n.sort(function(e,t){return e.lastName<t.lastName?-1:e.lastName>t.lastName?1:0}),i=(0,c.default)(o,function(e){var t=e.lastName||e.firstName||"_";t=t.trim().toUpperCase();var n=t[0];return/[0-9]/g.test(n)?"#":n}),d=m.default.createElement("button",{onClick:function(){return e.add()},className:(0,E.default)(y.default.button,y.default.default)},m.default.createElement("i",{className:"ion-ios-plus-empty"}),"AJOUTER"),f=m.default.createElement(g.default,null,m.default.createElement("ul",null,m.default.createElement("li",{onClick:function(){e.props.onSelectAll()}},m.default.createElement("i",{className:"ion-ios-checkmark-outline"},"TOUT SELECTIONNER")))),p=m.default.createElement("button",{onClick:function(){return e.props.onRemoveContacts(n.filter(function(e){return e.selected}))},className:(0,E.default)(y.default.button,y.default.assertive)},m.default.createElement("i",{className:"ion-ios-trash-outline"}),"SUPPRIMER"),h=[d,f];return r>0&&h.unshift(p),m.default.createElement(O.default,{title:"Contacts",subtitle:null!==a&&a+(a>1?" contacts":" contact"),actions:h},m.default.createElement(D.default,{display:l}),!l&&n.length>0&&(0,s.default)(i,function(t,n){return m.default.createElement("div",{key:n},m.default.createElement("h3",{className:C.default.letter},n),m.default.createElement(R.default,{view:L.VIEW_LIST,onClickItem:function(t){return e.open(t)},onSelectItem:function(t){return e.select(t)}},t))}),!l&&0===n.length&&"Aucun contacts",m.default.createElement(v.default,{isOpened:this.state.modalOpen,closeOnEsc:!0,onClose:function(){return e.setState({modalOpen:!1,current:null,edition:!1})}},m.default.createElement(j.default,null,m.default.createElement(w.default,{item:this.state.current,title:this.state.current?"Modifier contact":"Nouveau contact",onSave:function(t){return e.addOrSaveContact(t)},onRemove:function(){return e.remove()},edit:this.state.edition}))))}}]),t}(f.Component);t.default=P},"./src/components/elements/Data.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n("./node_modules/react/react.js"),c=a(i),d=n("./node_modules/classnames/index.js"),f=a(d),m=n("./src/styles/buttons.scss"),p=a(m),E=n("./src/components/elements/Loader.jsx"),h=a(E),v=n("./src/components/elements/Page.jsx"),_=a(v),y=n("./src/components/elements/DataTable.jsx"),b=a(y),C=n("./src/scripts/dataFields.js"),S=n("./src/constants/index.js"),g=function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={edition:!1,current:{}},console.log("Data",e),a}return l(t,e),s(t,[{key:"componentWillMount",value:function(){this.infos=(0,C.getInfosFromSlug)(this.props.match.params.slug),this.id=this.props.match.params.id,this.props.onLoadData(this.infos.doctype,this.id)}},{key:"componentWillReceiveProps",value:function(e){this.state.current=o({},e.current)}},{key:"save",value:function(){this.setState({edition:!1}),this.props.dataSave(this.infos.doctype,this.state.current)}},{key:"edit",value:function(){this.setState({edition:!0})}},{key:"remove",value:function(){var e=this;this.props.dataRemove(this.infos.doctype,[this.props.current]).then(function(t){return e.props.history.goBack()})}},{key:"renderData",value:function(e){var t=this,n=(0,C.getFields)(this.infos.doctype);if(n){var a=this.state.current;return c.default.createElement(b.default,null,n.map(function(e,n){return c.default.createElement(b.default.Group,{title:e.name,key:n},e.group.map(function(e,n){return c.default.createElement(b.default.Item,{key:n,title:e.display,value:a[e.name],type:e.type,updatable:t.state.edition,values:e.values,onChange:function(t){return a[e.name]=t}})}))}))}}},{key:"render",value:function(){var e=this,t=this.props.status===S.STATUS_LOAD,n=[],a=c.default.createElement("button",{onClick:function(){return e.remove()},className:(0,f.default)(p.default.button,p.default.assertive),title:"Supprimer"},c.default.createElement("i",{className:"ion-ios-trash-outline"}),c.default.createElement("span",{className:p.default.text},"SUPPRIMER"));if(n.push(a),this.state.edition){var r=c.default.createElement("button",{onClick:function(){return e.save()},className:(0,f.default)(p.default.button,p.default.stable),title:"Sauvegarder"},c.default.createElement("i",{className:"fa fa-floppy-o"}),c.default.createElement("span",{className:p.default.text},"SAUVEGARDER"));n.unshift(r)}else{var u=c.default.createElement("button",{onClick:function(){return e.edit()},className:(0,f.default)(p.default.button,p.default.stable),title:"Modifier"},c.default.createElement("i",{className:"fa fa-edit"}),c.default.createElement("span",{className:p.default.text},"MODIFIER"));n.unshift(u)}var l=this.infos.name;return this.props.current&&this.props.current.name&&(l+="/"+this.props.current.name),c.default.createElement(_.default,{title:l,subtitle:"",actions:n,onBackPress:function(){return e.props.history.goBack()}},c.default.createElement(h.default,{display:t}),!t&&this.renderData.bind(this)())}}]),t}(i.Component);t.default=g},"./src/components/elements/DataForm.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/lodash/isObject.js"),i=a(s),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=n("./node_modules/react/react.js"),m=a(f),p=n("./node_modules/classnames/index.js"),E=a(p),h=n("./node_modules/moment/moment.js"),v=a(h),_=n("./src/components/elements/Page.jsx"),y=a(_),b=n("./src/styles/buttons.scss"),C=a(b),S=n("./src/components/utils/CustomInput.jsx"),g=a(S),A=n("./src/constants/index.js"),O=n("./src/scripts/dataFields.js"),T=function(e){function t(e,n){u(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={values:{},step:0},a}return o(t,e),d(t,[{key:"componentWillMount",value:function(){this.infos=(0,O.getInfosFromSlug)(this.props.match.params.slug),this.fields=(0,O.getFields)(this.infos.doctype)}},{key:"nextStep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.fields[0].group.length-1,n=this.fields[0].group,a=n[this.state.step];if(!(a.required&&void 0===this.state.values[a.name]||""===this.state.values[a.name])){var u=this.state.step+e;if(u<=t){var l=n[u];if(l.depend)if((0,i.default)(l.depend)){if(this.state.values[l.depend.key]!==l.depend.value)return this.nextStep(e+1)}else if(l.depend instanceof String&&!this.state.values[l.depend])return this.nextStep();var o=c({},this.state.values,r({},l.name,void 0));switch(l.type){case"list":o[l.name]=l.values[0];break;case"number":o[l.name]=0;break;case"date":o[l.name]=(0,v.default)().format("DD/MM/YYYY");break;case"contract":case"address":o[l.name]={};break;case"text":case"":case void 0:o[l.name]=""}console.log("Step",u,o),this.setState({step:u,values:o})}else{var s=c({},this.state.values);this.props.onNewData(this.infos.doctype,s),this.props.history.replace(A.ROOT_NAME)}}}},{key:"change",value:function(e,t){var n=c({},this.state.values,r({},t,e));this.setState({values:n})}},{key:"render",value:function(){var e=this,t=this.fields[0].group,n=t[this.state.step],a=this.state.values[n.name],r="Questionnaire "+this.infos.name;return m.default.createElement(y.default,{title:r},m.default.createElement("div",{className:"content"},m.default.createElement("h3",null,n.question||n.display),m.default.createElement(g.default,{style:{width:"100%",border:"none",borderBottom:"1px solid #ddd",fontSize:"20px",outline:"none",padding:"5px"},autoFocus:!0,type:n.type,value:a,values:n.values,placeholder:n.display,onChange:function(t){return e.change(t,n.name)}})),m.default.createElement("div",{className:"footer",style:{margin:"20px 0"}},m.default.createElement("button",{onClick:function(){return e.nextStep()},className:(0,E.default)(C.default.button,C.default.default),title:"Suivant",disabled:n.required&&void 0===a||""===a},m.default.createElement("i",{className:"ion-ios-arrow-thin-right"}),"Suivant")))}}]),t}(f.Component);t.default=T},"./src/components/elements/DataList.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.DataList=void 0;var u=n("./node_modules/react/react.js"),l=a(u),o=n("./node_modules/classnames/index.js"),s=a(o),i=n("./node_modules/moment/moment.js"),c=(a(i),n("./src/styles/ElementList.sass")),d=a(c),f=n("./src/constants/index.js"),m=t.DataList=function(e){var t;return l.default.createElement("div",{className:(0,s.default)(d.default.list,(t={},r(t,d.default.viewList,e.view===f.VIEW_LIST),r(t,d.default.viewGrid,e.view===f.VIEW_GRID),t))},e.children.map(function(t,n){return l.default.createElement("div",{key:n,onClick:function(n){return e.onClickItem(t,n)},className:(0,s.default)(d.default.document,r({},d.default.selected,t.selected))},e.onSelectItem&&t.selected&&l.default.createElement("i",{className:(0,s.default)(d.default.checkbox,"ion-android-checkbox-outline"),onClick:function(n){n.stopPropagation(),e.onSelectItem(t,n)}}),e.onSelectItem&&!t.selected&&l.default.createElement("i",{className:(0,s.default)(d.default.checkbox,"ion-android-checkbox-outline-blank"),onClick:function(n){n.stopPropagation(),e.onSelectItem(t,n)}}),l.default.createElement("div",{className:d.default.content},l.default.createElement("img",{src:p(t),onError:function(e){return console.log("Error icon",e)}})),l.default.createElement("div",{className:d.default.name,title:t.name||t.type},t.name||t.type))}))},p=function(e){var t="/images/";switch(e._type||e.doctype){case f.DOCTYPE_DIAGNOSIS:t+="data-diagnostics";break;case f.DOCTYPE_HOMEDATA:t+="data-donnees-de-propriete";break;case f.DOCTYPE_EQUIPMENTS:t+="data-equipements";break;case f.DOCTYPE_MAINTENANCES:case f.DOCTYPE_WORKS:t+="data-travaux-et-entretien";break;default:t+="data-element"}return e.selected&&(t+=".selected"),t+".png"};t.default=m},"./src/components/elements/DataTable.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DataTable=t.DataTableItem=t.DataTableGroup=void 0;var r=n("./node_modules/lodash/map.js"),u=a(r),l=n("./node_modules/lodash/isObject.js"),o=a(l),s=n("./node_modules/react/react.js"),i=a(s),c=n("./src/styles/DataTable.sass"),d=a(c),f=n("./node_modules/moment/moment.js"),m=(a(f),n("./src/components/utils/CustomInput.jsx")),p=a(m),E=t.DataTableGroup=function(e){return i.default.createElement("div",null,i.default.createElement("h2",null,e.title||i.default.createElement("span",null," ")),i.default.createElement("table",{className:d.default.group},i.default.createElement("tbody",null,e.children)))},h=t.DataTableItem=function(e){return i.default.createElement("tr",{className:d.default.item},i.default.createElement("th",null,i.default.createElement("div",null,e.title)),i.default.createElement("td",null,e.updatable&&i.default.createElement(p.default,{value:e.value,values:e.values,placeholder:e.title,type:e.type,onChange:e.onChange}),function(){if(!e.updatable){if((0,o.default)(e.value))return(0,u.default)(e.value,function(e,t){return i.default.createElement("div",{key:t},e)});var t=e.value;switch(e.type){case"boolean":t=1===t?"Oui":"Non"}return(0,o.default)(t)&&(t=""),t}}()))},v=t.DataTable=function(e){return i.default.createElement("form",{className:d.default.main,onSubmit:function(){return e.onSubmit&&e.onSubmit()}},e.children)};v.Item=h,v.Group=E,t.default=v},"./src/components/elements/DirectoryPicker.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/lodash/isFunction.js"),i=a(s),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n("./node_modules/react/react.js"),f=a(d),m=n("./src/styles/DirectoryPicker.sass"),p=a(m),E=n("./node_modules/classnames/index.js"),h=a(E),v=function(e){function t(e,n){u(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return console.log("Tree",a.props.dirs),a.props.root?(a.default=a.props.default,a.rootDirectoryName=a.props.rootDirectoryName,a.state={current:a.props.default||a.props.root},a):l(a)}return o(t,e),c(t,[{key:"_onItemClick",value:function(e){e&&(this.setState({current:e}),(0,i.default)(this.props.onPathChange)&&this.props.onPathChange(e))}},{key:"_toggleDir",value:function(e){var t=this.toggleDirRec(e,this.props.dirs.childs);console.log("BD click ok ",t),t&&this.setState({})}},{key:"toggleDirRec",value:function(e,t){var n=!0,a=!1,r=void 0;try{for(var u,l=t[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var o=u.value;if(o.path===e)return o.open=!o.open,!0;if(o.childs&&o.childs.length>0){if(this.toggleDirRec(e,o.childs))return!0}}}catch(e){a=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}return!1}},{key:"_renderDirs",value:function(){var e=this;if(this.props.dirs){var t=this.createDirList(this.props.dirs.childs),n=this.rootDirectoryName;return f.default.createElement("div",{className:p.default.container},f.default.createElement("span",{className:(0,h.default)(p.default.name,r({},p.default.selected,this.props.dirs.path===this.state.current)),onClick:function(){return e._onItemClick(e.props.dirs.path)}},f.default.createElement("i",{className:(0,h.default)(p.default.icon,"ion-ios-arrow-down")}),f.default.createElement("i",{className:(0,h.default)(p.default.icon,"ion-ios-folder-outline")}),n),t)}return null}},{key:"createDirList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===t.length)return null;var n=[],a=!0,u=!1,l=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var i=o.value,c=i.name.substring(i.name.lastIndexOf("/")+1);n.push(f.default.createElement("li",{key:i.name},f.default.createElement("span",{className:(0,h.default)(p.default.name,r({},p.default.selected,i.path===this.state.current)),"data-path":i.path,onDoubleClick:function(t){return e._toggleDir(t.target.dataset.path)},onClick:function(t){return e._onItemClick(t.target.dataset.path)}},f.default.createElement("i",{onClick:function(t){return e._toggleDir(t.target.dataset.path)},"data-path":i.path,className:(0,h.default)(p.default.icon,{"ion-ios-arrow-right":i.childs.length>0&&!i.open,"ion-ios-arrow-down":i.childs.length>0&&i.open})}),f.default.createElement("i",{className:(0,h.default)(p.default.icon,"ion-ios-folder-outline")}),c),i.open&&i.childs.length>0?this.createDirList(i.childs):null))}}catch(e){u=!0,l=e}finally{try{!a&&s.return&&s.return()}finally{if(u)throw l}}return f.default.createElement("ul",{className:p.default.content},n)}},{key:"render",value:function(){return f.default.createElement("div",{className:p.default.main},this._renderDirs.bind(this)())}}]),t}(f.default.Component);t.default=v},"./src/components/elements/DocumentList.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentList=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n("./node_modules/react/react.js"),c=a(i),d=n("./node_modules/classnames/index.js"),f=a(d),m=n("./node_modules/moment/moment.js"),p=a(m),E=n("./src/styles/ElementList.sass"),h=a(E),v=n("./src/constants/index.js"),_=t.DocumentList=function(e){var t;return c.default.createElement("div",{className:(0,f.default)(h.default.list,(t={},o(t,h.default.viewList,e.view===v.VIEW_LIST),o(t,h.default.viewGrid,e.view===v.VIEW_GRID),t))},e.children.map(function(t,n){return c.default.createElement("div",{key:n,onClick:function(n){return e.onClickItem(t,n)},className:(0,f.default)(h.default.document,o({},h.default.selected,t.selected))},e.onSelectItem&&t.selected&&c.default.createElement("i",{className:(0,f.default)(h.default.checkbox,"ion-android-checkbox-outline"),onClick:function(n){n.stopPropagation(),e.onSelectItem(t,n)}}),e.onSelectItem&&!t.selected&&c.default.createElement("i",{className:(0,f.default)(h.default.checkbox,"ion-android-checkbox-outline-blank"),onClick:function(n){n.stopPropagation(),e.onSelectItem(t,n)}}),c.default.createElement("div",{className:h.default.content},c.default.createElement(y,{id:t.id,selected:t.selected,type:t.type,name:t.name,links:t.links,image:"image"===t.class})),c.default.createElement("div",{className:h.default.name,title:t.name},t.name),c.default.createElement("div",{className:h.default.date},c.default.createElement("span",{className:h.default.dateText},"Dernière modification : "),c.default.createElement("span",null,(0,p.default)(t.updated_at).format("DD/MM/YYYY"))))}))},y=function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={icon:a.getItemIcon(e)},a}return l(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){e.selected==this.props.selected||this.props.image||(this.state={icon:this.getItemIcon(e)})}},{key:"getItemIcon",value:function(e){var t=this,n=e.type||"file",a="/images/file";if("file"===n)e.image&&e.links&&e.links.small&&cozy.client.fullpath(e.links.small).then(function(e){t.state.icon!=e&&t.setState({icon:e})});else switch(a="/images/",e.name){case"Diagnostics":a+="folder-diagnostic";break;case"Documents de propriété":a+="folder-document-de-propriete";break;case"Équipements":a+="folder-equipements";break;case"Travaux":a+="folder-travaux";break;case"Entretiens":a+="folder-entretien";break;case"Usages":a+="folder-document-de-propriete";break;default:a+="folder"}return e.selected&&(a+=".selected"),a+".png"}},{key:"iconErr",value:function(){var e=this;this.props.image&&cozy.client.files.getDownloadLinkById(this.props.id).then(function(e){return cozy.client.fullpath(e)}).then(function(t){return e.setState({icon:t})})}},{key:"render",value:function(){var e=this;return c.default.createElement("img",{src:this.state.icon,onError:function(t){return e.iconErr(t)}})}}]),t}(i.Component);t.default=_},"./src/components/elements/DocumentView.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n("./node_modules/react/react.js"),c=a(i),d=n("./node_modules/react-router-dom/es/index.js"),f=n("./node_modules/classnames/index.js"),m=a(f),p=n("./src/components/utils/PDFViewer.jsx"),E=a(p),h=n("./src/components/utils/TXTViewer.jsx"),v=a(h),_=n("./src/components/elements/Loader.jsx"),y=a(_),b=n("./src/components/elements/Page.jsx"),C=a(b),S=n("./src/components/elements/ToolBoxOptions.jsx"),g=a(S),A=n("./src/components/modals/Modal.jsx"),O=(a(A),n("./src/components/utils/TypeChanger.jsx")),T=a(O),D=n("./src/styles/Documents.sass"),x=a(D),R=n("./src/styles/buttons.scss"),N=a(R),j=n("./src/scripts/fileTypes.js"),k=n("./src/constants/index.js"),w=function(e){function t(e,n){u(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={url:"",loading:!0,modalOpen:!0,zoom:.1,changeType:!1,imgLoad:!0},a.type=void 0,a.touch={start:!1,lastDistance:0},a.renderMethod=a.renderSimple.bind(a),a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){var e,t=this;cozy.client.files.getDownloadLinkById(this.props.current.id).then(function(e){return cozy.client.fullpath(e)}).then(function(e){return t.setState({url:e,loading:!1})});var n=(e={},r(e,"application/pdf",this.renderPDF),r(e,"text/plain",this.renderText),r(e,"image/",this.renderImage),e),a=!0,u=!1,l=void 0;try{for(var o,s=Object.keys(n)[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var i=o.value;if(-1!==this.props.current.mime.indexOf(i)){this.renderMethod=n[i].bind(this),this.type=i;break}}}catch(e){u=!0,l=e}finally{try{!a&&s.return&&s.return()}finally{if(u)throw l}}if("image/"===this.type){var c=window.innerWidth,d=this.props.current.metadata.width;this.state.zoom=Math.min(Math.max(c/d,.1),1)}else void 0===this.type&&this.props.onAlert("Impossible de lire ce type de fichier, veuillez le télécharger afin de le lire sur votre ordinateur")}},{key:"componentWillReceiveProps",value:function(e){}},{key:"download",value:function(){this.props.onDownload(this.props.current)}},{key:"remove",value:function(){this.props.onRemove(this.props.current),this.props.history.goBack()}},{key:"renderSimple",value:function(){return c.default.createElement("div",null,c.default.createElement("div",null,"URL du fichier : ",c.default.createElement("a",{href:this.state.url},this.state.url)))}},{key:"renderText",value:function(){return c.default.createElement(v.default,{url:this.state.url})}},{key:"renderImage",value:function(){var e=this,t=this.props.current.metadata.width*this.state.zoom,n=this.props.current.metadata.height*this.state.zoom;return c.default.createElement("div",{ref:"imagebox",style:{overflow:"auto",flex:1,display:"inline-block"},onTouchStart:function(t){return e.handleTouchStart(t)},onTouchEnd:function(t){return e.handleTouchStop(t)},onTouchMove:function(t){return e.handleTouchMove(t)}},c.default.createElement(y.default,{display:this.state.imgLoad}),c.default.createElement("img",{style:{width:t+"px",height:n+"px"},src:this.state.url,alt:this.props.current.name,onWheel:function(t){return e.imageZoom(t)},onLoad:function(t){return e.setState({imgLoad:!1})}}))}},{key:"componentDidUpdate",value:function(){if(this.refs.imagebox&&"image/"===this.type){var e=this.refs.imagebox,t=e.scrollWidth-e.clientWidth,n=e.scrollHeight-e.clientHeight;e.scrollLeft=t/2,e.scrollTop=n/2}}},{key:"imageZoom",value:function(e){if(e.preventDefault(),e.stopPropagation(),e.deltaY>0){if(this.state.zoom<=.21)return this.setState({zoom:.1});this.setState({zoom:this.state.zoom-.2})}else{if(this.state.zoom>=4)return this.setState({zoom:4});this.setState({zoom:this.state.zoom+.2})}}},{key:"getPointFromTouch",value:function(e,t){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}},{key:"getDistance",value:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"handleTouchMove",value:function(e){if(this.touch.start&&!(e.touches.length<2)){var t=this.getPointFromTouch(e.touches[0],this.refs.imagebox),n=this.getPointFromTouch(e.touches[1],this.refs.imagebox),a=this.getDistance(t,n),r=a-this.touch.lastDistance;if(this.touch.lastDistance=a,console.log("Zoom",r),r<-10||r>10){var u=this.state.zoom+r/600;if(u<=.1||u>=5)return;console.log("New zoom",u),this.setState({zoom:u})}}}},{key:"handleTouchStart",value:function(e){if(console.log("Touch Start",e.touches),!(this.touch.start||e.touches.length<2)){this.touch.start=!0;var t=this.getPointFromTouch(e.touches[0],this.refs.imagebox),n=this.getPointFromTouch(e.touches[1],this.refs.imagebox);this.touch.lastDistance=this.getDistance(t,n)}}},{key:"handleTouchStop",value:function(){this.touch.start=!1}},{key:"renderPDF",value:function(){return c.default.createElement(E.default,{url:this.state.url})}},{key:"createBreadcrums",value:function(){var e=this.props.location.pathname.substring(1),t=e.split("/"),n=[];if(t.length>1){var a=t[0];if(n.push({path:a,fullPath:"/"+a}),t.length>3){t[t.length-3];n.push({path:"/...",fullPath:"/"+t.slice(0,t.length-2).join("/")});var r=t[t.length-2];n.push({path:"/"+r,fullPath:"/"+t.slice(0,t.length-1).join("/")})}else if(t.length>2){var r=t[t.length-2];n.push({path:"/"+r,fullPath:"/"+t.slice(0,t.length-1).join("/")})}}var u=(t.length>1?"/":"")+t[t.length-1];return c.default.createElement("span",{className:x.default.breadcrums},n.map(function(e,t){return c.default.createElement(d.Link,{key:t,to:e.fullPath},e.path)}),c.default.createElement("strong",null,u))}},{key:"render",value:function(){var e=this,t=null;t=this.state.changeType?c.default.createElement(T.default,{type:this.props.current.tags[0],onCancel:function(){return e.setState({changeType:!1})},onChange:function(t){e.setState({changeType:!1}),e.props.onChangeType(e.props.current,t)}}):this.props.current.tags&&(0,j.getDisplayName)(this.props.current.tags[0]);var n=c.default.createElement(g.default,null,c.default.createElement("ul",null,c.default.createElement("li",{onClick:function(){e.setState({changeType:!0})}},c.default.createElement("i",{className:"ion-ios-cloud-download-outline"},"CHANGE TYPE")))),a=c.default.createElement("button",{onClick:function(){return e.download()},className:(0,m.default)(N.default.button,N.default.stable),title:"Télécharger"},c.default.createElement("i",{className:"ion-ios-cloud-download-outline"}),c.default.createElement("span",{className:N.default.text},"TELECHARGER")),r=c.default.createElement("button",{onClick:function(){return e.remove()},className:(0,m.default)(N.default.button,N.default.assertive),title:"Supprimer"},c.default.createElement("i",{className:"ion-ios-trash-outline"}),c.default.createElement("span",{className:N.default.text},"SUPPRIMER")),u=this.state.loading;return c.default.createElement(C.default,{title:this.createBreadcrums(),subtitle:!u&&status!=k.STATUS_ERROR&&t,actions:[a,r,n],onBackPress:function(){return e.props.history.goBack()},flex:-1!==this.props.current.mime.indexOf("image/")},c.default.createElement(y.default,{display:u}),!u&&this.renderMethod())}}]),t}(i.Component);t.default=w},"./src/components/elements/Documents.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("./node_modules/react/react.js"),i=a(s),c=n("./src/containers/DocumentView.js"),d=a(c),f=n("./src/containers/Explorer.js"),m=a(f),p=n("./src/constants/index.js"),E=(n("./src/scripts/dataFields.js"),function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.newPath=null,a}return l(t,e),o(t,[{key:"componentWillMount",value:function(){this.newPath=this.createRealPath(this.props),this.newPath===this.props.path&&this.props.fileCount===this.props.files.length||this.props.onOpenFolder(this.newPath)}},{key:"componentWillReceiveProps",value:function(e){if(this.newPath=this.createRealPath(e),e.status===p.STATUS_ERROR){if(this.newPath===e.path)return;return e.onOpenFolder(this.newPath)}e.status!==p.STATUS_LOAD&&(this.newPath===e.path&&e.fileCount===e.files.length||e.onOpenFolder(this.newPath))}},{key:"createRealPath",value:function(e){var t=e.match.params.path,n=p.ROOT_PATH;return t&&(n+="/"+t),n}},{key:"render",value:function(){var e=this.props.lastType;return e===p.TYPE_FILE?i.default.createElement(d.default,{location:this.props.location,history:this.props.history,match:this.props.match}):e===p.TYPE_FOLDER?i.default.createElement(m.default,{path:this.newPath,location:this.props.location,history:this.props.history,match:this.props.match}):null}}]),t}(s.Component));t.default=E},"./src/components/elements/Explorer.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("./node_modules/react/react.js"),i=a(s),c=n("./node_modules/classnames/index.js"),d=a(c),f=n("./node_modules/react-portal/build/portal.js"),m=a(f),p=n("./node_modules/react-router-dom/es/index.js"),E=n("./src/tools/index.js"),h=n("./src/styles/Documents.sass"),v=a(h),_=n("./src/styles/buttons.scss"),y=a(_),b=n("./src/components/elements/Page.jsx"),C=a(b),S=n("./src/components/elements/Loader.jsx"),g=a(S),A=n("./src/components/elements/DocumentList.jsx"),O=a(A),T=n("./src/components/elements/DataList.jsx"),D=a(T),x=n("./src/components/elements/DocumentView.jsx"),R=(a(x),n("./src/components/elements/ToolBoxOptions.jsx")),N=a(R),j=n("./src/components/modals/Modal.jsx"),k=a(j),w=n("./src/containers/Importer.js"),L=a(w),P=n("./src/containers/Mover.js"),M=a(P),I=n("./src/components/utils/RenameInput.jsx"),F=a(I),U=n("./src/constants/index.js"),q=n("./src/scripts/dataFields.js"),z=(n("./src/scripts/fileTypes.js"),n("./src/scripts/confirm.js")),V=a(z),B=n("./src/components/modals/ConfirmModal.jsx"),Y=a(B),H=U.DATA_LIST.map(function(e){return e.path}),W=i.default.createElement(Y.default,null,i.default.createElement("p",null,"Voulez-vous supprimer ce(s) élément(s) ?")),G=function(e,t){var n=!0,a=!1,r=void 0;try{for(var u,l=e[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var o=u.value;if(o.path&&-1!==t.indexOf(o.path))return!0}}catch(e){a=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}return!1},Q=function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={importerOpen:!1,moveModalOpen:!1,doctype:!1,renaming:!1},a}return l(t,e),o(t,[{key:"componentWillMount",value:function(){this.checkForData(this.props.path)}},{key:"componentWillReceiveProps",value:function(e){this.checkForData(e.path)}},{key:"checkForData",value:function(e){var t=(0,q.getInfosFromPath)(e);t?this.state.doctype?this.state.doctype!==t.doctype&&this.props.onLoadData(t.doctype):(this.state.doctype=t.doctype,this.props.onLoadData(t.doctype)):this.state.doctype=!1}},{key:"openImporter",value:function(){this.props.onImporterClick(this.props.path),this.setState({importerOpen:!0})}},{key:"openMover",value:function(){this.props.onImporterClick(this.props.path),this.setState({moveModalOpen:!0})}},{key:"remove",value:function(){var e=this;this.props.selectedCount+this.props.selectedDataCount<=0||(0,V.default)(W).then(function(){e.props.selectedCount>0&&e.props.onRemove(e.props.files.filter(function(e){return e.selected})),e.props.selectedDataCount>0&&e.props.onRemoveData(e.state.doctype,e.props.data.filter(function(e){return e.selected}))}).catch(function(e){})}},{key:"move",value:function(e){this.props.folder.path!==e&&this.props.onMoveFile(this.props.files.filter(function(e){return e.selected}),e)}},{key:"download",value:function(){this.props.onDownload(this.props.files.filter(function(e){return e.selected}))}},{key:"rename",value:function(e){this.props.onRename(this.state.renaming.id,e),this.setState({renaming:!1})}},{key:"createBreadcrums",value:function(){var e=this.props.location.pathname.substring(1),t=e.split("/"),n=[];if(t.length>1){var a=t[0];if(n.push({path:a,fullPath:"/"+a}),t.length>3){t[t.length-3];n.push({path:"/...",fullPath:"/"+t.slice(0,t.length-2).join("/")});var r=t[t.length-2];n.push({path:"/"+r,fullPath:"/"+t.slice(0,t.length-1).join("/")})}else if(t.length>2){var r=t[t.length-2];n.push({path:"/"+r,fullPath:"/"+t.slice(0,t.length-1).join("/")})}}var u=(t.length>1?"/":"")+t[t.length-1];return i.default.createElement("span",{className:v.default.breadcrums},n.map(function(e,t){return i.default.createElement(p.Link,{key:t,to:e.fullPath},e.path)}),i.default.createElement("strong",null,u))}},{key:"renderDocuments",value:function(){if(!(this.props.files.length<=0)){var e=this.props,t=e.history,n=e.viewMode,a=e.files,r=e.folder,u=e.onSelect;return i.default.createElement(O.default,{view:n,onClickItem:function(e){var n=void 0;n=(0,E.isDirectory)(e)?(0,E.createFakePath)(e.path):(0,E.createFakePath)(r.path+"/"+e.name),console.log("Push path",n),t.push(n)},onSelectItem:function(e){return u(e)}},a)}}},{key:"renderData",value:function(){if(this.state.doctype){var e=this.props,t=e.history,n=e.viewMode,a=e.data,r=e.onSelectData,u=(0,q.getInfosFromPath)(this.props.path).slug;return i.default.createElement(D.default,{view:n,onClickItem:function(e){t.push("/data/"+u+"/"+e._id)},onSelectItem:function(e){return r(e)}},a)}}},{key:"renderError",value:function(){return i.default.createElement("div",null,i.default.createElement("h3",null,"Error"),i.default.createElement("p",null,"Essayer plus trad"))}},{key:"render",value:function(){var e=this,t=this.props,n=(t.files,t.folder,t.fileCount),a=t.status,r=t.selectedCount,u=t.dataStatus,l=t.dataCount,o=t.selectedDataCount,s=a===U.STATUS_LOAD||u===U.STATUS_LOAD,c=!s&&0===n&&this.state.doctype&&0===l,f=null;f=this.state.renaming?i.default.createElement(F.default,{name:this.state.renaming.name,onRename:function(t){return e.rename(t)},onCancel:function(){return e.setState({renaming:!1})}}):this.createBreadcrums();var p=i.default.createElement("button",{onClick:function(){return e.openImporter()},className:(0,d.default)(y.default.button,y.default.default),title:"Importer"},i.default.createElement("i",{className:"ion-ios-cloud-upload-outline"}),i.default.createElement("span",{className:y.default.text},"IMPORTER")),E=i.default.createElement(N.default,null,i.default.createElement("ul",null,i.default.createElement("li",{onClick:function(){e.props.onChangeViewMode()}},this.props.viewMode===U.VIEW_LIST?i.default.createElement("i",{className:"ion-grid"},"VUE GRILLE"):i.default.createElement("i",{className:"ion-navicon"},"VUE LISTE")),i.default.createElement("li",{onClick:function(){e.props.onNewFolder()}},i.default.createElement("i",{className:"ion-ios-plus-empty"},"NOUVEAU DOSSIER")),i.default.createElement("li",{onClick:function(){e.props.onDownloadAll(e.props.files.slice(0))}},i.default.createElement("i",{className:"ion-ios-cloud-download-outline"},"TOUT TELECHARGER")))),h=i.default.createElement("select",{defaultValue:this.props.filter,onChange:function(t){return e.props.onChangeFilter(t.target.value)}},i.default.createElement("option",{value:U.SORT_DATE},"TRIER PAR DATE"),i.default.createElement("option",{value:U.SORT_NAME},"TRIER PAR NOM")),v=[p,E],_=this.props.files.filter(function(e){return e.selected});if((r>0||o>0)&&!G(_,H)){var b=i.default.createElement("button",{onClick:function(){return e.remove()},className:(0,d.default)(y.default.button,y.default.assertive),title:"Supprimer"},i.default.createElement("i",{className:"ion-ios-trash-outline"}),i.default.createElement("span",{className:y.default.text},"SUPPRIMER"));v.unshift(b)}if(r>0){var S=i.default.createElement("button",{onClick:function(){return e.download()},className:(0,d.default)(y.default.button,y.default.stable),title:"Télécharger"},i.default.createElement("i",{className:"ion-ios-cloud-download-outline"}),i.default.createElement("span",{className:y.default.text},"TELECHARGER"));if(v.unshift(S),!G(_,H)){var A=i.default.createElement("button",{onClick:function(){return e.openMover()},className:(0,d.default)(y.default.button,y.default.stable),title:"Déplacer"},i.default.createElement("i",{className:"ion-ios-browsers-outline"}),i.default.createElement("span",{className:y.default.text},"DEPLACER"));if(v.unshift(A),1===r){var O=i.default.createElement("button",{className:(0,d.default)(y.default.button,y.default.stable),onClick:function(){return e.setState({renaming:_.pop()})},title:"Renommer"},i.default.createElement("i",{className:"ion-ios-compose-outline"}),i.default.createElement("span",{className:y.default.text},"RENOMMER"));v.unshift(O)}}}var T=n;this.state.doctype&&(T+=l);var D=void 0,x=void 0,R=void 0;s||(this.props.status!==U.STATUS_ERROR&&this.props.dataStatus!==U.STATUS_ERROR?(D=this.renderDocuments(),x=this.renderData()):R=this.renderError());var j=T+" élément"+(T>1?"s":"");return i.default.createElement(C.default,{title:f,subtitle:j,actions:v,onBackPress:this.props.match.params.path&&function(){return e.props.history.goBack()},options:[h]},i.default.createElement(g.default,{display:s}),c&&"Dossier vide",D,x,R,i.default.createElement(m.default,{closeOnEsc:!0,isOpened:this.state.importerOpen,onClose:function(){return e.setState({importerOpen:!1})}},i.default.createElement(k.default,null,i.default.createElement(L.default,null))),i.default.createElement(m.default,{closeOnEsc:!0,isOpened:this.state.moveModalOpen,onClose:function(){return e.setState({moveModalOpen:!1})}},i.default.createElement(k.default,null,i.default.createElement(M.default,{onMove:function(t){return e.move(t)}}))))}}]),t}(s.Component);t.default=Q},"./src/components/elements/Footer.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.getMeta=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n("./node_modules/react/react.js"),c=a(i),d=n("./src/styles/Footer.sass"),f=a(d),m=n("./src/constants/index.js"),p=function(e){function t(e,n){u(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={actors:null},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;E(m.DOCTYPE_META).then(function(t){e.setState({actor:t.map(function(e){return e.actor}).shift()})})}},{key:"render",value:function(){return c.default.createElement("footer",{className:f.default.main},c.default.createElement("div",{className:f.default.content},c.default.createElement("span",null,"HOMEBOOK est un service proposé par "),c.default.createElement("img",{src:"/images/logo.edf.png",alt:"logo_edf"}),this.state.actor&&c.default.createElement("span",null," pour "),this.state.actor&&c.default.createElement("img",{src:"/images/logo."+this.state.actor+".png",alt:"logo "+this.state.actor}),c.default.createElement("br",null),c.default.createElement("span",null,"V","2.1.144")))}}]),t}(i.PureComponent);t.default=p;var E=t.getMeta=function(){var e=r(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cozy.client.data.defineIndex(m.DOCTYPE_META,["name"]);case 3:return t=e.sent,n=cozy.client.data.query(t,{selector:{name:"actors"}}),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}},e,void 0,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},"./src/components/elements/Gauge.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("./node_modules/react/react.js"),i=a(s),c=n("./src/styles/Gauge.sass"),d=a(c),f=n("./node_modules/react-portal/build/portal.js"),m=a(f),p=n("./src/components/modals/Modal.jsx"),E=a(p),h=n("./src/containers/Importer.js"),v=a(h),_=n("./src/scripts/fileTypes.js"),y=n("./src/constants/index.js"),b=function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.fileTypes=(0,_.getFileTypes)(),a.state={open:!1},a}return l(t,e),o(t,[{key:"componentWillMount",value:function(){}},{key:"click",value:function(e,t){this.props.onFileClick(t,e),this.setState({open:!0})}},{key:"render",value:function(){var e=this,t=0;if(this.props.usedType){t=this.props.usedType.map(function(e){return e.type}).length/this.fileTypes.length*100}return i.default.createElement("div",{className:d.default.main},i.default.createElement("div",{className:d.default.title},i.default.createElement("span",null,"Remplissez votre HOMEBOOK :"),this.props.status===y.STATUS_LOAD&&i.default.createElement("span",{className:d.default.loader},i.default.createElement("img",{src:"/images/progress.gif",alt:"loader"}))),i.default.createElement("div",{className:d.default.gauge,title:"Jauge : "+t.toFixed(1)+"%"},i.default.createElement("div",{className:d.default.bar,style:{width:t+"%"}})),i.default.createElement("ul",{className:d.default.list},this.props.list.map(function(t,n){return i.default.createElement("li",{key:n,onClick:function(n){return e.click(t.key,t.location)}},i.default.createElement("i",{className:"ion-ios-plus-empty"}),t.name)})),i.default.createElement(m.default,{isOpened:this.state.open,closeOnEsc:!0,onClose:function(){return e.setState({open:!1})}},i.default.createElement(E.default,null,i.default.createElement(v.default,null))))}}]),t}(s.Component);t.default=b},"./src/components/elements/Help.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Help=void 0;var u=n("./node_modules/react/react.js"),l=a(u),o=n("./node_modules/classnames/index.js"),s=(a(o),n("./node_modules/react-bootstrap/lib/Accordion.js")),i=a(s),c=n("./node_modules/react-bootstrap/lib/Panel.js"),d=a(c),f=n("./src/styles/help.sass"),m=a(f),p=n("./src/components/elements/Page.jsx"),E=a(p),h=t.Help=function(e){return l.default.createElement(E.default,{title:"Aide"},l.default.createElement("h3",null,"Besoin d’aide ?"),l.default.createElement("p",null,"Si vous avez besoin d’aide, envoyer un message à ",l.default.createElement("a",{href:"mailto:retd-sav-homebook@edf.fr"},"retd-sav-homebook@edf.fr"),"."),l.default.createElement("br",null),l.default.createElement("h3",null,"Questions fréquemment posées"),l.default.createElement(i.default,null,l.default.createElement(d.default,r({header:"MON LOGIS",eventKey:"2",className:m.default.tab},"className",m.default.tab),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("h3",null,"Comment ajouter des documents ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Pour ajouter des documents dans votre homebook, cliquer sur le dossier dans le homebook dans lequel vous souhaitez rajouter un document et utiliser le bouton en haut à droite « importer un document » puis sélectionner le document sur votre ordinateur.",l.default.createElement("br",null),l.default.createElement("br",null),"Par défaut le document est ajouté au niveau du dossier dans lequel vous étiez à la suite des autres documents et/ou dossiers.")),l.default.createElement("li",null,l.default.createElement("h3",null,"Visualiser un document :"),l.default.createElement("br",null),l.default.createElement("p",null,"Sélectionner le document à visualiser en cochant la case à gauche puis cliquez sur « Télécharger ». Une nouvelle fenêtre s’ouvre dans laquelle vous pouvez visualiser le document, l’imprimer ou le télécharger sur votre ordinateur.")),l.default.createElement("li",null,l.default.createElement("h3",null,"Je ne trouve pas le document que j’ai ajouté ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Par défaut le document est ajouté au niveau du dossier dans lequel vous étiez à la suite des autres documents et/ou dossiers. Il est peut être à la fin."),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("h3",null,"Je ne trouve toujours pas votre document ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Vérifiez que vous avez bien ajouté votre document depuis l’application Homebook. Si ce n’est pas le cas, rendez-vous dans l’application « Cozy Drive » où vous retrouverez l’intégralité de tous vos documents en navigant dans les différents dossiers.")))),l.default.createElement("li",null,l.default.createElement("h3",null,"Ajouter un document : quelle différence entre « Homebook » et « Cozy Drive » ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Homebook : est l’endroit dédié à privilégier pour les documents et données liés à votre logement afin de bénéficier de fonctionnalités supplémentaires.",l.default.createElement("br",null),l.default.createElement("br",null),"Cozy Drive :  c’est le navigateur de fichiers uniquement (pas les données) qui vous permet de gérer l’ensemble de vos fichiers qu’ils soient dans votre homebook ou non mais qui ne présente pas de fonctionnalités avancées pour vous aider à gérer votre logement.")),l.default.createElement("li",null,l.default.createElement("h3",null,"Comment sont classés les documents ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Dans Homebook, vous disposez de 4 répertoires prédéfinis (Diagnostics, documents de propriété, équipements, travaux et entretiens) selon les documents importants à garder pour votre logement. Vous pouvez ajouter vos propres répertoires.",l.default.createElement("br",null),l.default.createElement("br",null),"Par défauts les documents sont classés par ordre alphabétique.")),l.default.createElement("li",null,l.default.createElement("h3",null,"A quoi correspond « dernière modification » ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Cette information correspond à la dernière modification du dossier ou du fichier correspondant.")),l.default.createElement("li",null,l.default.createElement("h3",null,"Comment créer un dossier ?"),l.default.createElement("br",null),l.default.createElement("div",{className:"pull-left"},l.default.createElement("img",{src:"images/add_folder.png"})),l.default.createElement("div",{className:"pull-left"},"Cliquez sur le bouton « … » en haut à droite puis sur « Nouveau dossier »."),l.default.createElement("div",{className:"clearfix"})),l.default.createElement("li",null,l.default.createElement("h3",null,"Comment télécharger mes documents ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Sélectionner le document à visualiser en cochant la case à gauche puis cliquez sur « Télécharger ». Une nouvelle fenêtre s’ouvre dans laquelle vous pouvez visualiser le document, l’imprimer ou le télécharger sur votre ordinateur.")),l.default.createElement("li",null,l.default.createElement("h3",null,"Quels documents ajouter ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Pensez à collecter tous les documents qui ont un lien avec le logement.",l.default.createElement("br",null),l.default.createElement("br",null),"On peut esquisser 5 catégories :"),l.default.createElement("ul",null,l.default.createElement("li",null,"Documents contractuels de propriétés : il s’agit ici des plans, des documents notariaux, etc.."),l.default.createElement("li",null,"Documents concernant les équipements : il s’agit ici des caractéristiques et documents concernant par exemple, la climatisation, vos équipements de cuisine, etc…"),l.default.createElement("li",null,"Documents concernant les travaux et entretiens : il s’agit ici des devis, factures, caractéristiques, des travaux effectués dans votre logement (fenêtre, douche,…)"),l.default.createElement("li",null,"Documents concernant les diagnostics : il s’agit ici des documents type diagnostique thermique, analyse fuite d’eau, etc…"),l.default.createElement("li",null,"Document privés, autres : il s’agit ici par exemple de vos contrats et factures, d’eau, de téléphone, d’électricité, en lien avec votre logement")))),l.default.createElement(i.default,{defaultActiveKey:"1"},l.default.createElement(d.default,r({header:"LOGEMENT",eventKey:"1",className:m.default.tab},"className",m.default.tab),l.default.createElement("table",{className:"table"},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"Type de document"),l.default.createElement("th",null,"Durée de conservation"),l.default.createElement("th",null,"Précisions"))),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"Factures d'électricité et de gaz"),l.default.createElement("td",null,"5 ans"),l.default.createElement("td",null,"Délai pour contester une facture.",l.default.createElement("br",null),l.default.createElement("br",null),"Votre fournisseur a 2 ans pour réclamer un paiement.")),l.default.createElement("tr",null,l.default.createElement("td",null,"Factures d'eau"),l.default.createElement("td",null,"5 ans"),l.default.createElement("td",null,"Délai pour contester une facture.",l.default.createElement("br",null),l.default.createElement("br",null),"Pour réclamer un paiement, votre fournisseur a :",l.default.createElement("ul",null,l.default.createElement("li",null,"4 ans (fournisseur public),"),l.default.createElement("li",null,"2 ans (fournisseur privé).")))),l.default.createElement("tr",null,l.default.createElement("td",null,"Factures de téléphonie (fixe et mobile) et internet"),l.default.createElement("td",null,"1 an"),l.default.createElement("td",null)),l.default.createElement("tr",null,l.default.createElement("td",null,"Preuve de restitution de matériel (box)"),l.default.createElement("td",null,"2 ans (à compter de la restitution)"),l.default.createElement("td",null)),l.default.createElement("tr",null,l.default.createElement("td",null,"Factures liées aux travaux"),l.default.createElement("td",null,"10 ans ou 2 ans selon la nature des travaux"),l.default.createElement("td",null,l.default.createElement("ul",null,l.default.createElement("li",null,"Gros-œuvre : 10 ans"),l.default.createElement("li",null,"Petits travaux (fenêtres par exemple) : 2 ans")))),l.default.createElement("tr",null,l.default.createElement("td",null,"Certificats de ramonage"),l.default.createElement("td",null,"1 an"),l.default.createElement("td",null)),l.default.createElement("tr",null,l.default.createElement("td",null,"Attestations d'entretien annuel des ",l.default.createElement("a",{href:"https://www.service-public.fr/particuliers/vosdroits/F20760",target:"_blank"},"chaudières"),"  "),l.default.createElement("td",null,"2 ans"),l.default.createElement("td",null)),l.default.createElement("tr",null,l.default.createElement("td",null,"Titre de propriété"),l.default.createElement("td",null,"Permanente"),l.default.createElement("td",null)),l.default.createElement("tr",null,l.default.createElement("td",null,"Preuve du paiement des charges de copropriété, correspondances avec le ",l.default.createElement("a",{href:"https://www.service-public.fr/particuliers/glossaire/R12430",target:"_blank"},"syndic"),", procès verbaux des assemblées générales de copropriété..."),l.default.createElement("td",null,"10 ans"),l.default.createElement("td",null)),l.default.createElement("tr",null,l.default.createElement("td",null,"Contrat de location, état des lieux, quittances de loyer"),l.default.createElement("td",null,"Durée de la location + 3 ans"),l.default.createElement("td",null,"Ces délais s'appliquent aux logements loués comme résidence principale (vides ou meublés).")),l.default.createElement("tr",null,l.default.createElement("td",null,"Courrier de ",l.default.createElement("a",{href:"https://www.service-public.fr/particuliers/vosdroits/F1311",target:"_blank"},"révision de loyer")),l.default.createElement("td",null,"Durée de la location + 1 an"),l.default.createElement("td",null,"Ce délai s'applique aux logements loués à titre de résidence principale (vides ou meublés).")),l.default.createElement("tr",null,l.default.createElement("td",null,"Inventaire du mobilier pour les locations meublées"),l.default.createElement("td",null,"Durée de la location"),l.default.createElement("td",null,"Jusqu'à la restitution de l'éventuel dépôt de garantie")),l.default.createElement("tr",null,l.default.createElement("td",null,"Échéance APL"),l.default.createElement("td",null,"2 ans"),l.default.createElement("td",null))))),l.default.createElement(d.default,{header:"POUR LA VENTE OU LOCATION D’UN LOGEMENT",eventKey:"2",className:m.default.tab},l.default.createElement("p",null,"Diagnostiques obligatoires en cas de vente ou location.",l.default.createElement("br",null),l.default.createElement("br",null),"Les diagnostics immobiliers visent à informer l'acquéreur ou le locataire sur certains aspects du logement qu'il projette d'acheter ou de louer."),l.default.createElement("table",{className:"table"},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"Type de document"),l.default.createElement("th",null,"Durée de conservation"),l.default.createElement("th",null,"Précisions"))),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,l.default.createElement("b",null,"DPE"),l.default.createElement("br",null),"Diagnostic de perfomance Énergétique"),l.default.createElement("td",null,"Le DPE est valable 10 ans."),l.default.createElement("td",null,"Tout immeuble bâti à l'exception de ceux destinés à un bail rural ou à une location saisonnière.")),l.default.createElement("tr",null,l.default.createElement("td",null,l.default.createElement("b",null,"Superficie habitable"),l.default.createElement("br",null),"Loi Boutin"),l.default.createElement("td",null,"Aucune limite de validité sans modification de la surface"),l.default.createElement("td",null,"Tous les logements")),l.default.createElement("tr",null,l.default.createElement("td",null,l.default.createElement("b",null,"ERNMT"),l.default.createElement("br",null),"État des Risques Naturels, Miniers et Technologiques"),l.default.createElement("td",null,"6 mois"),l.default.createElement("td",null,"Tout bailleur a le devoir d'avertir les locataires de tout logement de l'existence des risques auxquels ce dernier est exposé")),l.default.createElement("tr",null,l.default.createElement("td",null,l.default.createElement("b",null,"PLOMB (CREP)"),l.default.createElement("br",null),"Constat de Risque d'Exposition au Plomb"),l.default.createElement("td",null,"Aucune limite de validité si absence de plomb 6 ans sinon"),l.default.createElement("td",null,"Bien immoblier à usage d'habitation et construit avant le 01/01/1949")),l.default.createElement("tr",null,l.default.createElement("td",null,l.default.createElement("b",null,"AMIANTE (DAPP)"),l.default.createElement("br",null),"Dossier Amiante Parties Privatives"),l.default.createElement("td",null,"Aucune limite de validité si négatif. Préconisations à suivre dans le cas contraire."),l.default.createElement("td",null,"Logement à usage d'habitation et construit avant le 01/07/1997")),l.default.createElement("tr",null,l.default.createElement("td",null,l.default.createElement("b",null,"Diagnostic Electricité:"),l.default.createElement("br",null),"état de l'installation intérieure d'électricité"),l.default.createElement("td",null,"3 ans"),l.default.createElement("td",null,"Les logements concernés sont ceux :",l.default.createElement("ul",null,l.default.createElement("li",null,"dont l'installation du gaz a plus de 15 ans,"),l.default.createElement("li",null,"ou dont le dernier certificat de conformité date de plus de 15 ans.")))),l.default.createElement("tr",null,l.default.createElement("td",null,"état de l'installation d'assainissement non collectif"),l.default.createElement("td",null,"Le diagnostic doit dater de moins de 3 ans au moment de la signature de la promesse de vente ou de l'acte de vente."),l.default.createElement("td",null,"L'obligation de faire réaliser un état de l'installation concerne les maisons et immeubles non raccordés :",l.default.createElement("br",null),l.default.createElement("ul",null,l.default.createElement("li",null,"soit parce qu'il n'existe pas encore de réseau de collecte des eaux usées,"),l.default.createElement("li",null,"soit parce que le réseau ne peut pas se faire pour des raisons techniques."))))))),l.default.createElement(d.default,{header:"IMPOTS ET TAXES",eventKey:"3",className:m.default.tab},l.default.createElement("table",{className:"table"},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"Type de document"),l.default.createElement("th",null,"Durée de conservation"),l.default.createElement("th",null,"Précisions"))),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"Déclarations de revenus et avis d'imposition sur le revenu"),l.default.createElement("td",null,"3 ans (droit de reprise de l'administration)"),l.default.createElement("td",null,"À partir de l'année qui suit l'année d'imposition",l.default.createElement("br",null),l.default.createElement("br",null),"(exemple : déclaration 2013 à conserver jusqu'à la fin 2016)")),l.default.createElement("tr",null,l.default.createElement("td",null,"Avis d'impôts locaux (taxe foncière, taxe d'habitation)"),l.default.createElement("td",null,"1 an (droit de reprise de l'administration)"),l.default.createElement("td",null,"3 ans en cas de dégrèvement, exonération ou abattement"))))),l.default.createElement(d.default,{header:"ASSURANCE",eventKey:"4",className:m.default.tab},l.default.createElement("table",{className:"table"},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"Type de document"),l.default.createElement("th",null,"Durée de conservation"),l.default.createElement("th",null,"Précisions"))),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"Quittances, avis d'échéance, courriers de résiliation, preuves du règlement"),l.default.createElement("td",null,"Date du document + 2 ans"),l.default.createElement("td",null)),l.default.createElement("tr",null,l.default.createElement("td",null,"Contrat"),l.default.createElement("td",null,"Durée du contrat + 2 ans"),l.default.createElement("td",null)),l.default.createElement("tr",null,l.default.createElement("td",null,"Relevé d'information automobile"),l.default.createElement("td",null,"Permanente"),l.default.createElement("td",null)),l.default.createElement("tr",null,l.default.createElement("td",null,l.default.createElement("a",{href:"https://www.service-public.fr/particuliers/vosdroits/F15337",target:"_blank"},"Assurance-vie")),l.default.createElement("td",null,"10 ans"),l.default.createElement("td",null,"Ce délai s'applique dès que vous avez connaissance du contrat en tant que bénéficiaire de l'assurance-vie.")),l.default.createElement("tr",null,l.default.createElement("td",null,"Dommages corporels"),l.default.createElement("td",null,"10 ans"),l.default.createElement("td",null))))),l.default.createElement(d.default,{header:"BANQUE",eventKey:"5",className:m.default.tab},l.default.createElement("table",{className:"table"},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"Type de document"),l.default.createElement("th",null,"Durée de conservation"),l.default.createElement("th",null,"Précisions"))),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"Chèques à encaisser"),l.default.createElement("td",null,"1 an et 8 jours"),l.default.createElement("td",null,"Passé ce délai, le chèque ne peut plus être encaissé mais la dette reste due.")),l.default.createElement("tr",null,l.default.createElement("td",null,"Contrat de prêt (immobilier et consommation) et autres justificatifs"),l.default.createElement("td",null,"2 ans"),l.default.createElement("td",null,"À partir de la dernière échéance")),l.default.createElement("tr",null,l.default.createElement("td",null,"Relevés de compte, talons de chèque"),l.default.createElement("td",null,"5 ans"),l.default.createElement("td",null,"Un débit frauduleux peut être contesté dans un délai maximum de 18 mois.")),l.default.createElement("tr",null,l.default.createElement("td",null,"Convention de compte bancaire"),l.default.createElement("td",null,"Durée d'ouverture du compte"),l.default.createElement("td",null))))),l.default.createElement(d.default,{header:"VEHICULE",eventKey:"6",className:m.default.tab},l.default.createElement("table",{className:"table"},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"Type de document"),l.default.createElement("th",null,"Durée de conservation"),l.default.createElement("th",null,"Précisions"))),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"PV pour ",l.default.createElement("a",{href:"https://www.service-public.fr/particuliers/vosdroits/F18509",target:"_blank"},"amende forfaitaire")),l.default.createElement("td",null,"3 ans"),l.default.createElement("td",null,"Si le Trésor public n'a rien fait pour obtenir le paiement de l'amende 3 ans après sa notification, vous ne devez plus rien.")),l.default.createElement("tr",null,l.default.createElement("td",null,"Factures (achat, réparation...)"),l.default.createElement("td",null,"Durée de conservation du véhicule"),l.default.createElement("td",null,"+ 2 ans en cas de revente (",l.default.createElement("a",{href:"https://www.service-public.fr/particuliers/vosdroits/F11007",target:"_blank"},"vice caché"),")")),l.default.createElement("tr",null,l.default.createElement("td",null,"Certificat d'examen du permis de conduire"),l.default.createElement("td",null,"4 mois"),l.default.createElement("td",null,"+ jusqu'à réception du permis")),l.default.createElement("tr",null,l.default.createElement("td",null,"Certificat de cession du véhicule"),l.default.createElement("td",null,"Durée de conservation du véhicule"),l.default.createElement("td",null,"Il peut être utile de conserver ce certificat après la vente du véhicule, en cas de litige avec l'ancien propriétaire.")))))),l.default.createElement("div",null,l.default.createElement("p",null,"Source : ",l.default.createElement("a",{href:"https://www.service-public.fr/particuliers/vosdroits/F19134",target:"_blank"},"https://www.service-public.fr/particuliers/vosdroits/F19134")),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("h3",null,"Mes documents ne sont pas sous format numérique, comment faire ?"),l.default.createElement("br",null),"Vous avez la possibilité :",l.default.createElement("ul",null,l.default.createElement("li",null,"prendre une photo avec un téléphone mobile ou une tablette, en s’attachant à obtenir un document net."),l.default.createElement("li",null,"scanner le document au format .pdf")),l.default.createElement("p",null,"La meilleure solution reste de scanner vos documents en .pdf, ce qui permettra éventuellement d’en extraire des informations automatiquement.",l.default.createElement("br",null),l.default.createElement("br",null),"N’oubliez pas rajouter ensuite vos documents ou images dans votre homebook."))))),l.default.createElement(d.default,{header:"DONNEES",eventKey:"3",className:m.default.tab},l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("h3",null,"Quelle est la différence entre documents et données ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Les documents sont des fichiers qui sont présents dans votre homebook. Ils peuvent avoir différents formats (.pdf, .Jpg, .doc, …).",l.default.createElement("br",null),l.default.createElement("br",null),"Les données correspondent à des informations sur votre logements, extraites ou non des documents présents dans votre homebook. Les données brutes sont des données dans leur forme la plus simple, à savoir par exemple un nombre (comme la superficie du pièce), un ou plusieurs mots (comme un propriétaire), exempt de tout traitement final (mise en document PDF, image etc)..")),l.default.createElement("li",null,l.default.createElement("h3",null,"Comment saisir / modifier des données ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Dans l’onglet « Données », vous disposer de 4 répertoires prédéfinis (Diagnostics, documents de propriété, équipements, travaux et entretiens). Cliquez sur le répertoire correspondant puis sur le fichier que vous souhaitez afficher et/ou modifier.",l.default.createElement("br",null),l.default.createElement("br",null),"Dans la page de données, cliquez sur « Modifier » en haut à droite pour modifier les données en les tapants dans les champs correspondants.",l.default.createElement("br",null),l.default.createElement("br",null),"Une fois fini, cliquez sur « sauvegarder ».")),l.default.createElement("li",null,l.default.createElement("h3",null,"Comment ajouter un nouveau jeu de données ?"),l.default.createElement("br",null),l.default.createElement("div",{className:"pull-left"},"Dans le dossier correspondant (par exemple ici « Diagnostics »), cliquez sur le bouton en haut à droite « Ajouter un diagnostic »."),l.default.createElement("div",{className:"pull-left"},l.default.createElement("img",{src:"images/add_diagnostic.png"})),l.default.createElement("div",{className:"clearfix"})),l.default.createElement("li",null,l.default.createElement("h3",null,"A quoi servent les données ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Les données sont utilisées dans pour effectuer des recherche via la barre de recherche mais aussi pour vous proposer des services personnalisés spécifiques : exemples : notifications, rappels adaptés à l’entretien de votre logement, conseils…")),l.default.createElement("li",null,l.default.createElement("h3",null,"Qui utilisent mes données ?"),l.default.createElement("br",null),l.default.createElement("p",null,"A aucun moment vos données ne sortent de votre espace personnel. Vos données ne peuvent être utilisées par une autre application de l’espace Cozy que sous votre autorisation.",l.default.createElement("br",null),l.default.createElement("br",null),"Pour plus d’information, vous pouvez vous référer à la convention d’expérimentation que vous avez signée.")))),l.default.createElement(d.default,{header:"EQUIPEMENTS",eventKey:"5",className:m.default.tab},l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("h3",null,"Quels équipements ajouter ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Pensez à ajouter les équipements clés de votre logement. Il n’y a pas de limite dans le nombre d’équipements que vous pouvez rajouter.",l.default.createElement("br",null),l.default.createElement("br",null),"Nous vous conseillons d’ajouter vos équipements :"),l.default.createElement("ul",null,l.default.createElement("li",null,"Ventilation (ventilation naturelle, VMC, VMC gaz)"),l.default.createElement("li",null,"Eau chaude sanitaire (ballon d’accumulation électrique, eau chaude sanitaire thermodynamique, gaz, solaire)"),l.default.createElement("li",null,"Chauffage (électricité, gaz, autre combustible)"),l.default.createElement("li",null,"Autre installations liées à l’énergie (installation photovoltaïque, batterie)"),l.default.createElement("li",null,"Gros électroménager : machine à laver, four, frigo, lave-linge, sèche-linge, lave-vaisselle…"),l.default.createElement("li",null,"Petit électroménager : télévision, chaîne hi-fi, aspirateur,…"))),l.default.createElement("li",null,l.default.createElement("h3",null,"Pourquoi rajouter un équipement ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Pour capitaliser les informations en cas de panne, dysfonctionnement, travaux. Faciliter la récupération des notices et le suivi des garanties.")),l.default.createElement("li",null,l.default.createElement("h3",null,"Comment ajouter un équipement ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Dans l’onglet « Données », cliquez sur « Equipements » puis en haut à droite « Ajouter un équipement ».")),l.default.createElement("li",null,l.default.createElement("h3",null,"Quels documents ajouter avec mes équipements ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Pensez à ajouter les devis/factures, documents liés à l’entretien.")))),l.default.createElement(d.default,{header:"APPLICATIONS",eventKey:"6",className:m.default.tab},l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("h3",null,"A quoi correspond le bouton « Applications » ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Votre Homebook est intégré dans un environnement sécurisé de stockage Cozy Cloud. Cozy Cloud permet d’ajouter d’autres applications pour vous faciliter la vie.",l.default.createElement("br",null),l.default.createElement("br",null),"Parmi elles vous trouverez :"),l.default.createElement("ul",null,l.default.createElement("li",null,"Cozy Collect : cette application vous aidera à lier votre compte facilement à d’autres services pour récupérer automatiquement les documents, comme par exemple vos factures d’énergie, vos documents d’assurance, santé, banque…"),l.default.createElement("li",null,"Cozy Drive : vous permet de gérer tous vos documents (qu’ils soient dans homebook ou non)"),l.default.createElement("li",null,"EDF : si vous êtes client EDF, cette application vous permet de retrouver directement toutes les informations liées à votre consommation énergétique et factures."),l.default.createElement("li",null,"Homebook : pour vous aider à mieux gérer votre logement"),l.default.createElement("li",null,"Photos : pour ajouter facilement des photos"))),l.default.createElement("li",null,l.default.createElement("h3",null,"Pourquoi rajouter un équipement ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Pour capitaliser les informations en cas de panne, dysfonctionnement, travaux. Faciliter la récupération des notices et le suivi des garanties.")),l.default.createElement("li",null,l.default.createElement("h3",null,"Comment ajouter un équipement ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Dans l’onglet « Données », cliquez sur « Equipements » puis en haut à droite « Ajouter un équipement ».")),l.default.createElement("li",null,l.default.createElement("h3",null,"Quels documents ajouter avec mes équipements ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Pensez à ajouter les devis/factures, documents liés à l’entretien.")))),l.default.createElement(d.default,{header:"RAPPELS",eventKey:"8",className:m.default.tab},l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("h3",null,"A quoi servent les rappels ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Vous avez la possibilité de vous créer des rappels pour ne pas oublier certaines échéances importantes comme l’entretien annuel de votre chaudière (si vous êtes concerné). Une fois programmé, votre homebook vous enverra automatique une notification à la date prévue.")),l.default.createElement("li",null,l.default.createElement("h3",null,"Comment programmer un rappel ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Aller dans l’onglet « Rappels » puis en haut à droite, cliquer sur le bouton « Ajouter un rappel » et se laisser guider par l’interface.")),l.default.createElement("li",null,l.default.createElement("h3",null,"Est-ce que je peux synchroniser mon calendrier perso avec mes rappels homebook ?"),l.default.createElement("p",null,"Non, malheureusement il n’est pas encore possible de le faire, mais nous y travaillons pour vous simplifier d’avantage la vie.")))),l.default.createElement(d.default,{header:"CONTACTS",eventKey:"9",className:m.default.tab},l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("h3",null,"A quoi servent les contacts ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Les contacts vous permettent de garder en mémoire les contacts importants liés à votre logement pour les avoir sous la main à tout moment.")),l.default.createElement("li",null,l.default.createElement("h3",null,"Comment ajouter un contact ?"),l.default.createElement("br",null),l.default.createElement("p",null,"Aller dans l’onglet « Contact », puis cliquer sur le bouton « Ajouter un contact » en haut à droite.")),l.default.createElement("li",null,l.default.createElement("h3",null,"Comment modifier un contact ?"),l.default.createElement("p",null,"Cliquez sur un contact, puis sur « modifier ». Une fois fini cliquer sur « Enregistrer ».")),l.default.createElement("li",null,l.default.createElement("h3",null,"Est-ce que je peux synchroniser mon annuaire perso avec mes contacts homebook ?"),l.default.createElement("p",null,"Non, malheureusement il n’est pas encore possible de le faire, mais nous y travaillons pour vous simplifier d’avantage la vie."))))))};t.default=h},"./src/components/elements/Loader.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var r=n("./node_modules/react/react.js"),u=a(r),l=n("./src/styles/Loader.sass"),o=a(l),s=t.Loader=function(e){var t=e.display;return void 0===t&&(t=!0),t?u.default.createElement("div",{className:o.default.loader},u.default.createElement("img",{src:"/images/progress.gif",alt:""})):null};t.default=s},"./src/components/elements/Main.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0;var r=n("./node_modules/react/react.js"),u=a(r),l=n("./src/styles/Main.sass"),o=a(l),s=t.Main=function(e){var t=e.children;return u.default.createElement("main",{className:o.default.main},t)};t.default=s},"./src/components/elements/Navigation.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CustomLink=t.Navigation=void 0;var r=n("./node_modules/react/react.js"),u=a(r),l=n("./src/styles/Navigation.sass"),o=a(l),s=n("./node_modules/react-router-dom/es/index.js"),i=n("./node_modules/classnames/index.js"),c=(a(i),n("./src/containers/Gauge.js")),d=(a(c),t.Navigation=function(e){return u.default.createElement("nav",{className:o.default.main},u.default.createElement("div",{className:o.default.nav},u.default.createElement("ul",{className:o.default.list},u.default.createElement("li",{className:o.default.button},u.default.createElement(m,{to:"/Documents",onClick:function(){return console.log("Open documents")},activeClassName:o.default.active},u.default.createElement("i",{className:"ion-ios-home"}),"Mon logement")),u.default.createElement("li",{className:o.default.button},u.default.createElement(m,{to:"/contacts",onClick:function(){return console.log("Open contacts")},activeClassName:o.default.active},u.default.createElement("i",{className:"ion-ios-bookmarks-outline"}),"Contacts")),u.default.createElement("li",{className:o.default.button},u.default.createElement(m,{to:"/rappels",onClick:function(){return console.log("Open rappels")},activeClassName:o.default.active},u.default.createElement("i",{className:"ion-ios-checkmark-outline"}),"Rappels")),u.default.createElement("li",{className:o.default.button},u.default.createElement(m,{to:"/corbeille",onClick:function(){return console.log("Open corbeille")},activeClassName:o.default.active},u.default.createElement("i",{className:"ion-ios-trash-outline"}),"Corbeille")))),u.default.createElement("div",{className:o.default.other},u.default.createElement("ul",{className:o.default.list},u.default.createElement("li",{className:o.default.button},u.default.createElement(m,{to:"/actualites",onClick:function(){return console.log("Open actualites")},activeClassName:o.default.active},"Actualités")),u.default.createElement("li",{className:o.default.button},u.default.createElement(m,{to:"/preferences",onClick:function(){return console.log("Open preferences")},activeClassName:o.default.active},"Préférences")),u.default.createElement("li",{className:o.default.button},u.default.createElement(m,{to:"/aide",onClick:function(){return console.log("Open help")},activeClassName:o.default.active},"Aide")),u.default.createElement("li",{className:o.default.button},u.default.createElement(m,{to:"/a-propos",onClick:function(){return console.log("Open about")},activeClassName:o.default.active},"À propos")))))}),f=t.CustomLink=function(e){var t=function(t){t.preventDefault(),e.onClick(),e.history.push(e.to)},n=(e.router,e.location),a=e.to,r=e.activeClassName,l=e.children,o=0===n.pathname.indexOf(a);return u.default.createElement("a",{className:o&&r,onClick:function(e){return t(e)}},l)},m=(0,s.withRouter)(f);t.default=d},"./src/components/elements/News.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n("./node_modules/react/react.js"),c=a(i),d=n("./node_modules/classnames/index.js"),f=a(d),m=n("./node_modules/moment/moment.js"),p=a(m),E=n("./node_modules/react-bootstrap/lib/Accordion.js"),h=(a(E),n("./node_modules/react-bootstrap/lib/Panel.js")),v=a(h),_=n("./src/styles/buttons.scss"),y=a(_),b=n("./src/styles/help.sass"),C=a(b),S=n("./src/components/elements/Page.jsx"),g=a(S),A=n("./src/components/elements/Loader.jsx"),O=a(A),T=n("./src/constants/index.js"),D=function(e){function t(e,n){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.reload()}},{key:"componentWillReceiveProps",value:function(e){}},{key:"reload",value:function(){this.props.onLoadNews()}},{key:"createHeader",value:function(e){return c.default.createElement("span",{className:C.default.header},c.default.createElement("h3",{className:C.default.title},e.title||"Notification"),c.default.createElement("span",null,c.default.createElement("span",null,e.category&&e.category.name),c.default.createElement("span",null," • "),c.default.createElement("span",null,(0,p.default)(e.createdAt).format("LL"))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.news,a=t.count,u=t.status,l=u===T.STATUS_LOAD,o=c.default.createElement("button",{onClick:function(){return e.reload()},className:(0,f.default)(y.default.button,y.default.default)},c.default.createElement("i",{className:"ion-ios-refresh-outline"}),"ACTUALISER"),s=[o];return c.default.createElement(g.default,{title:"Actualités",subtitle:null!==a&&(a>0?a>1?a+" actualités":"1 actualité":"Aucune actualité"),actions:s},c.default.createElement(O.default,{display:l}),c.default.createElement("div",null,!l&&n.length>0&&n.map(function(t,n){var a;return c.default.createElement(v.default,(a={header:e.createHeader(t),defaultExpanded:!0,collapsible:!0,eventKey:n,className:C.default.tab},r(a,"className",C.default.tab),r(a,"key",n),a),c.default.createElement("p",{dangerouslySetInnerHTML:x(t.content)}))})))}}]),t}(i.Component);t.default=D;var x=function(e){return{__html:e}}},"./src/components/elements/Onboarding.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n("./node_modules/react/react.js"),c=a(i),d=n("./node_modules/classnames/index.js"),f=a(d),m=n("./node_modules/prop-types/index.js"),p=(a(m),n("./src/styles/Onboarding.sass")),E=a(p),h=n("./src/components/elements/Loader.jsx"),v=a(h),_=(n("./src/constants/index.js"),n("./src/scripts/onboarding.js")),y=n("./src/scripts/initial.js"),b=a(y),C=function(e){function t(e,n){u(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.onboardingStep=[{title:"HOMEBOOK",content:"Bienvenue dans votre carnet numérique du logement"},{title:"Documents",content:"Disposez où que vous soyez de tous vos documents"},{title:"Données",content:"Votre logement et ses équipements, dans les moindres détails !"},{title:"Rappels",content:"Planifiez vos tâches et entretiens périodiques"},{title:"Contacts",content:"Accédez aux coordonnées de professionnels pour votre logement"}],a.state={activeText:a.onboardingStep[0].content,activeTitle:a.onboardingStep[0].title,currentIndex:0,loading:!0},a}return o(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;(0,_.isAlreadyShown)().then(function(t){return t?e.closeOnboarding():(0,_.markAsShown)(!0).then(function(){e.goToStep(0)})})}},{key:"goToStep",value:function(e){if(e>4)return this.closeOnboarding();this.setState({activeText:this.onboardingStep[e].content,activeTitle:this.onboardingStep[e].title,currentIndex:e,loading:!1})}},{key:"closeOnboarding",value:function(){console.log("Onboarding Close"),(0,b.default)(),this.props.history.push("/Documents")}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:E.default.container},c.default.createElement(v.default,{display:this.state.loading}),!this.state.loading&&c.default.createElement("div",{className:E.default.background},c.default.createElement("div",{className:E.default.panel},c.default.createElement("i",{className:(0,f.default)("ion-close",E.default.close),onClick:function(){return e.closeOnboarding()}}),c.default.createElement("img",{src:"/images/logo.png",alt:"Logo",className:E.default.logo}),c.default.createElement("div",{className:E.default.sliderTitle},this.state.activeTitle),c.default.createElement("div",{className:E.default.sliderText},this.state.activeText),c.default.createElement("button",{className:E.default.button,onClick:function(){return e.goToStep(e.state.currentIndex+1)}},"Continuer"),c.default.createElement("ol",null,this.onboardingStep.map(function(t,n){return c.default.createElement("li",{key:n,className:(0,f.default)(E.default.dot,r({},E.default.active,n===e.state.currentIndex)),onClick:function(){return e.goToStep(n)}})})))))}}]),t}(i.Component);t.default=C},"./src/components/elements/Page.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Page=void 0;var u=n("./node_modules/react/react.js"),l=a(u),o=n("./src/styles/Page.sass"),s=a(o),i=n("./node_modules/classnames/index.js"),c=a(i),d=n("./src/styles/buttons.scss"),f=a(d),m=t.Page=function(e){var t=e.children,n=e.actions,a=e.options,u=e.title,o=e.subtitle,i=e.onBackPress,d=e.flex;return l.default.createElement("section",{className:(0,c.default)(s.default.main,r({},s.default.flex,d))},l.default.createElement("div",{className:s.default.header},l.default.createElement("div",{className:s.default.row1},l.default.createElement("h1",{className:s.default.title},u),i&&l.default.createElement("button",{onClick:i,className:(0,c.default)(f.default.button,f.default.stable,s.default.back)},l.default.createElement("i",{className:"ion-ios-arrow-thin-left"})),l.default.createElement("ul",{className:s.default.actions},n&&n.map(function(e,t){return l.default.createElement("li",{key:t},e)}))),l.default.createElement("div",{className:s.default.row2},o&&l.default.createElement("h2",{className:s.default.subtitle},o),a&&l.default.createElement("ul",{className:s.default.options},a.map(function(e,t){return l.default.createElement("li",{key:t},e)})))),l.default.createElement("div",{className:(0,c.default)(s.default.content,r({},s.default.flex,d))},t))};t.default=m},"./src/components/elements/Preferences.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Preferences=void 0;var r=n("./node_modules/react/react.js"),u=a(r),l=n("./node_modules/classnames/index.js"),o=a(l),s=n("./src/styles/buttons.scss"),i=a(s),c=n("./src/styles/Preferences.sass"),d=a(c),f=n("./src/components/elements/Page.jsx"),m=a(f),p=n("./src/scripts/XMLDataFile.js"),E=a(p),h=n("./src/scripts/onboarding.js"),v=n("./src/tools/index.js"),_=(n("./src/constants/index.js"),t.Preferences=function(e){var t=function(){(0,h.markAsShown)(!1).then(function(){e.history.push("/")})};return u.default.createElement(m.default,{title:"Préférences"},u.default.createElement("article",null,u.default.createElement("h2",{className:d.default.title},"Exporter votre HOMEBOOK"),u.default.createElement("div",{className:d.default.article},u.default.createElement("p",null,"Si vous disposez déjà d’un carnet numérique du logement, vous pouvez l’intégrer dans votre homebook par simple importation du fichier de type « .zip » fourni par l’opérateur de ce carnet  De la même manière, vous pouvez exporter le carnet numérique homebook. Cette action générera un fichier « .zip » sur votre ordinateur."),u.default.createElement("button",{className:(0,o.default)(i.default.button,i.default.default),disabled:!0},u.default.createElement("i",{className:"ion-ios-upload-outline"})," IMPORTER VOTRE CARNET NUMÉRIQUE DU LOGEMENT"),u.default.createElement("button",{className:(0,o.default)(i.default.button,i.default.default),onClick:function(e){return y()}},u.default.createElement("i",{className:"ion-ios-download-outline"})," EXPORTER VOTRE CARNET NUMÉRIQUE DU LOGEMENT"))),u.default.createElement("article",null,u.default.createElement("h2",{className:d.default.title},"Revoir la présentation de Homebook"),u.default.createElement("div",{className:d.default.article},u.default.createElement("p",null,"A votre première connexion, nous vous avons présenté les grandes fonctionnalités : vous pouvez les consulter à nouveau avec ce bouton."),u.default.createElement("button",{className:(0,o.default)(i.default.button,i.default.assertive),onClick:function(){return t()}},u.default.createElement("i",{className:"ion-ios-refresh-outline"}),"Revoir la présentation de Homebook"))))}),y=function(){(0,E.default)().then(function(e){return(0,v.forceFileDownload)(e,"homebook.zip")})};t.default=_},"./src/components/elements/Recalls.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/lodash/isDate.js"),s=a(o),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n("./node_modules/react/react.js"),d=a(c),f=n("./node_modules/classnames/index.js"),m=a(f),p=n("./node_modules/react-portal/build/portal.js"),E=a(p),h=n("./node_modules/react-big-calendar/lib/index.js"),v=a(h),_=n("./node_modules/moment/moment.js"),y=a(_);n("./node_modules/moment/locale/fr.js"),n("./node_modules/react-big-calendar/lib/css/react-big-calendar.css");var b=n("./node_modules/react-big-calendar/lib/utils/messages.js"),C=a(b),S=n("./node_modules/react-big-calendar/lib/utils/constants.js"),g=n("./src/constants/index.js"),A=n("./src/styles/buttons.scss"),O=a(A),T=n("./src/styles/Modal.sass"),D=(a(T),n("./src/styles/Recalls.sass")),x=(a(D),n("./src/components/elements/Page.jsx")),R=a(x),N=n("./src/components/elements/Loader.jsx"),j=a(N),k=n("./src/components/modals/Modal.jsx"),w=a(k),L=n("./src/components/modals/RecallsModal.jsx"),P=a(L);y.default.locale("fr"),v.default.momentLocalizer(y.default);var M=function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={current:null,modalOpen:!1,defaultDate:null,edition:!1},a}return l(t,e),i(t,[{key:"componentWillMount",value:function(){this.props.onLoadRecalls()}},{key:"componentWillReceiveProps",value:function(e){}},{key:"addOrSaveRecall",value:function(e){this.state.current?this.props.onSaveRecall(this.state.current._id,Object.assign(this.state.current,e)):this.props.onNewRecall(e.name,e),this.setState({modalOpen:!1,current:null})}},{key:"add",value:function(){this.setState({current:null,modalOpen:!0,defaultDate:void 0,edition:!0})}},{key:"open",value:function(e){this.setState({current:e,modalOpen:!0})}},{key:"remove",value:function(){this.state.current&&(this.props.onRemoveRecalls([this.state.current]),this.setState({modalOpen:!1,current:null,defaultDate:void 0}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.elements,a=t.count,r=t.status,u=r===g.STATUS_LOAD,l=d.default.createElement("button",{onClick:function(){return e.add()},className:(0,m.default)(O.default.button,O.default.default)},d.default.createElement("i",{className:"ion-ios-plus-empty"}),"AJOUTER"),o=function(t){var n=t.event;return d.default.createElement("span",null,d.default.createElement("p",{className:"agenda-title",onClick:function(){return e.setState({modalOpen:!0,current:n.item,defaultDate:void 0})}},n.title),d.default.createElement("p",{onClick:function(){return e.setState({modalOpen:!0,current:n.item,defaultDate:void 0})}},n.item.deadline))};return d.default.createElement(R.default,{title:"Rappels",subtitle:null!==a&&a+(a>1?" rappels":" rappel"),actions:[l]},d.default.createElement(j.default,{display:u}),!u&&d.default.createElement(v.default,{events:n.map(function(e){var t=(0,y.default)(e.deadline,"DD/MM/YYYY");return t=t.isValid()?t.toDate():(0,s.default)(e.deadline)?e.deadline:Date.now(),{title:e.name,allDay:!0,start:t,end:t,item:e}}),selectable:!0,popup:!0,components:{agenda:{event:o},toolbar:I},views:["month","agenda"],onSelectSlot:function(t){return e.setState({modalOpen:!0,current:null,defaultDate:t.end,edition:!0})},onSelectEvent:function(t){return e.setState({modalOpen:!0,current:t.item,defaultDate:void 0})},messages:{allDay:"Journée",previous:"Précédent",next:"Suivant",today:"Aujourd'hui",month:"Mois",agenda:"Agenda",showMore:function(e){return"+"+e+" plus"},time:"Heure",event:"Événement"},style:{flex:"1 0 auto",minHeight:"500px"}}),d.default.createElement(E.default,{isOpened:this.state.modalOpen,closeOnEsc:!0,onClose:function(){return e.setState({modalOpen:!1,current:null,defaultDate:void 0,edition:!1})}},d.default.createElement(w.default,null,d.default.createElement(P.default,{defaultDate:this.state.defaultDate,item:this.state.current,title:this.state.current?"Modifier rappel":"Nouveau rappel",onSave:function(t){return e.addOrSaveRecall(t)},onRemove:function(){return e.remove()},edit:this.state.edition}))))}}]),t}(c.Component);t.default=M;var I=function(e){function t(){var e,n,a,l;r(this,t);for(var o=arguments.length,s=Array(o),i=0;i<o;i++)s[i]=arguments[i];return n=a=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),Object.defineProperty(a,"navigate",{enumerable:!0,writable:!0,value:function(e){a.props.onNavigate(e)}}),Object.defineProperty(a,"view",{enumerable:!0,writable:!0,value:function(e){a.props.onViewChange(e)}}),l=n,u(a,l)}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.messages,n=e.label;return t=(0,C.default)(t),d.default.createElement("div",{className:"rbc-toolbar",style:{flexWrap:"wrap"}},d.default.createElement("span",{className:"rbc-btn-group"},d.default.createElement("button",{type:"button",onClick:this.navigate.bind(null,S.navigate.TODAY)},t.today),d.default.createElement("button",{type:"button",onClick:this.navigate.bind(null,S.navigate.PREVIOUS)},t.previous),d.default.createElement("button",{type:"button",onClick:this.navigate.bind(null,S.navigate.NEXT)},t.next)),d.default.createElement("span",{className:"rbc-toolbar-label",style:{width:"auto",flex:"1 0 auto"}},n),d.default.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(t)))}},{key:"viewNamesGroup",value:function(e){var t=this,n=this.props.views,a=this.props.view;if(n.length>1)return n.map(function(n){return d.default.createElement("button",{type:"button",key:n,className:(0,m.default)({"rbc-active":a===n}),onClick:t.view.bind(null,n)},e[n])})}}]),t}(d.default.Component)},"./src/components/elements/ToolBoxOptions.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("./node_modules/react/react.js"),i=a(s),c=n("./node_modules/classnames/index.js"),d=a(c),f=n("./src/styles/ToolBoxOptions.sass"),m=a(f),p=n("./src/styles/buttons.scss"),E=a(p),h=function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={open:!1},a.intent=null,a}return l(t,e),o(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.intent)}},{key:"open",value:function(){this.state.open||(this.setState({open:!0}),this.props.onOpen&&this.props.onOpen())}},{key:"close",value:function(){this.state.open&&(this.setState({open:!1}),this.props.onClose&&this.props.onClose())}},{key:"toggle",value:function(){this.state.open?this.close():this.open()}},{key:"closeIntent",value:function(){var e=this;this.props.noAuto||(this.intent=setTimeout(function(){return e.close()},100))}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{className:m.default.toolBox},i.default.createElement("button",{type:"button",onClick:function(){return e.toggle()},onBlur:function(t){return e.closeIntent()},className:(0,d.default)(E.default.button,E.default.stable)},i.default.createElement("i",{className:"ion-more"})),this.state.open&&i.default.createElement("div",{className:m.default.content},i.default.createElement("div",{className:m.default.triangle}),this.props.children))}}]),t}(s.Component);t.default=h},"./src/components/elements/Trash.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("./node_modules/react/react.js"),i=a(s),c=n("./node_modules/classnames/index.js"),d=a(c),f=n("./src/constants/index.js"),m=n("./src/styles/buttons.scss"),p=a(m),E=n("./src/components/elements/ToolBoxOptions.jsx"),h=a(E),v=n("./src/components/elements/Page.jsx"),_=a(v),y=n("./src/components/elements/Loader.jsx"),b=a(y),C=n("./src/components/elements/DocumentList.jsx"),S=a(C),g=n("./src/components/elements/ContactList.jsx"),A=a(g),O=n("./src/components/elements/DataList.jsx"),T=a(O),D=function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={current:null,modalOpen:!1},a}return l(t,e),o(t,[{key:"componentWillMount",value:function(){this.props.onLoadTrash()}},{key:"componentWillReceiveProps",value:function(e){void 0!==e.contacts&&void 0!==e.files&&void 0!==e.data&&void 0!==e.count?e.contacts.length+e.files.length+e.data.length!==e.count&&e.onLoadTrash():e.onLoadTrash()}},{key:"empty",value:function(){this.props.onEmpty()}},{key:"restore",value:function(){var e=this.props.files.filter(function(e){return e.selected});e.length>0&&this.props.onRestoreDocuments(e);var t=this.props.contacts.filter(function(e){return e.selected});t.length>0&&this.props.onRestoreContacts(t);var n=this.props.data.filter(function(e){return e.selected});n.length>0&&this.props.onRestoreData(n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.files,a=t.contacts,r=t.data,u=t.count,l=t.selectedCount,o=t.status,s=o===f.STATUS_LOAD,c=i.default.createElement("button",{onClick:function(){return e.empty()},className:(0,d.default)(p.default.button,p.default.assertive)},i.default.createElement("i",{className:"ion-ios-trash-outline"}),"VIDER"),m=i.default.createElement(h.default,null,i.default.createElement("ul",null,i.default.createElement("li",{onClick:function(){e.props.onSelectAll(e.props.count)}},i.default.createElement("i",{className:"ion-ios-checkmark-outline"},"TOUT SELECTIONNER")),i.default.createElement("li",{onClick:function(){e.props.onChangeViewMode()}},this.props.viewMode===f.VIEW_LIST?i.default.createElement("i",{className:"ion-grid"},"VUE GRILLE"):i.default.createElement("i",{className:"ion-navicon"},"VUE LISTE")))),E=i.default.createElement("button",{onClick:function(){return e.restore()},className:(0,d.default)(p.default.button,p.default.stable)},i.default.createElement("i",{className:"ion-ios-undo-outline"}),"RESTAURER"),v=[m];return u>0&&v.unshift(c),l>0&&v.unshift(E),i.default.createElement(_.default,{title:"Corbeille",subtitle:null!==u&&u+(u>1?" éléments":" élément"),actions:v},i.default.createElement(b.default,{display:s}),i.default.createElement("div",{className:"files"},!s&&n.length>0&&i.default.createElement(S.default,{view:this.props.viewMode,onClickItem:function(t){e.props.onSelectFile(t)}},n),!s&&0===n.length&&"Aucun fichier"),i.default.createElement("div",{className:"contacts"},!s&&a.length>0&&i.default.createElement(A.default,{view:this.props.viewMode,onClickItem:function(t){e.props.onSelectContact(t)}},a),!s&&0===a.length&&"Aucun contact"),i.default.createElement("div",{className:"data"},!s&&r.length>0&&i.default.createElement(T.default,{view:this.props.viewMode,onClickItem:function(t){e.props.onSelectData(t)}},r),!s&&0===r.length&&"Aucune donnée"))}}]),t}(s.Component);t.default=D},"./src/components/modals/ConfirmModal.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),u=a(r),l=n("./node_modules/classnames/index.js"),o=a(l),s=n("./src/styles/buttons.scss"),i=a(s),c=n("./src/styles/ConfirmModal.sass"),d=a(c),f=n("./src/components/modals/Modal.jsx"),m=a(f),p=function(e){var t=e.confirm,n=e.abort,a=e.children;return u.default.createElement(m.default,null,u.default.createElement("div",{className:d.default.main},u.default.createElement("div",{className:d.default.content},a),u.default.createElement("div",{className:d.default.actions},u.default.createElement("button",{className:(0,o.default)(i.default.button,i.default.default),onClick:function(e){return n()}},"ANNULER"),u.default.createElement("button",{onClick:function(e){return t()},className:(0,o.default)(i.default.button,i.default.assertive)},"SUPPRIMER"))))};t.default=p},"./src/components/modals/ContactsModal.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n("./node_modules/react/react.js"),d=a(c),f=n("./node_modules/classnames/index.js"),m=a(f),p=n("./src/constants/contactTypes.json"),E=a(p),h=n("./src/tools/index.js"),v=n("./src/styles/buttons.scss"),_=a(v),y=n("./src/styles/ContactRecallModal.sass"),b=a(y),C=function(e){function t(e,n){u(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));console.log("CM Constuctor",e);var r=e.item||{};return a.state={lastName:r.lastName||"",firstName:r.firstName||"",company:r.company||"",type:r.type||"",email:r.email||"",telephones:r.telephones||[],address:r.address||{way:"",code:"",city:""},commentary:r.commentary||"",edit:!1},a}return o(t,e),i(t,[{key:"componentWillMount",value:function(){!0===this.props.edit&&(this.state.edit=!0)}},{key:"componentWillReceiveProps",value:function(e){}},{key:"save",value:function(e){var t=this.state,n=t.lastName,a=t.firstName,u=t.company,l=t.type,o=t.email,i=t.commentary,c=[].concat(r(this.state.telephones)),d=s({},this.state.address),f={lastName:n,firstName:a,company:u,type:l,email:o,commentary:i,telephones:c,address:d};this.props.onSave(f),this.close(e)}},{key:"close",value:function(e){e.stopPropagation(),this.props.closePortal()}},{key:"edit",value:function(e){e.stopPropagation(),this.setState({edit:!0})}},{key:"remove",value:function(e){this.props.onRemove(),this.close(e)}},{key:"addTelephone",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({telephones:[].concat(r(this.state.telephones),[{phone:"",type:"fixe"}])})}},{key:"renderEdition",value:function(){var e=this;return d.default.createElement("div",{className:b.default.edition,onClick:function(e){return e.stopPropagation()}},d.default.createElement("div",{className:b.default.header},d.default.createElement("h1",null,this.props.title),d.default.createElement("button",{className:(0,m.default)(_.default.button,_.default.default),onClick:function(t){return e.save(t)}},d.default.createElement("i",{className:"fa fa-floppy-o"}),"Enregistrer"),d.default.createElement("button",{onClick:function(t){return e.close(t)},className:(0,m.default)(_.default.button,_.default.stable,_.default.clear)},d.default.createElement("i",{className:"ion-ios-close-empty"}))),d.default.createElement("form",{className:b.default.content},d.default.createElement("div",{className:b.default.row},d.default.createElement("div",{className:b.default.group},d.default.createElement("label",null,"Nom"),d.default.createElement("input",{type:"text",placeholder:"Nom",value:this.state.lastName,onChange:function(t){return e.setState({lastName:t.target.value})}})),d.default.createElement("div",{className:b.default.group},d.default.createElement("label",null,"Prénom"),d.default.createElement("input",{type:"text",placeholder:"Prénom",value:this.state.firstName,onChange:function(t){return e.setState({firstName:t.target.value})}}))),d.default.createElement("div",{className:b.default.row},d.default.createElement("div",{className:b.default.group},d.default.createElement("label",null,"Société"),d.default.createElement("input",{type:"text",placeholder:"Société",value:this.state.company,onChange:function(t){return e.setState({company:t.target.value})}})),d.default.createElement("div",{className:b.default.group},d.default.createElement("label",null,"Activité"),d.default.createElement("select",{type:"text",placeholder:"Activité",value:this.state.type,onChange:function(t){return e.setState({type:t.target.value})}},d.default.createElement("option",null,"Aucune"),(0,h.createOptionsFromArray)(E.default)))),d.default.createElement("div",{className:b.default.group},d.default.createElement("label",null,"Téléphone"),d.default.createElement("button",{className:(0,m.default)(_.default.button,_.default.stable),onClick:function(t){return e.addTelephone(t)}},d.default.createElement("i",{className:"ion-ios-plus-empty"}),"Ajouter")),d.default.createElement("div",{className:b.default.group},this.state.telephones&&this.state.telephones.map(function(t,n){return d.default.createElement("div",{key:n,className:b.default.inline},d.default.createElement("input",{type:"text",placeholder:"Téléphone",value:t.phone,onChange:function(n){t.phone=n.target.value,e.setState({})}}),d.default.createElement("select",{value:t.type,onChange:function(n){t.type=n.target.value,e.setState({})}},d.default.createElement("option",{value:"mobile"},"Mobile"),d.default.createElement("option",{value:"fixe"},"Fixe")))})),d.default.createElement("div",{className:b.default.group},d.default.createElement("label",null,"Email"),d.default.createElement("input",{type:"email",placeholder:"Email",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}})),d.default.createElement("div",{className:b.default.group},d.default.createElement("label",null,"Adresse"),d.default.createElement("input",{type:"text",placeholder:"Adresse",value:this.state.address.way,onChange:function(t){return e.setState({address:s({},e.state.address,{way:t.target.value})})}}),d.default.createElement("input",{type:"text",placeholder:"Code postal",value:this.state.address.code,onChange:function(t){return e.setState({address:s({},e.state.address,{code:t.target.value})})}}),d.default.createElement("input",{type:"text",placeholder:"Ville",value:this.state.address.city,onChange:function(t){return e.setState({address:s({},e.state.address,{city:t.target.value})})}})),d.default.createElement("div",{className:b.default.group},d.default.createElement("label",null,"Commentaire"),d.default.createElement("textarea",{value:this.state.commentary,onChange:function(t){return e.setState({commentary:t.target.value})}}))))}},{key:"renderView",value:function(){var e=this;return d.default.createElement("div",{className:b.default.main,onClick:function(e){return e.stopPropagation()}},d.default.createElement("div",{className:b.default.header},d.default.createElement("h1",null,this.state.firstName," ",this.state.lastName&&this.state.lastName.toUpperCase()),d.default.createElement("button",{className:(0,m.default)(_.default.button,_.default.default),onClick:function(t){return e.edit(t)}},d.default.createElement("i",{className:"fa fa-edit"}),d.default.createElement("span",{className:_.default.text},"Modifier")),d.default.createElement("button",{onClick:function(t){return e.remove(t)},className:(0,m.default)(_.default.button,_.default.assertive)},d.default.createElement("i",{className:"ion-ios-trash-outline"}),d.default.createElement("span",{className:_.default.text},"Supprimer")),d.default.createElement("button",{onClick:function(t){return e.close(t)},className:(0,m.default)(_.default.button,_.default.stable,_.default.clear)},d.default.createElement("i",{className:"ion-ios-close-empty"}))),d.default.createElement("div",{className:b.default.content},d.default.createElement("div",null,d.default.createElement("h3",null,"Société"),d.default.createElement("p",null,this.state.company)),d.default.createElement("div",null,d.default.createElement("h3",null,"Type / Spécialité"),d.default.createElement("p",null,this.state.type)),d.default.createElement("div",null,d.default.createElement("h3",null,"Téléphone"),this.state.telephones&&this.state.telephones.map(function(e,t){return d.default.createElement("p",{key:t},d.default.createElement("strong",null,e.type&&e.type.toUpperCase()+" :"),d.default.createElement("a",{href:"tel:"+e.phone},e.phone))})),d.default.createElement("div",null,d.default.createElement("h3",null,"Email"),d.default.createElement("p",null,d.default.createElement("a",{href:"mailto:"+this.state.email},this.state.email))),d.default.createElement("div",null,d.default.createElement("h3",null,"Adresse"),d.default.createElement("p",null,this.state.address.way),d.default.createElement("p",null,this.state.address.code),d.default.createElement("p",null,this.state.address.city)),d.default.createElement("div",null,d.default.createElement("h3",null,"Commentaire"),d.default.createElement("div",null,this.state.commentary&&this.state.commentary.split("\n").map(function(e,t){return d.default.createElement("div",{key:t},e)})))))}},{key:"render",value:function(){return this.state.edit?this.renderEdition():this.renderView()}}]),t}(c.Component);t.default=C},"./src/components/modals/ImporterModal.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/lodash/flatten.js"),c=a(i),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=n("./node_modules/react/react.js"),m=a(f),p=n("./src/styles/ImporterModal.sass"),E=a(p),h=n("./src/styles/buttons.scss"),v=a(h),_=n("./node_modules/classnames/index.js"),y=a(_),b=n("./src/components/elements/DirectoryPicker.jsx"),C=a(b),S=n("./node_modules/react-dropzone/dist/index.js"),g=a(S),A=n("./src/scripts/fileTypes.js"),O=n("./src/constants/index.js"),T=function(e){var t=e.item,n=e.currentType,a=e.onDocChange,r=(0,A.getTypesByGroup)(),u=t.isDirectory||!1;t.typeFile||(t.typeFile=""!=n?n:"");var l="/images/file.png";return/^image\//.test(t.type)&&(l=t.preview),u&&(l="/images/folder.png"),m.default.createElement("div",{className:E.default.doc,onClick:function(e){return e.stopPropagation()}},m.default.createElement("div",{className:E.default.image},m.default.createElement("img",{src:l,alt:"document"})),m.default.createElement("span",{className:E.default.docName},t.name),!u&&m.default.createElement("select",{className:E.default.select,value:t.typeFile,onChange:function(e){t.typeFile=e.target.value,a()}},m.default.createElement("option",{value:""},"Choisir un type"),r.map(function(e,t){return m.default.createElement("optgroup",{label:e.name,key:t},e.types.map(function(e,t){return m.default.createElement("option",{key:t,value:e.key},e.name)}))}),m.default.createElement("option",{value:""},"Autre")))},D=function(e){function t(e,n){l(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={documents:[],dropzoneActive:!1},a}return s(t,e),d(t,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({dropzoneActive:!1})}},{key:"cancel",value:function(e){e.stopPropagation(),this.props.closePortal()}},{key:"next",value:function(){this.props.onChangeView(O.VIEW_DIR)}},{key:"prev",value:function(){this.props.onChangeView(O.VIEW_FILE)}},{key:"import",value:function(e){var t=this;this.state.documents.length>0&&cozy.client.files.statByPath(this.props.currentPath).then(function(e){console.log("Parent",e),t.props.onImport(t.state.documents,e._id)}),this.cancel(e)}},{key:"_dropFiles",value:function(e,t){var n=this;if(t.preventDefault(),t.stopPropagation(),t.dataTransfer)if(t.dataTransfer.items){for(var a,r=t.dataTransfer.items,u=[],l=0;a=r[l];++l){(function(e,t){if("file"!=t.kind)return"continue";var n=t.webkitGetAsEntry();if(n.isDirectory){var a=n.createReader();u.push();var r=function e(t,n){return new Promise(function(a,r){t.readEntries(function(r){return r.length?Promise.all(r.map(function(e){return new Promise(function(t,n){e.file(t,n)})})).then(function(r){return n=n.concat(r.slice()),e(t,n).then(function(e){return a(e)})}):a(n)},r)})}(a,[]).then(function(e){return{name:n.name,isDirectory:!0,content:e}});u.push(r)}else if(n.isFile){var l=new Promise(function(e,t){n.file(e,t)}).then(function(e){return[e]});u.push(l)}})(0,a)}Promise.all(u).then(function(e){return(0,c.default)(e)}).then(function(e){return n.addFiles(e)})}else if(t.dataTransfer.files){var o=Array.prototype.slice.call(t.dataTransfer.files);console.log("Files IE",o),this.addFiles(o)}else console.error("Error can't read files");else t.target.files&&this.addFiles(t.target.files)}},{key:"addFiles",value:function(e){var t=[],n=!0,a=!1,r=void 0;try{for(var l,o=this.state.documents[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var s=l.value,i=!0,c=!0,d=!1,f=void 0;try{for(var m,p=e[Symbol.iterator]();!(c=(m=p.next()).done);c=!0){if(m.value.name===s.name){i=!1;break}}}catch(e){d=!0,f=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw f}}i&&t.push(s)}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}if(this.props.currentType){var E=!0,h=!1,v=void 0;try{for(var _,y=e[Symbol.iterator]();!(E=(_=y.next()).done);E=!0){var b=_.value;console.log("Default",this.props.currentType),b.typeFile=this.props.currentType}}catch(e){h=!0,v=e}finally{try{!E&&y.return&&y.return()}finally{if(h)throw v}}}this.setState({dropzoneActive:!1,documents:[].concat(t,u(e))})}},{key:"_dragEnter",value:function(e){"Files"===e.dataTransfer.types[0]&&this.setState({dropzoneActive:!0})}},{key:"_dragLeave",value:function(e){this.setState({dropzoneActive:!1})}},{key:"render",value:function(){var e=this;return m.default.createElement("div",{onClick:function(e){return e.stopPropagation()},className:E.default.main},this.props.view===O.VIEW_FILE&&m.default.createElement("div",{className:E.default.file},m.default.createElement("div",{className:E.default.header},m.default.createElement("span",null,"AJOUTER DES FICHIERS"),m.default.createElement("button",{className:(0,y.default)(v.default.button,v.default.stable,v.default.clear),onClick:function(t){return e.cancel(t)}},m.default.createElement("i",{className:"ion-ios-close-empty"}))),m.default.createElement("div",{className:E.default.content},m.default.createElement(g.default,{ref:"dropzone",disableClick:!1,disablePreview:!1,className:(0,y.default)(E.default.dropzone,r({},E.default.active,this.state.dropzoneActive)),onDrop:function(t,n,a){return e._dropFiles(t,a)},onDragEnter:function(t){return e._dragEnter(t)},onDragLeave:function(t){return e._dragLeave(t)},inputProps:{capture:!0}},this.state.documents.map(function(t,n){return m.default.createElement(T,{key:n,item:t,onDocChange:function(){return e.setState({})},currentType:e.props.currentType})}),0==this.state.documents.length?m.default.createElement("span",{className:E.default.message},"déposez vos fichiers ici"):null)),m.default.createElement("div",{className:E.default.footer},m.default.createElement("button",{type:"button",className:(0,y.default)(v.default.button,v.default.stable),onClick:function(t){return e.cancel(t)}},m.default.createElement("i",{className:"ion-ios-close-empty"}),"ANNULER"),m.default.createElement("button",{type:"button",className:(0,y.default)(v.default.button,v.default.stable),onClick:function(){return e.next()}},m.default.createElement("i",{className:"ion-ios-folder-outline"}),"CHANGER EMPLACEMENT"),m.default.createElement("button",{type:"button",className:(0,y.default)(v.default.button,v.default.stable),onClick:function(t){return e.import(t)}},m.default.createElement("i",{className:"ion-ios-cloud-upload-outline"}),"OK"))),this.props.view===O.VIEW_DIR&&m.default.createElement("div",{className:E.default.dir},m.default.createElement("div",{className:E.default.header},m.default.createElement("span",null,"CHOISIR UN EMPLACEMENT"),m.default.createElement("button",{className:(0,y.default)(v.default.button,v.default.stable,v.default.clear),onClick:function(t){return e.cancel(t)}},m.default.createElement("i",{className:"ion-ios-close-empty"}))),m.default.createElement("div",{className:E.default.content},m.default.createElement(C.default,{dirs:this.props.documentsTree,root:O.ROOT_PATH,default:this.props.currentPath,rootDirectoryName:O.ROOT_NAME,onPathChange:function(t){return e.props.onDirectoryChange(t)}})),m.default.createElement("div",{className:E.default.footer},m.default.createElement("button",{type:"button",className:(0,y.default)(v.default.button,v.default.stable),onClick:function(){return e.prev()}},m.default.createElement("i",{className:"ion-ios-arrow-left"}),"RETOUR"),m.default.createElement("button",{type:"button",className:(0,y.default)(v.default.button,v.default.stable),onClick:function(t){return e.import(t)}},m.default.createElement("i",{className:"ion-ios-cloud-upload-outline"}),"IMPORTER"))))}}]),t}(f.Component);t.default=D},"./src/components/modals/InfomationModal.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n("./node_modules/react/react.js"),c=a(i),d=n("./node_modules/classnames/index.js"),f=a(d),m=(n("./src/tools/index.js"),n("./src/styles/buttons.scss")),p=a(m),E=n("./src/styles/Modal.sass"),h=a(E),v=n("./src/constants/index.js"),_=function(e){function t(e,n){u(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={open:!1,close:!1},a.opening=setTimeout(function(){a.setState({open:!0})}),a.closing=setTimeout(function(){a.close()},a.props.timeout||2e3),a}return o(t,e),s(t,[{key:"componentWillUnmount",value:function(){this.closing&&clearTimeout(this.closing),this.opening&&clearTimeout(this.opening),this.anim&&clearTimeout(this.anim)}},{key:"close",value:function(){var e=this;this.setState({close:!0,open:!1}),this.anim=setTimeout(function(){e.props.closePortal(),e.props.onClose&&e.props.onClose()},200)}},{key:"onClose",value:function(e){e.stopPropagation(),this.close()}},{key:"stopClosing",value:function(e){e.stopPropagation(),this.componentWillUnmount()}},{key:"startClosing",value:function(e){var t=this;e.stopPropagation(),this.closing=setTimeout(function(){t.close()},1e3)}},{key:"render",value:function(){var e,t=this;return c.default.createElement("div",{className:(0,f.default)(h.default.popup,(e={},r(e,h.default.openActive,this.state.open),r(e,h.default.closeActive,this.state.close),r(e,h.default.error,this.props.level===v.ALERT_LEVEL_ERROR),e)),onClick:function(e){return e.stopPropagation()},onMouseEnter:function(e){return t.stopClosing(e)},onMouseLeave:function(e){return t.startClosing(e)}},c.default.createElement("div",{className:h.default.header},c.default.createElement("h2",null,this.props.title||"Informations"),c.default.createElement("button",{style:{fontSize:"20px"},onClick:function(e){return t.onClose(e)},className:(0,f.default)(p.default.button,p.default.stable,p.default.clear)},c.default.createElement("i",{className:"ion-ios-close-empty"}))),c.default.createElement("div",{className:h.default.content},c.default.createElement("p",null,this.props.infos)))}}]),t}(i.Component);t.default=_},"./src/components/modals/Modal.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;var r=n("./node_modules/react/react.js"),u=a(r),l=n("./src/styles/Modal.sass"),o=a(l),s=t.Modal=function(e){var t=e.closePortal,n=e.children;return"function"==typeof n.type&&(n=u.default.cloneElement(n,{closePortal:t})),u.default.createElement("div",{className:o.default.modal,onClick:t},n)};t.default=s},"./src/components/modals/MoverModal.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("./node_modules/react/react.js"),i=a(s),c=n("./src/styles/ImporterModal.sass"),d=a(c),f=n("./src/styles/buttons.scss"),m=a(f),p=n("./node_modules/classnames/index.js"),E=a(p),h=n("./src/components/elements/DirectoryPicker.jsx"),v=a(h),_=n("./src/constants/index.js"),y=function(e){function t(e,n){return r(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e,t){}},{key:"cancel",value:function(e){e.stopPropagation(),this.props.closePortal()}},{key:"move",value:function(e){this.props.onMove(this.props.currentPath),this.cancel(e)}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{onClick:function(e){return e.stopPropagation()},className:d.default.main},i.default.createElement("div",{className:d.default.dir},i.default.createElement("div",{className:d.default.header},i.default.createElement("span",null,"CHOISIR UN EMPLACEMENT"),i.default.createElement("button",{className:(0,E.default)(m.default.button,m.default.stable,m.default.clear),onClick:function(t){return e.cancel(t)}},i.default.createElement("i",{className:"ion-ios-close-empty"}))),i.default.createElement("div",{className:d.default.content},i.default.createElement(v.default,{dirs:this.props.documentsTree,root:_.ROOT_PATH,default:this.props.currentPath,rootDirectoryName:_.ROOT_NAME,onPathChange:function(t){return e.props.onDirectoryChange(t)}})),i.default.createElement("div",{className:d.default.footer},i.default.createElement("button",{type:"button",className:(0,E.default)(m.default.button,m.default.stable),onClick:function(t){return e.cancel(t)}},i.default.createElement("i",{className:"ion-ios-arrow-left"}),"ANNULER"),i.default.createElement("button",{type:"button",className:(0,E.default)(m.default.button,m.default.stable),onClick:function(t){return e.move(t)}},i.default.createElement("i",{className:"ion-ios-browsers-outline"}),"DEPLACER"))))}}]),t}(s.Component);t.default=y},"./src/components/modals/RecallsModal.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("./node_modules/react/react.js"),i=a(s),c=n("./node_modules/classnames/index.js"),d=a(c),f=n("./node_modules/react-datepicker/dist/react-datepicker.min.js"),m=a(f);n("./node_modules/react-datepicker/dist/react-datepicker.css");var p=n("./node_modules/moment/moment.js"),E=a(p),h=n("./src/constants/recallsFrequencies.json"),v=a(h),_=n("./src/tools/index.js"),y=n("./src/styles/buttons.scss"),b=a(y),C=n("./src/styles/ContactRecallModal.sass"),S=a(C),g=function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),l=e.item||{};return a.state={name:l.name||"",deadline:l.deadline||(0,E.default)(e.defaultDate).format("DD/MM/YYYY"),alert:l.alert,frequency:l.frequency||"",notes:l.notes||"",edit:!1},a}return l(t,e),o(t,[{key:"componentWillMount",value:function(){!0===this.props.edit&&(this.state.edit=!0)}},{key:"componentWillReceiveProps",value:function(e){}},{key:"save",value:function(e){var t=this.state,n=t.name,a=t.deadline,r=t.alert,u=t.frequency,l=t.notes,o={name:n,deadline:a,alert:r,frequency:u,notes:l};this.props.onSave(o),this.close(e)}},{key:"remove",value:function(e){this.props.onRemove(),this.close(e)}},{key:"edit",value:function(e){e.stopPropagation(),this.setState({edit:!0})}},{key:"close",value:function(e){e.stopPropagation(),this.props.closePortal()}},{key:"renderEdition",value:function(){var e=this;return i.default.createElement("div",{className:S.default.edition,onClick:function(e){return e.stopPropagation()}},i.default.createElement("div",{className:S.default.header},i.default.createElement("h1",null,this.props.title),i.default.createElement("button",{className:(0,d.default)(b.default.button,b.default.default),onClick:function(t){return e.save(t)}},i.default.createElement("i",{className:"fa fa-floppy-o"}),"Enregistrer"),i.default.createElement("button",{onClick:function(t){return e.close(t)},className:(0,d.default)(b.default.button,b.default.stable,b.default.clear)},i.default.createElement("i",{className:"ion-ios-close-empty"}))),i.default.createElement("form",{className:S.default.content},i.default.createElement("div",{className:S.default.group},i.default.createElement("label",null,"Nom"),i.default.createElement("input",{type:"text",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},className:"form-control"})),i.default.createElement("div",{className:S.default.group},i.default.createElement("label",null,"Echéance"),i.default.createElement(m.default,{dateFormat:"DD/MM/YYYY",locale:"fr-fr",isClearable:!1,selected:(0,E.default)(this.state.deadline,"DD/MM/YYYY"),onChange:function(t){return e.setState({deadline:t&&t.format("DD/MM/YYYY")})}})),i.default.createElement("div",{className:S.default.group},i.default.createElement("label",null,"Alerte"),i.default.createElement(m.default,{dateFormat:"DD/MM/YYYY",locale:"fr-fr",isClearable:!0,selected:this.state.alert&&(0,E.default)(this.state.alert,"DD/MM/YYYY"),onChange:function(t){return e.setState({alert:t&&t.format("DD/MM/YYYY")})}})),i.default.createElement("div",{className:S.default.group},i.default.createElement("label",null,"Fréquence"),i.default.createElement("select",{type:"text",value:this.state.frequency,onChange:function(t){return e.setState({frequency:t.target.value})},className:"form-control"},i.default.createElement("option",null,"Aucune"),(0,_.createOptionsFromArray)(v.default))),i.default.createElement("div",{className:S.default.group},i.default.createElement("label",null,"Notes"),i.default.createElement("textarea",{value:this.state.notes,onChange:function(t){return e.setState({notes:t.target.value})},className:"form-control"}))))}},{key:"renderView",value:function(){var e=this;return i.default.createElement("div",{className:S.default.main,onClick:function(e){return e.stopPropagation()}},i.default.createElement("div",{className:S.default.header},i.default.createElement("h1",null,this.state.name),i.default.createElement("button",{className:(0,d.default)(b.default.button,b.default.default),onClick:function(t){return e.edit(t)}},i.default.createElement("i",{className:"fa fa-edit"}),i.default.createElement("span",{className:b.default.text},"Modifier")),i.default.createElement("button",{onClick:function(t){return e.remove(t)},className:(0,d.default)(b.default.button,b.default.assertive)},i.default.createElement("i",{className:"ion-ios-trash-outline"}),i.default.createElement("span",{className:b.default.text},"Supprimer")),i.default.createElement("button",{onClick:function(t){return e.close(t)},className:(0,d.default)(b.default.button,b.default.stable,b.default.clear)},i.default.createElement("i",{className:"ion-ios-close-empty"}))),i.default.createElement("div",{className:S.default.content},i.default.createElement("div",null,i.default.createElement("h3",null,"Echéance"),i.default.createElement("p",null,this.state.deadline)),i.default.createElement("div",null,i.default.createElement("h3",null,"Alerte"),i.default.createElement("p",null,this.state.alert)),i.default.createElement("div",null,i.default.createElement("h3",null,"Fréquence"),i.default.createElement("p",null,this.state.frequency)),i.default.createElement("div",null,i.default.createElement("h3",null,"Note"),i.default.createElement("div",null,this.state.notes&&this.state.notes.split("\n").map(function(e,t){return i.default.createElement("div",{key:t},e)})))))}},{key:"render",value:function(){return this.state.edit?this.renderEdition():this.renderView()}}]),t}(s.Component);t.default=g},"./src/components/utils/CustomInput.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("./node_modules/react/react.js"),i=a(s),c=n("./node_modules/react-datepicker/dist/react-datepicker.min.js"),d=a(c),f=n("./node_modules/moment/moment.js"),m=a(f),p=function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={value:""},a}return l(t,e),o(t,[{key:"componentWillMount",value:function(){this.state.value=this.props.value}},{key:"componentWillReceiveProps",value:function(e){this.state.value=e.value}},{key:"onChangePhone",value:function(e){this.onChange(e)}},{key:"onChange",value:function(e){"date"===this.props.type&&(e=(0,m.default)(e).format("DD/MM/YYYY")),this.setState({value:e}),this.props.onChange(e)}},{key:"onChangeMulti",value:function(e,t){var n=this.state.value;n[t]=e,this.setState({value:n}),this.props.onChange(n)}},{key:"render",value:function(){var e=this,t=this.state.value,n=this.props.type||"text";switch(n){case"boolean":return i.default.createElement("select",{autoFocus:this.props.autoFocus,className:this.props.className,style:this.props.style,value:t,onChange:function(t){return e.onChange(t.target.value)}},i.default.createElement("option",{value:0},"Non"),i.default.createElement("option",{value:1},"Oui"));case"list":return i.default.createElement("select",{autoFocus:this.props.autoFocus,className:this.props.className,style:this.props.style,value:t,onChange:function(t){return e.onChange(t.target.value)}},this.props.values.map(function(e,t){return i.default.createElement("option",{key:t,value:e},e)}));case"date":return t=t?(0,m.default)(t,"DD/MM/YYYY"):(0,m.default)(),i.default.createElement(d.default,{dateFormat:"DD/MM/YYYY",locale:"fr-fr",isClearable:!1,selected:t,onChange:function(t){return e.onChange(t)}});case"email":return i.default.createElement("input",{type:"email",autoFocus:this.props.autoFocus,className:this.props.className,style:this.props.style,value:t,onChange:function(t){return e.onChange(t.target.value)},placeholder:this.props.title});case"telephone":return i.default.createElement("input",{type:"text",autoFocus:this.props.autoFocus,className:this.props.className,style:this.props.style,value:t,onChange:function(t){return e.onChangePhone(t.target.value)},placeholder:this.props.title});case"textarea":return i.default.createElement("textarea",{autoFocus:this.props.autoFocus,className:this.props.className,style:this.props.style,value:t,onChange:function(t){return e.onChange(t.target.value)},placeholder:this.props.title});case"contract":return t=t||{},i.default.createElement("div",null,i.default.createElement("input",{type:"text",autoFocus:this.props.autoFocus,className:this.props.className,style:this.props.style,value:t.company,onChange:function(t){return e.onChangeMulti(t.target.value,"company")},placeholder:"Société"}),i.default.createElement("input",{type:"text",autoFocus:this.props.autoFocus,className:this.props.className,style:this.props.style,value:t.address,onChange:function(t){return e.onChangeMulti(t.target.value,"address")},placeholder:"Adresse"}),i.default.createElement("input",{type:"text",autoFocus:this.props.autoFocus,className:this.props.className,style:this.props.style,value:t.email,onChange:function(t){return e.onChangeMulti(t.target.value,"email")},placeholder:"Email"}),i.default.createElement("input",{type:"text",autoFocus:this.props.autoFocus,className:this.props.className,style:this.props.style,value:t.telephone,onChange:function(t){return e.onChangeMulti(t.target.value,"telephone")},placeholder:"Téléphone"}));case"address":return t=t||{},i.default.createElement("div",null,i.default.createElement("input",{type:"text",autoFocus:this.props.autoFocus,className:this.props.className,style:this.props.style,value:t.line,onChange:function(t){return e.onChangeMulti(t.target.value,"line")},placeholder:"Voie"}),i.default.createElement("input",{type:"text",autoFocus:this.props.autoFocus,className:this.props.className,style:this.props.style,value:t.postalCode,onChange:function(t){return e.onChangeMulti(t.target.value,"postalCode")},placeholder:"Code postal"}),i.default.createElement("input",{type:"text",autoFocus:this.props.autoFocus,className:this.props.className,style:this.props.style,value:t.city,onChange:function(t){return e.onChangeMulti(t.target.value,"city")},placeholder:"Ville"}));default:return i.default.createElement("input",{type:n,autoFocus:this.props.autoFocus,className:this.props.className,style:this.props.style,value:t,placeholder:this.props.title,onChange:function(t){return e.onChange(t.target.value)}})}}}]),t}(s.Component);t.default=p},"./src/components/utils/PDFViewer.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("./node_modules/react/react.js"),i=a(s),c=n("./node_modules/classnames/index.js"),d=a(c),f=n("./node_modules/react-pdf-js/lib/index.js"),m=a(f),p=n("./src/styles/pdf.sass"),E=a(p),h=n("./src/components/elements/Loader.jsx"),v=a(h),_=function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return Object.defineProperty(a,"onDocumentComplete",{enumerable:!0,writable:!0,value:function(e){a.setState({page:1,pages:e})}}),Object.defineProperty(a,"onPageComplete",{enumerable:!0,writable:!0,value:function(e){a.setState({page:e})}}),Object.defineProperty(a,"handlePrevious",{enumerable:!0,writable:!0,value:function(e){e.preventDefault(),1!==a.state.page&&a.setState({page:a.state.page-1})}}),Object.defineProperty(a,"handleNext",{enumerable:!0,writable:!0,value:function(e){e.preventDefault(),a.state.page!==a.state.pages&&a.setState({page:a.state.page+1})}}),Object.defineProperty(a,"handleZoomPlus",{enumerable:!0,writable:!0,value:function(e){e.preventDefault(),a.state.zoom<2&&a.setState({zoom:a.state.zoom+.5})}}),Object.defineProperty(a,"handleZoomMinus",{enumerable:!0,writable:!0,value:function(e){e.preventDefault(),a.state.zoom>0&&a.setState({zoom:a.state.zoom-.5})}}),Object.defineProperty(a,"renderPagination",{enumerable:!0,writable:!0,value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=i.default.createElement("li",{className:(0,d.default)("previous",E.default.previous,{disabled:1===e}),onClick:a.handlePrevious},i.default.createElement("a",null,i.default.createElement("i",{className:"fa fa-arrow-left"}))),u=i.default.createElement("li",{className:(0,d.default)("next",E.default.next,{disabled:e===t}),onClick:a.handleNext},i.default.createElement("a",null,i.default.createElement("i",{className:"fa fa-arrow-right"}))),l=void 0;return n&&(l=i.default.createElement("li",{className:(0,d.default)("zoom",E.default.zoom)},i.default.createElement("a",{onClick:a.handleZoomMinus},i.default.createElement("i",{className:"fa fa-search-minus"}))," ",i.default.createElement("a",{onClick:a.handleZoomPlus},i.default.createElement("i",{className:"fa fa-search-plus"})))),i.default.createElement("nav",null,i.default.createElement("ul",{className:"pager"},r,n&&l,u))}}),a.state={page:0,pages:0,zoom:1},a}return l(t,e),o(t,[{key:"render",value:function(){var e=null;return this.state.pages&&(e=this.renderPagination(this.state.page,this.state.pages,!0)),i.default.createElement("div",null,i.default.createElement("div",{style:{textAlign:"center",overflow:"auto"}},i.default.createElement(m.default,{file:this.props.url,onDocumentComplete:this.onDocumentComplete,onPageComplete:this.onPageComplete,page:this.state.page,rotate:0,scale:this.state.zoom,loading:i.default.createElement(v.default,null)})),e,i.default.createElement("p",{style:{textAlign:"center"}},this.state.page+" / "+this.state.pages))}}]),t}(s.Component);t.default=_},"./src/components/utils/RenameInput.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("./node_modules/react/react.js"),i=a(s),c=n("./node_modules/classnames/index.js"),d=a(c),f=n("./src/styles/buttons.scss"),m=a(f),p=function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.closeIntent=null,a.name=a.props.name,a.state={newName:a.props.name.replace(/[\/*\\'":|=,\[\]]/,"_")},a}return l(t,e),o(t,[{key:"cancelRename",value:function(e){var t=this;this.closeIntent=setTimeout(function(){t.props.onCancel()},100)}},{key:"stopCancelRename",value:function(){clearTimeout(this.closeIntent)}},{key:"checkNewName",value:function(e){/[\/*\\'":|=,\[\]]/.test(e)||this.setState({newName:e})}},{key:"rename",value:function(){if(this.name===this.state.newName)return this.props.onCancel();console.log("new name"+this.state.newName),this.props.onRename(this.state.newName)}},{key:"render",value:function(){var e=this;return i.default.createElement("span",{style:{display:"inline-flex"}},i.default.createElement("input",{autoFocus:!0,type:"text",value:this.state.newName,onChange:function(t){return e.checkNewName(t.target.value)},onKeyPress:function(t){"Enter"===t.key&&e.rename()},style:{width:10+13.1*this.state.newName.length+"px"}}),i.default.createElement("button",{className:(0,d.default)(m.default.button,m.default.stable),onFocus:function(t){return e.stopCancelRename()},onClick:function(){return e.rename()}},i.default.createElement("i",{className:"ion-ios-checkmark-empty"})),i.default.createElement("button",{className:(0,d.default)(m.default.button,m.default.assertive),onClick:function(t){return e.cancelRename()}},i.default.createElement("i",{className:"ion-ios-close-empty"})))}}]),t}(s.Component);t.default=p},"./src/components/utils/TXTViewer.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("./node_modules/react/react.js"),i=a(s),c=n("./node_modules/classnames/index.js"),d=(a(c),n("./src/components/elements/Loader.jsx")),f=a(d),m=function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.state={content:"",loading:!0},a}return l(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this;fetch(this.props.url).then(function(e){return e.text()}).then(function(t){return e.setState({content:t,loading:!1})}).catch(function(t){return e.setState({content:"Impossible de lire le fichier",loading:!1})})}},{key:"render",value:function(){return i.default.createElement("div",null,i.default.createElement(f.default,{display:this.state.loading}),!this.state.loading&&i.default.createElement("div",{style:{textAlign:"left",margin:"30px"}},this.state.content.split("\n").map(function(e,t){return i.default.createElement("p",{key:t},e)})),!this.state.loading&&this.state.error&&i.default.createElement("p",{style:{textAlign:"center"}},this.props.url))}}]),t}(s.Component);t.default=m},"./src/components/utils/TypeChanger.jsx":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n("./node_modules/react/react.js"),i=a(s),c=n("./node_modules/classnames/index.js"),d=a(c),f=n("./src/styles/buttons.scss"),m=a(f),p=n("./src/scripts/fileTypes.js"),E=(0,p.getTypesByGroup)(),h=function(e){function t(e,n){r(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.closeIntent=null,a.type=a.props.type,a.state={newType:a.props.type},a}return l(t,e),o(t,[{key:"cancelChange",value:function(){var e=this;this.closeIntent=setTimeout(function(){e.props.onCancel()},100)}},{key:"stopCancelChange",value:function(){clearTimeout(this.closeIntent)}},{key:"checkNewType",value:function(e){this.setState({newType:e})}},{key:"change",value:function(){if(this.name===this.state.newType)return this.props.onCancel();this.props.onChange(this.state.newType)}},{key:"render",value:function(){var e=this;return i.default.createElement("span",{style:{display:"inline-flex"}},i.default.createElement("select",{autoFocus:!0,value:this.state.newType,onChange:function(t){return e.checkNewType(t.target.value)},onKeyPress:function(t){"Enter"===t.key&&e.change()}},i.default.createElement("option",{value:""},"Choisir un type"),E.map(function(e,t){return i.default.createElement("optgroup",{label:e.name,key:t},e.types.map(function(e,t){return i.default.createElement("option",{key:t,value:e.key},e.name)}))}),i.default.createElement("option",{value:""},"Autre")),i.default.createElement("button",{className:(0,d.default)(m.default.button,m.default.stable),onFocus:function(t){return e.stopCancelChange()},onClick:function(){return e.change()}},i.default.createElement("i",{className:"ion-ios-checkmark-empty"})),i.default.createElement("button",{className:(0,d.default)(m.default.button,m.default.assertive),onClick:function(t){return e.cancelChange()}},i.default.createElement("i",{className:"ion-ios-close-empty"})))}}]),t}(s.Component);t.default=h},"./src/constants/contactTypes.json":function(e,t){e.exports=["Rénovation générale","Plomberie","Electricité","Couverture","Chauffage/Ventilation/Climatisation","Peinture","Autre"]},"./src/constants/data/contact.json":function(e,t){e.exports=[{name:"Principales",group:[{name:"firstname",display:"Prénom"},{name:"lastname",display:"Nom"},{name:"telephone",display:"Téléphone",type:"telephone"},{name:"email",display:"Email",type:"email"},{name:"address",display:"Adresse",type:"address"},{name:"speciality",display:"Spécialité",type:"list",value:["A definir"]},{name:"satisfaction",display:"Satisfaction",type:"rate"},{name:"nbRealisedProjects",display:"Nombre de projets réalisés",type:"number"}]}]},"./src/constants/data/diagnosis.json":function(e,t){e.exports=[{name:"Principales",group:[{name:"type",display:"Type",type:"list",values:["DPE","ERNMT","Plomb (CREP)","Amiante (DAPP)","Installation intérieur élétricité","Installation intérieur de gaz","autre"],required:!0,question:"Quel est le type de diagnostic effectié ?"},{name:"name",display:"Nom",question:"Quel est l'intitulé du diagnostic ?"},{name:"date",display:"Date de réalisation",type:"date",required:!0,question:"A quelle date ?"},{name:"expirationDate",display:"Date d'expiration",type:"date",question:"Quand expire t-il ?"},{name:"DPEEnergyClass",display:"Étiquette énergétique DPE",depend:{key:"type",value:"DPE"},question:"Quelle est l'étiquette énergétique calculée durant le diagnostic ?"},{name:"realEnergyConsommation",display:"Consommation conventionnelle",depend:{key:"type",value:"DPE"},question:"Quelle est la consommation conventionnelle calculée durant le diagnostic ?"},{name:"carbonClass",display:"Étiquette carbon",depend:{key:"type",value:"DPE"},question:"Quelle est l'étiquette carbon calculée durant le diagnostic ?"},{name:"CO2emission",display:"Estimation émission",depend:{key:"type",value:"DPE"},question:"Quelle est l'estimation d'émission calculée durant le diagnostic ?"},{name:"cep",display:"Coefficient Cep",type:"number",depend:{key:"type",value:"DPE"},question:"Quelle est le coefficient CEP calculé durant le diagnostic ?"},{name:"bbio",display:"Coefficient Bbio",type:"number",depend:{key:"type",value:"DPE"},question:"Quelle est le coefficient BBio calculé durant le diagnostic ?"},{name:"tic",display:"Valeur TIC",type:"number",depend:{key:"type",value:"DPE"},question:"Quelle est la valeur TIC calculée durant le diagnostic ?"}]},{name:"Donnée",group:[{name:"thermalBridge",display:"Pont thermal"},{name:"ventilation",display:"Ventilation"},{name:"lighting",display:"Lumière"}]},{name:"Données d'équipements",group:[{name:"heat",display:"Chaleur"},{name:"cold",display:"Froid"},{name:"sanitary",display:"Sanitaire"}]}]},"./src/constants/data/equipment.json":function(e,t){e.exports=[{name:"Principales",group:[{name:"type",display:"Type",type:"list",values:["Ventilation naturelle","VMC","VMC Gaz","Autre système de ventilation","Eau chaude sanitaire électrique","Eau chaude sanitaire thermodynamique","Eau chaude solaire","Chaudière à gaz","Chaudière fuel","Poêle à bois","Cheminée, foyer, insert","Radiateurs électriques","Chauffage solaire","Pompe à chaleur","Climatiseur","Installation photovoltaïques","Réfrigérateur","Lave-linge","Cuisinière","Table de cuisson","Four","Lave-vaisselle","Cave à vin","Sèche-linge","Box de pilotage maison","Box internet/télévision","Autre"],required:!0,question:"De quelle type est votre équipement ?"},{name:"name",display:"Name",question:"Quelle est le nom de votre équipement ?"},{name:"brand",display:"Marque",question:"Quelle est la marque de votre équipement ?"},{name:"model",display:"Model",depend:"brand",question:"Quelle est le modèle de votre équipement ?"},{name:"buyDate",display:"Date d'achat",type:"date",question:"Quand avez-vous acheté cet équipement ?"},{name:"installDate",display:"Date d'installation",type:"date",question:"Quand avez-vous installé cet équipement ?"},{name:"guaranteeEndDate",display:"Date de fin de garantie",type:"date",question:"Quelle est la date de fin de garantie ?"},{name:"lastMaintenanceDate",display:"Date de la dernière maintenance",type:"date",question:"Quelle est la date du dernier entretien ?"},{name:"energyClass",display:"Classe énergetique",question:"Quelle est la classe énergétique de cet équipement ?"}]}]},"./src/constants/data/home.json":function(e,t){e.exports=[{name:"Principales",group:[{name:"status",display:"Statut résident",type:"list",values:["Propriétaire","Locataire"],question:"Quelle est votre status de résident ?"},{name:"type",display:"Type de logement",type:"list",values:["Individuel","Collectif"],question:"Dans quelle type de logement vivez vous ?"},{name:"constructionDate",display:"Date de construction",type:"date",question:"Quelle est la date de construction de votre logement ?"},{name:"address",display:"Adresse",type:"address",required:!0,question:"Quelle est l'adresse de votre logement ?"},{name:"telephone",display:"Téléphone",type:"telephone",question:"Quelle est votre numéro de téléphone ?"},{name:"email",display:"Email",type:"email",question:"Quelle est votre e-mail ?"},{name:"livingArea",display:"Surface habitable",type:"number",question:"De quelle taille est la surface habitable de votre logement ?"},{name:"roomsCount",display:"Nombre de pièces",type:"number",question:"Combient de pièces comporte votre logement ?"}]},{name:"Pièces",group:[{name:"type",display:"Type de pièce",type:"list",values:["Logement entier","Cuisine","Salle de bain","Salon","Salle à manger","Wc","Parties communes","Toit","Cave","Combles","Chambre","Jardin","Façade extérieure","Balcon"]},{name:"size",display:"Surface",type:"area"},{name:"level",display:"Niveau",type:"number"}]}]},"./src/constants/data/maintenance.json":function(e,t){e.exports=[{name:"Principales",group:[{name:"name",display:"Nom du contrat",required:!0,question:"Quelle est l'intitulé de cet entretien ?"},{name:"date",display:"Date de réalisation",type:"date",required:!0,question:"Quand à t'il était réalisé ?"},{name:"deadline",display:"Date d'échéance",type:"list",values:["6 mois","1 ans","2 ans","3 ans","4 ans","5 ans"],question:"Quelle est la date d'échéance de cet entretien ?"},{name:"contractId",display:"Numéro de contrat",question:"Quelle est le numéro de contrat ?"},{name:"contract",display:"Contrat",type:"contract",question:"Quelles sont les informations du contrat ?"}]}]},"./src/constants/data/work.json":function(e,t){e.exports=[{name:"Principales",group:[{name:"type",display:"Type",type:"list",values:["Fenêtres (PVC, bois, alu)","Construction - Extension","Rénovation intérieure","Chauffage - Chaudière","Menuiseries (alu, bois, pvc)","Toiture - Charpente -","Couverture","Climatisation - Ventilation","Electricité - Courant faible","Architecture - Expertise","Salle de bains - WC - SPA","Alarme - Sécurité - Incendie","Peinture - Tapisserie","Isolation thermique et ","Plomberie","Façade (ravalement, enduit,...)","Sols intérieurs","Piscine - Abri piscine","Aménagement intérieur","Assainissement - Terrassement","Sols extérieurs","Véranda - Pergola - Verrière","Diagnostics - Traitements","Plafond - Cloison - Plâtre","Jardin - Clôture - Portail","Maçonnerie - Démolition","Ascenseur - Monte-charges","Escalier - Garde corps","Cheminée et accessoires","Divers"],required:!0,question:"Quelle type de travaux avez-vouz réalisé ?"},{name:"name",display:"Name",required:!0,question:"Quelle est l'intitulé de ces travaux ?"},{name:"craftsman",display:"Artisant",question:"Avec quel artisant ?"},{name:"cost",display:"Coût",type:"list",values:["< 500 €","500 – 1000 €","1000 – 2000 €","2000 – 5000 €","> 5000€"],question:"Quelle a été votre budget ?"},{name:"dateStart",display:"Date de début",type:"date",question:"Quand ces travaux ont-ils commencé ?"},{name:"dateEnd",display:"Date de fin",type:"date",depend:"dateStart",question:"Quand se sont-ils terminé ou vont-ils se terminer ?"},{name:"contract",display:"Contrat",type:"contract",question:"Quelles sont les informations du contrat ?"}]},{name:"Pièces",group:[{name:"roomName",display:"Type de la pièce",type:"list",values:["Logement entier","Cuisine","Salle de bain","Salon","Salle à manger","Wc","Parties communes","Toit","Cave","Combles","Chambre","Jardin","Façade extérieure","Balcon"]}]},{name:"Équipements",group:[{name:"equipmentName",display:"Type d'équipements",type:"list",values:["Ventilation naturelle","VMC","VMC Gaz","Autre système de ventilation","Eau chaude sanitaire électrique","Eau chaude sanitaire thermodynamique","Eau chaude solaire","Chaudière à gaz","Chaudière fuel","Poêle à bois","Cheminée, foyer, insert","Radiateurs électriques","Chauffage solaire","Pompe à chaleur","Climatiseur","Installation photovoltaïques","Réfrigérateur","Lave-linge","Cuisinière","Table de cuisson","Four","Lave-vaisselle","Cave à vin","Sèche-linge","Box de pilotage maison","Autre"]}]}]},"./src/constants/documents.json":function(e,t){e.exports=[{name:"plan",tag:"plans"},{name:"permis",tag:"deed_of_superficies"},{name:"pc",tag:"deed_of_superficies"},{name:"ccmi",tag:"deed_of_superficies"},{name:"dommage ouvrage",tag:"house_insurance"},{name:"do",tag:"house_insurance"},{name:"choix crepi",tag:"deed_of_superficies"},{name:"qualigaz",tag:"gas_diagnosis"},{name:"cpe",tag:"energetics_diagnosis"},{name:"notice",tag:"deed_of_superficies"},{name:"attestation",tag:"deed_of_superficies"},{name:"garanties livraison",tag:"deed_of_superficies"},{name:"gl",tag:"deed_of_superficies"},{name:"contrat",tag:"deed_of_superficies"},{name:"proces verbal",tag:"deed_of_superficies"},{name:"pv",tag:"deed_of_superficies"},{name:"declaration",tag:"deed_of_superficies"},{name:"consuel",tag:"deed_of_superficies"},{name:"compromis vente",tag:"deed_of_superficies"},{name:"recepisse depot",tag:"deed_of_superficies"},{name:"xml_rset",tag:"deed_of_superficies"}]},"./src/constants/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=t.DOCTYPE_EQUIPMENTS="com.homebook.equipment",r=t.DOCTYPE_WORKS="com.homebook.work",u=t.DOCTYPE_MAINTENANCES="com.homebook.maintenance",l=t.DOCTYPE_DIAGNOSIS="com.homebook.diagnosis",o=t.DOCTYPE_HOMEDATA="com.homebook.homeData",s=(t.DOCTYPE_CONTACTS="com.homebook.contacts",t.DOCTYPE_RECALLS="com.homebook.recalls",t.DOCTYPE_META="com.homebook.meta",t.DOCTYPE_NEWS="com.homebook.news",t.COZY_ROOT_ID="io.cozy.files.root-dir",t.ROOT_PATH="/Homebook");t.ROOT_NAME="/Documents",t.DATA_LIST=[{name:"Diagnostics",singleName:"Diagnostic",addButton:"Ajouter un diagnostic",path:s+"/Diagnostics",doctype:l,slug:"diagnosis"},{name:"Données de propriété",singleName:"Donnée de propriété",addButton:"Ajouter une donnée de propriété",path:s+"/Documents de propriété",doctype:o,slug:"homedata"},{name:"Équipements",singleName:"Équipement",addButton:"Ajouter un Équipement",path:s+"/Équipements",doctype:a,slug:"equipments"},{name:"Travaux",singleName:"Travaux",addButton:"Ajouter des travaux",path:s+"/Travaux",doctype:r,slug:"works"},{name:"Entretien",singleName:"Entretien",addButton:"Ajouter des entretiens",path:s+"/Entretiens",doctype:u,slug:"maintenances"}],t.FOLDER_LIST=[s+"/Diagnostics",s+"/Documents de propriété",s+"/Équipements",s+"/Travaux",s+"/Entretiens",s+"/Usages"],t.STATUS_DONE="loaded",t.STATUS_LOAD="pending",t.STATUS_ERROR="failed",t.VIEW_LIST="VIEW_LIST",t.VIEW_GRID="VIEW_GRID",t.VIEW_FILE="VIEW_FILE",t.VIEW_DIR="VIEW_DIR",t.SORT_NAME="SORT_NAME",t.SORT_DATE="SORT_DATE",t.TYPE_FOLDER="TYPE_FOLDER",t.TYPE_FILE="TYPE_FILE",t.ALERT_LEVEL_INFO="alert_info",t.ALERT_LEVEL_ERROR="alert_error"},"./src/constants/recallsFrequencies.json":function(e,t){e.exports=["Une fois","Tous les ans","Tous les mois","Toutes les semaines","Tous les jours"]},"./src/constants/types.json":function(e,t){e.exports=[{name:"Données contractuelles de propriétés",location:"/Documents de propriété",types:[{key:"deed_of_superficies",name:"Acte de propriété"},{key:"plans",name:"Plans"}]},{name:"Equipements",location:"/Équipements",types:[{key:"equipments_notice",name:"Notice d’utilisation des équipements"},{key:"equipments_info",name:"Fiche équipement"}]},{name:"Travaux",location:"/Travaux et entretien",types:[{key:"works_invoice",name:"Devis, facture, éléments d’une opération de travaux"}]},{name:"Entretien",location:"/Travaux et entretien",types:[{key:"maintenance_contract",name:"Contrat d'entretien"}]},{name:"Données logements privées",location:"/Usages",types:[{key:"local_taxes",name:"Impôts locaux (TH, TF)"},{key:"supplies_contract",name:"Contrat de fourniture"},{key:"water_contract",name:"Contrat d'eau"},{key:"electricity_contract",name:"Contrat d'électricité"},{key:"telecom_contract",name:"Contrat télécom"},{key:"house_insurance",name:"Assurance habitation"}]},{name:"Diagnostics",location:"/Diagnostics",types:[{key:"energetics_diagnosis",name:"Diagnostic de Performance Energétique"},{key:"ernmt_diagnosis",name:"État des Risques Naturels, Miniers et Technologiques (ERNMT)"},{key:"lead_diagnosis",name:"Plomb (CREP)"},{key:"asbestos_diagnosis",name:"Amiante (DAPP)"},{key:"electricity_diagnosis",name:"Diagnostic Electricité"},{key:"gas_diagnosis",name:"Diagnostic Gaz"}]},{name:"Copropriété",location:"/Documents de propriété",types:[{key:"condominium_regulation",name:"Règlement de copropriété"},{key:"1",name:"Procès-verbaux des 3 dernières AG"},{key:"2",name:"Fiche synthétique de copropriété"},{key:"3",name:"Carnet d’entretien de la copropriété"},{key:"4",name:"Impayés de charges au sein du syndicat et dettes"}]}]},"./src/containers/Alerter.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/react-portal/build/portal.js"),l=a(u),o=n("./src/actions/index.js"),s=n("./src/components/modals/InfomationModal.jsx"),i=a(s),c=function(e){var t=e.alerts,n=e.dismiss;return React.createElement("div",null,t.map(function(e,t){return React.createElement(l.default,{key:t,isOpened:!0},React.createElement(i.default,{infos:e.message,level:e.level||DEFAULT_ALERT_LEVEL,onClose:function(t){return n(e.id)}}))}))},d=function(e){return{alerts:e.alerts}},f=function(e){return{dismiss:function(t){return e((0,o.alertDismiss)(t))}}},m=(0,r.connect)(d,f)(c);t.default=m},"./src/containers/App.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react-redux/es/index.js"),r=n("./src/actions/index.js"),u=n("./src/App.jsx"),l=function(e){return e&&e.__esModule?e:{default:e}}(u),o=function(e){return{initilizeGauge:function(){e((0,r.gaugeInitialize)())},initilizeDocs:function(){e((0,r.documentsInitialize)())}}},s=(0,a.connect)(null,o)(l.default);t.default=s},"./src/containers/Contacts.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react-redux/es/index.js"),u=n("./src/actions/index.js"),l=n("./src/components/elements/Contacts.jsx"),o=a(l),s=n("./src/scripts/confirm.js"),i=a(s),c=n("./node_modules/react/react.js"),d=a(c),f=n("./src/components/modals/ConfirmModal.jsx"),m=a(f),p=d.default.createElement(m.default,null,d.default.createElement("p",null,"Voulez-vous supprimer ce contact ?")),E=function(e){return{elements:e.contacts.elements,count:e.contacts.elementCount,selectedCount:e.contacts.selectedCount,status:e.contacts.fetchStatus}},h=function(e){return{onSelectContact:function(t){e((0,u.contactsSelect)(t))},onNewContact:function(t,n){e((0,u.contactsNew)(t,n))},onRemoveContacts:function(t){(0,i.default)(p).then(function(){return e((0,u.contactsRemove)(t))}).catch(function(e){})},onSaveContact:function(t,n){e((0,u.contactsSave)(t,n))},onLoadContacts:function(){e((0,u.loadContacts)())}}},v=(0,r.connect)(E,h)(o.default);t.default=v},"./src/containers/Data.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react-redux/es/index.js"),r=n("./src/actions/index.js"),u=n("./src/components/elements/Data.jsx"),l=function(e){return e&&e.__esModule?e:{default:e}}(u),o=function(e){return{current:e.data.current,status:e.data.fetchStatus}},s=function(e){return{onLoadData:function(t,n){e((0,r.dataLoad)(t,n))},dataSave:function(t,n){return e((0,r.dataSave)(t,n._id,n))},dataRemove:function(t,n){return e((0,r.dataRemove)(t,n))}}},i=(0,a.connect)(o,s)(l.default);t.default=i},"./src/containers/DataForm.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react-redux/es/index.js"),r=n("./src/actions/index.js"),u=n("./src/components/elements/DataForm.jsx"),l=function(e){return e&&e.__esModule?e:{default:e}}(u),o=function(e){return{onNewData:function(t,n){e((0,r.dataNew)(t,n))}}},s=(0,a.connect)(null,o)(l.default);t.default=s},"./src/containers/DocumentView.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react-redux/es/index.js"),r=n("./src/actions/index.js"),u=n("./src/components/elements/DocumentView.jsx"),l=function(e){return e&&e.__esModule?e:{default:e}}(u),o=function(e){return{status:e.documents.fetchStatus,folder:e.documents.folder,path:e.documents.path,current:e.documents.current}},s=function(e){return{onDownload:function(t){e((0,r.documentsDownload)([t]))},onRemove:function(t){e((0,r.documentsRemove)([t]))},onMoveFile:function(t,n){e((0,r.documentsMove)([t],n))},onChangeType:function(t,n){e((0,r.documentsChangeType)(t,n))},onAlert:function(t,n){e((0,r.alertShow)(t,n))}}},i=(0,a.connect)(o,s)(l.default);t.default=i},"./src/containers/Documents.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react-redux/es/index.js"),r=n("./src/actions/index.js"),u=n("./src/components/elements/Documents.jsx"),l=function(e){return e&&e.__esModule?e:{default:e}}(u),o=function(e){return{lastType:e.documents.lastFetchType}},s=function(e){return{onOpenFolder:function(t){e((0,r.loadFolder)(t))},onInitialize:function(){e((0,r.documentsInitialize)())}}},i=(0,a.connect)(o,s)(l.default);t.default=i},"./src/containers/Explorer.js":function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react-redux/es/index.js"),u=n("./src/actions/index.js"),l=n("./src/components/elements/Explorer.jsx"),o=function(e){return e&&e.__esModule?e:{default:e}}(l),s=n("./src/constants/index.js"),i=function(e,t,n){return e.sort(function(e,n){var a=void 0,r=void 0;return t===s.SORT_DATE?(a=new Date(n.updated_at).getTime(),r=new Date(e.updated_at).getTime()):t===s.SORT_NAME&&(a=e.name.toLowerCase(),r=n.name.toLowerCase()),a<r?-1:r<a?1:0})},c=function(e){return{files:e.documents.needSort?i(e.documents.files,e.documents.filter):e.documents.files,status:e.documents.fetchStatus,folder:e.documents.folder,path:e.documents.path,fileCount:e.documents.fileCount,viewMode:e.viewMode,selectedCount:e.documents.selectedCount,filter:e.documents.filter,data:e.data.data,dataStatus:e.data.fetchStatus,dataCount:e.data.dataCount,selectedDataCount:e.data.selectedCount}},d=function(e){var t;return t={onLoadData:function(t){e((0,u.loadData)(t))},onChangeViewMode:function(){e((0,u.documentsChangeViewMode)())},onNewFolder:function(){var t=prompt("Nom du dossier");t&&!t.match(/[\/\\:\*\?|<>]/)&&e((0,u.documentsNewFolder)(t))},onRename:function(){console.log("RENAME No implemented yet")},onDownload:function(t){e((0,u.documentsDownload)(t))},onRemove:function(t){e((0,u.documentsRemove)(t))},onDownloadAll:function(t){e((0,u.documentsDownload)(t))},onSelect:function(t){e((0,u.documentsSelect)(t))},onImporterClick:function(t){e((0,u.importerClick)(t))},onChangeFilter:function(t){e((0,u.documentsChangeFilter)(t))},onSelectData:function(t){e((0,u.dataSelect)(t))},onRemoveData:function(t,n){e((0,u.dataRemove)(t,n))}},a(t,"onRename",function(t,n){e((0,u.documentsRename)(t,n))}),a(t,"onMoveFile",function(t,n){e((0,u.documentsMove)(t,n))}),t},f=(0,r.connect)(c,d)(o.default);t.default=f},"./src/containers/Gauge.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react-redux/es/index.js"),r=n("./src/actions/index.js"),u=n("./src/components/elements/Gauge.jsx"),l=function(e){return e&&e.__esModule?e:{default:e}}(u),o=n("./src/scripts/fileTypes.js"),s=function(e){var t=e.usedTypes;return(0,o.getFileTypes)().filter(function(e){var n=!1,a=!0,r=!1,u=void 0;try{for(var l,o=t[Symbol.iterator]();!(a=(l=o.next()).done);a=!0)l.value.type===e.key&&(n=!0)}catch(e){r=!0,u=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw u}}return!n}).slice(0,3)},i=function(e){return{list:s(e.gauge),usedType:e.gauge.usedTypes,status:e.gauge.status}},c=function(e){return{onFileClick:function(t,n){e((0,r.importerClick)(t,n))}}},d=(0,a.connect)(i,c)(l.default);t.default=d},"./src/containers/Importer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react-redux/es/index.js"),r=n("./src/actions/index.js"),u=n("./src/components/modals/ImporterModal.jsx"),l=function(e){return e&&e.__esModule?e:{default:e}}(u),o=function(e){return{currentType:e.importer.currentType,currentPath:e.importer.currentPath,documentsTree:e.importer.documentsTree,view:e.importer.view}},s=function(e){return{onDirectoryChange:function(t){e((0,r.importerDirectoryChange)(t))},onImport:function(t,n){e((0,r.importerFilesUpload)(t,n))},onTree:function(){e((0,r.importerTree)())},onChangeView:function(t){e((0,r.importerViewChange)(t))}}},i=(0,a.connect)(o,s)(l.default);t.default=i},"./src/containers/Mover.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react-redux/es/index.js"),r=n("./src/actions/index.js"),u=n("./src/components/modals/MoverModal.jsx"),l=function(e){return e&&e.__esModule?e:{default:e}}(u),o=function(e){return{currentPath:e.importer.currentPath,documentsTree:e.importer.documentsTree}},s=function(e){return{onDirectoryChange:function(t){e((0,r.importerDirectoryChange)(t))}}},i=(0,a.connect)(o,s)(l.default);t.default=i},"./src/containers/Navigation.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react-redux/es/index.js"),r=n("./src/actions/index.js"),u=n("./src/components/elements/Navigation.jsx"),l=function(e){return e&&e.__esModule?e:{default:e}}(u),o=n("./node_modules/react-router-dom/es/index.js"),s=function(e){return{onOpenFolder:function(){e((0,r.loadFolder)())},onOpenContacts:function(){e((0,r.loadContacts)())},onOpenRecalls:function(){e((0,r.loadRecalls)())},onOpenTrash:function(){e((0,r.loadTrash)())}}},i=(0,a.connect)(null,s)(l.default);t.default=(0,o.withRouter)(i)},"./src/containers/News.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react-redux/es/index.js"),r=n("./src/actions/index.js"),u=n("./src/components/elements/News.jsx"),l=function(e){return e&&e.__esModule?e:{default:e}}(u),o=function(e){return{news:e.news.elements,status:e.news.fetchStatus,count:e.news.elementCount}},s=function(e){return{onLoadNews:function(){e((0,r.loadNews)())}}},i=(0,a.connect)(o,s)(l.default);t.default=i},"./src/containers/Recalls.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react-redux/es/index.js"),u=n("./src/actions/index.js"),l=n("./src/components/elements/Recalls.jsx"),o=a(l),s=n("./src/scripts/confirm.js"),i=a(s),c=n("./node_modules/react/react.js"),d=a(c),f=n("./src/components/modals/ConfirmModal.jsx"),m=a(f),p=d.default.createElement(m.default,null,d.default.createElement("p",null,"Voulez-vous supprimer ce rappel ?")),E=function(e){return{elements:e.recalls.elements,count:e.recalls.elementCount,status:e.recalls.fetchStatus}},h=function(e){return{onNewRecall:function(t,n){e((0,u.recallsNew)(t,n))},onRemoveRecalls:function(t){(0,i.default)(p).then(function(){return e((0,u.recallsRemove)(t))}).catch(function(e){})},onSaveRecall:function(t,n){e((0,u.recallsSave)(t,n))},onClick:function(t){e((0,u.recallsCalendarClick)(t))},onLoadRecalls:function(){e((0,u.loadRecalls)())}}},v=(0,r.connect)(E,h)(o.default);t.default=v},"./src/containers/Trash.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react-redux/es/index.js"),u=n("./src/actions/index.js"),l=n("./src/components/elements/Trash.jsx"),o=a(l),s=n("./src/scripts/confirm.js"),i=a(s),c=n("./node_modules/react/react.js"),d=a(c),f=n("./src/components/modals/ConfirmModal.jsx"),m=a(f),p=d.default.createElement(m.default,null,d.default.createElement("p",null,"Voulez-vous vider la corbeille ?")),E=function(e){return{files:e.trash.files,contacts:e.trash.contacts,data:e.trash.data,count:e.trash.elementCount,viewMode:e.viewMode,selectedCount:e.trash.selectedCount,status:e.trash.fetchStatus}},h=function(e){return{onEmpty:function(){(0,i.default)(p).then(function(){return e((0,u.trashEmpty)())}).catch(function(e){})},onRestoreDocuments:function(t){e((0,u.documentsRestore)(t))},onRestoreContacts:function(t){e((0,u.contactsRestore)(t))},onRestoreData:function(t){e((0,u.dataRestore)(t))},onSelectContact:function(t){e((0,u.trashSelectContact)(t))},onSelectFile:function(t){e((0,u.trashSelectDocument)(t))},onSelectData:function(t){e((0,u.trashSelectData)(t))},onLoadTrash:function(){e((0,u.loadTrash)())},onChangeViewMode:function(){e((0,u.trashChangeViewMode)())},onSelectAll:function(t){e((0,u.trashSelectAll)(t))}}},v=(0,r.connect)(E,h)(o.default);t.default=v},"./src/index.jsx":function(e,t,n){"use strict";(function(e){function t(e){return e&&e.__esModule?e:{default:e}}var a=n("./node_modules/react/react.js"),r=t(a),u=n("./node_modules/react-dom/index.js"),l=t(u),o=n("./src/containers/App.js"),s=t(o),i=n("./node_modules/react-redux/es/index.js"),c=n("./src/store/index.js"),d=t(c),f=n("./src/actions/index.js"),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),p=n("./src/scripts/XMLDataFile.js"),E=t(p);n("./bower_components/normalize-css/normalize.css"),n("./bower_components/bootstrap/dist/css/bootstrap.min.css"),n("./bower_components/font-awesome/css/font-awesome.css"),n("./bower_components/Ionicons/css/ionicons.css"),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector("[role=application]"),n=t.dataset;console.log("Current Version:","2.1.144"),window.cozy.client.init({cozyURL:"//"+n.cozyDomain,token:n.cozyToken}),window.cozy.bar.init({appName:n.cozyAppName,appEditor:n.cozyAppEditor,iconPath:n.cozyIconPath,lang:n.cozyLocale,replaceTitleOnMobile:!0});var a=(0,d.default)();e.React=r.default,e.store=a,e.Actions=m,e.Exporter=E.default,l.default.render(r.default.createElement(i.Provider,{store:a},r.default.createElement(s.default,null)),t)})}).call(t,n("./node_modules/webpack/buildin/global.js"))},"./src/reducers/alerts.js":function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.alerts=void 0;var r=n("./src/actions/index.js"),u=n("./src/constants/index.js"),l=t.alerts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(t.alert)return t.alert.id||(t.alert.id=Date.now()),t.alert.level||(t.alert.level=u.ALERT_LEVEL_INFO),[t.alert].concat(a(e));switch(t.type){case r.ALERT_SHOW:return[t.alert].concat(a(e.filter(function(e){return e.id!==t.id})));case r.ALERT_DISMISS:return e.filter(function(e){return e.id!==t.id});case r.ALERT_CLEAR:return[];default:return e}};t.default=l},"./src/reducers/contacts.js":function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.selectedCount=t.elements=void 0;var r=n("./node_modules/redux/es/index.js"),u=n("./src/actions/index.js"),l=n("./src/constants/index.js"),o=t.elements=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case u.LOAD_CONTACTS_SUCCESS:return t.contacts;case u.CONTACTS_NEW_SUCCESS:return[].concat(a(e),[t.contact]);case u.CONTACTS_REMOVE_SUCCESS:return e.filter(function(e){return-1===t.ids.indexOf(e._id)});case u.CONTACTS_SAVE_SUCCESS:return[].concat(a(e.filter(function(e){return e._id!==t.contact._id})),[t.contact]);case u.CONTACTS_SELECT:return[].concat(a(e.map(function(e){return e._id===t.contact._id&&(e.selected=!e.selected),e})));default:return e}},s=t.selectedCount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];switch(t.type){case u.LOAD_CONTACTS_SUCCESS:case u.CONTACTS_REMOVE_SUCCESS:return 0;case u.CONTACTS_SELECT:return t.contact.selected?e-1:e+1;default:return e}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case u.LOAD_CONTACTS_SUCCESS:return t.contacts.length;case u.CONTACTS_REMOVE_SUCCESS:return e-t.ids.length;case u.CONTACTS_RESTORE_SUCCESS:return e+t.ids.length;case u.CONTACTS_NEW_SUCCESS:return e+1;default:return e}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.STATUS_LOAD;switch(arguments[1].type){case u.LOAD_CONTACTS:case u.CONTACTS_REMOVE:case u.CONTACTS_SAVE:case u.CONTACTS_NEW:return l.STATUS_LOAD;case u.LOAD_CONTACTS_SUCCESS:case u.CONTACTS_NEW_SUCCESS:case u.CONTACTS_REMOVE_SUCCESS:case u.CONTACTS_SAVE_SUCCESS:return l.STATUS_DONE;case u.LOAD_CONTACTS_FAILURE:return l.STATUS_ERROR;default:return e}};t.default=(0,r.combineReducers)({selectedCount:s,elements:o,elementCount:i,fetchStatus:c})},"./src/reducers/data.js":function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.current=t.selectedCount=t.dataCount=t.doctype=t.data=void 0;var r=n("./node_modules/redux/es/index.js"),u=n("./src/actions/index.js"),l=n("./src/constants/index.js"),o=t.data=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case u.LOAD_DATA_SUCCESS:return t.data;case u.DATA_NEW_SUCCESS:return[].concat(a(e),[t.data]);case u.DATA_REMOVE_SUCCESS:return e.filter(function(e){return-1===t.ids.indexOf(e._id)});case u.DATA_SAVE_SUCCESS:return[].concat(a(e.filter(function(e){return e._id!==t.data._id})),[t.data]);case u.DATA_SELECT:return[].concat(a(e.map(function(e){return e._id===t.data._id&&(e.selected=!e.selected),e})));default:return e}},s=t.doctype=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case u.LOAD_DATA_SUCCESS:case u.DATA_LOAD_SUCCESS:return t.doctype;default:return e}},i=t.dataCount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];switch(t.type){case u.LOAD_DATA_SUCCESS:return t.data.length;case u.DATA_REMOVE_SUCCESS:return e-t.ids.length;case u.DATA_RESTORE_SUCCESS:return e+t.ids.length;case u.DATA_NEW_SUCCESS:return e+1;default:return e}},c=t.selectedCount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];switch(t.type){case u.LOAD_DATA_SUCCESS:case u.DATA_REMOVE_SUCCESS:return 0;case u.DATA_SELECT:return t.data.selected?e-1:e+1;default:return e}},d=t.current=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case u.DATA_LOAD_SUCCESS:case u.DATA_SAVE_SUCCESS:return t.data;default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.STATUS_DONE;switch(arguments[1].type){case u.LOAD_DATA:case u.DATA_LOAD:case u.DATA_REMOVE:case u.DATA_SAVE:return l.STATUS_LOAD;case u.LOAD_DATA_SUCCESS:case u.DATA_REMOVE_SUCCESS:case u.DATA_SAVE_SUCCESS:case u.DATA_LOAD_SUCCESS:return l.STATUS_DONE;case u.DATA_REMOVE_SUCCESS:case u.LOAD_DATA_FAILURE:case u.DATA_SAVE_FAILURE:case u.DATA_LOAD_FAILURE:return l.STATUS_ERROR;default:return e}};t.default=(0,r.combineReducers)({selectedCount:c,data:o,doctype:s,dataCount:i,current:d,fetchStatus:f})},"./src/reducers/documents.js":function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/redux/es/index.js"),u=n("./src/actions/index.js"),l=n("./src/constants/index.js"),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case u.LOAD_DOCS_SUCCESS:return t.folder;default:return e}},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.SORT_DATE,t=arguments[1];switch(t.type){case u.DOCUMENTS_CHANGE_FILTER:return t.filter;default:return e}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case u.LOAD_DOCS:return t.path;default:return e}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];switch(t.type){case u.LOAD_DOCS_SUCCESS:return t.fileCount;case u.IMPORTER_FILE_UPLOAD_SUCESS:return e+t.files.length;case u.DOCUMENTS_NEW_FOLDER_SUCCESS:return e+1;case u.DOCUMENTS_REMOVE_SUCCESS:case u.DOCUMENTS_MOVE_SUCCESS:return e-t.ids.length;case u.DOCUMENTS_RESTORE_SUCCESS:return e+t.ids.length;case u.DOCUMENTS_INITIALIZE_SUCCESS:return-1;default:return e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];switch(t.type){case u.LOAD_DOCS_SUCCESS:case u.DOCUMENTS_REMOVE_SUCCESS:case u.DOCUMENTS_RENAME_SUCCESS:case u.DOCUMENTS_MOVE_SUCCESS:return 0;case u.DOCUMENTS_SELECT:return t.document.selected?e-1:e+1;default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case u.LOAD_DOCS_SUCCESS:return t.files;case u.IMPORTER_FILE_UPLOAD_SUCESS:return t.currentDir?[].concat(a(e),a(t.files)):e;case u.DOCUMENTS_NEW_FOLDER_SUCCESS:return[t.folder].concat(a(e));case u.DOCUMENTS_REMOVE_SUCCESS:case u.DOCUMENTS_MOVE_SUCCESS:return e.filter(function(e){return-1===t.ids.indexOf(e.id)});case u.DOCUMENTS_SELECT:return[].concat(a(e.map(function(e){return e.id===t.document.id&&(e.selected=!e.selected),e})));case u.DOCUMENTS_RENAME_SUCCESS:return[].concat(a(e.map(function(e){return e.id===t.file.id&&(e=t.file),e})));default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.STATUS_LOAD;switch(arguments[1].type){case u.LOAD_DOCS:case u.DOCUMENTS_REMOVE:case u.DOCUMENTS_NEW_FOLDER:case u.IMPORTER_FILE_UPLOAD:return l.STATUS_LOAD;case u.LOAD_DOCS_SUCCESS:case u.LOAD_FILE_SUCCESS:case u.DOCUMENTS_REMOVE_SUCCESS:case u.IMPORTER_FILE_UPLOAD_SUCESS:case u.DOCUMENTS_MOVE_SUCCESS:case u.DOCUMENTS_NEW_FOLDER_SUCCESS:return l.STATUS_DONE;case u.DOCUMENTS_REMOVE_FAILURE:case u.LOAD_DOCS_FAILURE:return l.STATUS_ERROR;default:return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(arguments[1].type){case u.LOAD_DOCS_SUCCESS:return l.TYPE_FOLDER;case u.LOAD_FILE_SUCCESS:return l.TYPE_FILE;default:return e}},E=function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];switch(arguments[1].type){case u.DOCUMENTS_CHANGE_FILTER:case u.IMPORTER_FILE_UPLOAD_SUCESS:case u.LOAD_DOCS_SUCCESS:return!0;default:return!1}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case u.LOAD_FILE_SUCCESS:case u.DOCUMENTS_CHANGE_TYPE_SUCCESS:return t.file;case u.LOAD_DOCS_SUCCESS:return null;default:return e}};t.default=(0,r.combineReducers)({folder:o,path:i,fileCount:c,selectedCount:d,files:f,fetchStatus:m,lastFetchType:p,filter:s,needSort:E,current:h})},"./src/reducers/gauge.js":function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.gauge=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=n("./src/actions/index.js"),l=n("./src/constants/index.js"),o={usedTypes:[],status:l.STATUS_LOAD},s=t.gauge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case u.IMPORTER_FILE_UPLOAD_SUCESS:var n=[],s=!0,c=!1,d=void 0;try{for(var f,m=t.files[Symbol.iterator]();!(s=(f=m.next()).done);s=!0){var p=f.value,E=i(p);if(void 0!==E){var h=!1,v=!0,_=!1,y=void 0;try{for(var b,C=e.usedTypes[Symbol.iterator]();!(v=(b=C.next()).done);v=!0){var S=b.value;if(S.type===E){S.count=S.count+1||1,h=!0;break}}}catch(e){_=!0,y=e}finally{try{!v&&C.return&&C.return()}finally{if(_)throw y}}h||(console.log("Add type",E),n.push({type:E,count:1}))}}}catch(e){c=!0,d=e}finally{try{!s&&m.return&&m.return()}finally{if(c)throw d}}return r({},e,{usedTypes:[].concat(a(e.usedTypes),n)});case u.GAUGE_INITIALIZE:return r({},e,{status:l.STATUS_LOAD});case u.GAUGE_INITIALIZE_SUCCESS:return r({},e,{usedTypes:t.types,status:l.STATUS_DONE});case u.GAUGE_INITIALIZE_FAILURE:return r({},e,{status:l.STATUS_ERROR});default:return e}};t.default=s;var i=function(e){return e.tags&&e.tags[0]}},"./src/reducers/importer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importer=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n("./src/actions/index.js"),u=n("./src/constants/index.js"),l={currentPath:"",currentType:"",documentsTree:{},view:u.VIEW_FILE,status:u.STATUS_DONE},o=t.importer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case r.IMPORTER_DIRECTORY_CHANGE:return a({},e,{currentPath:t.path});case r.IMPORTER_CLICK:return a({},e,{currentPath:t.path,currentType:t.slug,view:u.VIEW_FILE});case r.IMPORTER_VIEW_CHANGE:return a({},e,{view:t.view});case r.IMPORTER_TREE_SUCCESS:return a({},e,{documentsTree:t.tree});case r.IMPORTER_FILE_UPLOAD:return a({},e,{status:u.STATUS_LOAD});case r.IMPORTER_FILE_UPLOAD_SUCESS:return a({},e,{status:u.STATUS_DONE});case r.IMPORTER_FILE_UPLOAD_FAILURE:return a({},e,{status:u.STATUS_ERROR});default:return e}};t.default=o},"./src/reducers/index.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.reducers=void 0;var r=n("./node_modules/redux/es/index.js"),u=n("./src/reducers/documents.js"),l=a(u),o=n("./src/reducers/gauge.js"),s=a(o),i=n("./src/reducers/importer.js"),c=a(i),d=n("./src/reducers/viewMode.js"),f=a(d),m=n("./src/reducers/contacts.js"),p=a(m),E=n("./src/reducers/recalls.js"),h=a(E),v=n("./src/reducers/data.js"),_=a(v),y=n("./src/reducers/trash.js"),b=a(y),C=n("./src/reducers/news.js"),S=a(C),g=n("./src/reducers/alerts.js"),A=a(g),O=t.reducers={documents:l.default,gauge:s.default,importer:c.default,viewMode:f.default,trash:b.default,data:_.default,recalls:h.default,contacts:p.default,news:S.default,alerts:A.default},T=(0,r.combineReducers)(O);t.default=T},"./src/reducers/news.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchStatus=t.elementCount=t.elements=void 0;var a=n("./node_modules/redux/es/index.js"),r=n("./src/actions/index.js"),u=n("./src/constants/index.js"),l=t.elements=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case r.LOAD_NEWS_SUCCESS:return t.news;default:return e}},o=t.elementCount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case r.LOAD_NEWS_SUCCESS:return t.news.length;default:return e}},s=t.fetchStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.STATUS_LOAD;switch(arguments[1].type){case r.LOAD_NEWS:return u.STATUS_LOAD;case r.LOAD_NEWS_SUCCESS:return u.STATUS_DONE;case r.LOAD_NEWS_FAILURE:return u.STATUS_ERROR;default:return e}};t.default=(0,a.combineReducers)({elements:l,elementCount:o,fetchStatus:s})},"./src/reducers/recalls.js":function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.selected=t.elements=void 0;var r=n("./node_modules/redux/es/index.js"),u=n("./src/actions/index.js"),l=n("./src/constants/index.js"),o=t.elements=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case u.LOAD_RECALLS_SUCCESS:return t.recalls;case u.RECALLS_NEW_SUCCESS:return[].concat(a(e),[t.recall]);case u.RECALLS_REMOVE_SUCCESS:return e.filter(function(e){return-1===t.ids.indexOf(e._id)});case u.RECALLS_SAVE_SUCCESS:return[].concat(a(e.filter(function(e){return e._id!==t.recall._id})),[t.recall]);default:return e}},s=t.selected=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case u.RECALLS_SELECT:return-1===e.indexOf(t.recall._id)?[].concat(a(e),[t.recall._id]):e.filter(function(e){return e!==t.recall._id});default:return e}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case u.LOAD_RECALLS_SUCCESS:return t.recalls.length;case u.RECALLS_NEW_SUCCESS:return e+1;case u.RECALLS_REMOVE_SUCCESS:return e-t.ids.length;case u.RECALLS_RESTORE_SUCCESS:return e+t.ids.length;default:return e}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.STATUS_LOAD;switch(arguments[1].type){case u.LOAD_RECALLS:case u.RECALLS_REMOVE:case u.RECALLS_SAVE:case u.RECALLS_NEW:return l.STATUS_LOAD;case u.LOAD_RECALLS_SUCCESS:case u.RECALLS_NEW_SUCCESS:case u.RECALLS_REMOVE_SUCCESS:case u.RECALLS_SAVE_SUCCESS:return l.STATUS_DONE;case u.LOAD_RECALLS_FAILURE:return l.STATUS_ERROR;default:return e}};t.default=(0,r.combineReducers)({elements:o,selected:s,elementCount:i,fetchStatus:c})},"./src/reducers/trash.js":function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/redux/es/index.js"),u=n("./src/actions/index.js"),l=n("./src/constants/index.js"),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];switch(t.type){case u.LOAD_TRASH_SUCCESS:return t.files.length+t.contacts.length+t.data.length;case u.CONTACTS_REMOVE_SUCCESS:case u.DOCUMENTS_REMOVE_SUCCESS:case u.DATA_REMOVE_SUCCESS:return e+1;case u.DOCUMENTS_RESTORE_SUCCESS:case u.CONTACTS_RESTORE_SUCCESS:case u.DATA_RESTORE_SUCCESS:return e-t.ids.length;case u.TRASH_EMPTY_SUCCESS:return 0;default:return e}},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];switch(t.type){case u.LOAD_TRASH_SUCCESS:case u.DOCUMENTS_RESTORE_SUCCESS:case u.CONTACTS_RESTORE_SUCCESS:case u.DATA_RESTORE_SUCCESS:case u.TRASH_EMPTY_SUCCESS:return 0;case u.TRASH_SELECT_CONTACT:return t.contact.selected?e-1:e+1;case u.TRASH_SELECT_DOCUMENT:return t.document.selected?e-1:e+1;case u.TRASH_SELECT_DATA:return t.data.selected?e-1:e+1;case u.TRASH_SELECT_ALL:return t.count;default:return e}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case u.LOAD_TRASH_SUCCESS:return t.files;case u.DOCUMENTS_RESTORE_SUCCESS:return e.filter(function(e){return-1!==t.ids.indexOf(e._id)});case u.TRASH_EMPTY_SUCCESS:return[];case u.TRASH_SELECT_DOCUMENT:return[].concat(a(e.map(function(e){return e.id===t.document.id&&(e.selected=!e.selected),e})));case u.TRASH_SELECT_ALL:return[].concat(a(e.map(function(e){return e.selected=!e.selected,e})));default:return e}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case u.LOAD_TRASH_SUCCESS:return t.contacts;case u.CONTACTS_RESTORE_SUCCESS:return e.filter(function(e){return-1===t.ids.indexOf(e._id)});case u.TRASH_EMPTY_SUCCESS:return[];case u.TRASH_SELECT_CONTACT:return[].concat(a(e.map(function(e){return e._id===t.contact._id&&(e.selected=!e.selected),e})));case u.TRASH_SELECT_ALL:return[].concat(a(e.map(function(e){return e.selected=!e.selected,e})));default:return e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case u.LOAD_TRASH_SUCCESS:return t.data;case u.DATA_RESTORE_SUCCESS:return e.filter(function(e){return-1===t.ids.indexOf(e._id)});case u.TRASH_EMPTY_SUCCESS:return[];case u.TRASH_SELECT_DATA:return[].concat(a(e.map(function(e){return e._id===t.data._id&&(e.selected=!e.selected),e})));case u.TRASH_SELECT_ALL:return[].concat(a(e.map(function(e){return e.selected=!e.selected,e})));default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.STATUS_LOAD;switch(arguments[1].type){case u.TRASH_EMPTY:case u.DOCUMENTS_RESTORE:case u.CONTACTS_RESTORE:return l.STATUS_LOAD;case u.LOAD_TRASH_SUCCESS:case u.TRASH_EMPTY_SUCCESS:case u.TRASH_EMPTY_FAILURE:case u.DOCUMENTS_RESTORE_SUCCESS:case u.DOCUMENTS_RESTORE_FAILURE:case u.CONTACTS_RESTORE_SUCCESS:case u.CONTACTS_RESTORE_FAILURE:return l.STATUS_DONE;case u.LOAD_TRASH_FAILURE:return l.STATUS_ERROR;default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(arguments[1].type){case u.LOAD_TRASH_SUCCESS:case u.LOAD_TRASH_FAILURE:return Date.now();default:return e}};t.default=(0,r.combineReducers)({elementCount:o,selectedCount:s,files:i,contacts:c,data:d,fetchStatus:f,lastFetch:m})},"./src/reducers/viewMode.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewMode=void 0;var a=n("./src/actions/index.js"),r=n("./src/constants/index.js"),u=t.viewMode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.VIEW_LIST;switch(arguments[1].type){case a.DOCUMENTS_CHANGE_VIEW_MODE:case a.TRASH_CHANGE_VIEW_MODE:return e===r.VIEW_GRID?r.VIEW_LIST:r.VIEW_GRID;default:return e}};t.default=u},"./src/scripts/AutoImport.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}function u(e){for(var t=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],n=0;n<t.length;n++)e=e.replace(t[n].letters,t[n].base);return e}Object.defineProperty(t,"__esModule",{value:!0}),t.autoImport=void 0;var l=n("./node_modules/lodash/property.js"),o=a(l),s=n("./src/scripts/TempFile.js"),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),c=n("./node_modules/xml2js/lib/xml2js.js"),d=n("./node_modules/moment/moment.js"),f=a(d),m=n("./src/constants/index.js"),p=n("./src/constants/documents.json"),E=a(p),h=n("./src/scripts/fileTypes.js"),v=(0,h.getFileTypes)(),_=(t.autoImport=function(){var e=r(regeneratorRuntime.mark(function e(){var t,n,a,r,l,o,s,c,d,f,p,E,h,v,g,A,O,T,D,x,R,N,j,k,w,L,P,M,I,F,U,q,z,V,B,Y,H,W,G,Q,K,Z,J,X;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("root").dataset.cozyDomain,n=t.substring(0,t.indexOf(".")),a="homebook."+n+".zip",r=void 0,e.prev=4,e.next=7,cozy.client.files.statByPath(m.ROOT_PATH+"/"+a);case 7:r=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",0);case 13:return e.next=15,i.getTemp();case 15:return l=e.sent,e.next=18,i.createFolder("unzip");case 18:return o=e.sent,e.next=21,cozy.client.jobs.create("unzip",{zip:r._id,destination:o._id});case 21:return s=e.sent,e.prev=22,e.next=25,b(s._id);case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(22),console.error("Error in wait for job",e.t1);case 30:return e.next=32,cozy.client.files.statById(o._id);case 32:if(c=e.sent,d=c.relations("contents"),!(d.lenght<1)){e.next=36;break}throw Error("No file unziped");case 36:return f=d.shift()._id,e.next=39,cozy.client.files.statById(f);case 39:p=e.sent,E=p.relations("contents").map(function(e){return{id:e._id,name:u(e.attributes.name).toLowerCase()}}),h=!0,v=!1,g=void 0,e.prev=44,A=E[Symbol.iterator]();case 46:if(h=(O=A.next()).done){e.next=178;break}if(T=O.value,0!==T.name.indexOf("xml_rset")){e.next=150;break}return e.prev=49,e.next=52,cozy.client.files.getDownloadLinkById(T.id);case 52:return D=e.sent,e.next=55,cozy.client.fullpath(D);case 55:return x=e.sent,e.next=58,fetch(x);case 58:return R=e.sent,e.next=61,R.text();case 61:return N=e.sent,e.next=64,S(N);case 64:j=e.sent,k=!0,w=!1,L=void 0,e.prev=68,P=j.contacts[Symbol.iterator]();case 70:if(k=(M=P.next()).done){e.next=77;break}return I=M.value,e.next=74,cozy.client.data.create(m.DOCTYPE_CONTACTS,I);case 74:k=!0,e.next=70;break;case 77:e.next=83;break;case 79:e.prev=79,e.t2=e.catch(68),w=!0,L=e.t2;case 83:e.prev=83,e.prev=84,!k&&P.return&&P.return();case 86:if(e.prev=86,!w){e.next=89;break}throw L;case 89:return e.finish(86);case 90:return e.finish(83);case 91:return e.next=93,cozy.client.data.create(m.DOCTYPE_HOMEDATA,j.homeData);case 93:F=!0,U=!1,q=void 0,e.prev=96,z=j.equipments[Symbol.iterator]();case 98:if(F=(V=z.next()).done){e.next=105;break}return B=V.value,e.next=102,cozy.client.data.create(m.DOCTYPE_EQUIPMENTS,B);case 102:F=!0,e.next=98;break;case 105:e.next=111;break;case 107:e.prev=107,e.t3=e.catch(96),U=!0,q=e.t3;case 111:e.prev=111,e.prev=112,!F&&z.return&&z.return();case 114:if(e.prev=114,!U){e.next=117;break}throw q;case 117:return e.finish(114);case 118:return e.finish(111);case 119:Y=!0,H=!1,W=void 0,e.prev=122,G=j.diagnoses[Symbol.iterator]();case 124:if(Y=(Q=G.next()).done){e.next=131;break}return K=Q.value,e.next=128,cozy.client.data.create(m.DOCTYPE_DIAGNOSIS,K);case 128:Y=!0,e.next=124;break;case 131:e.next=137;break;case 133:e.prev=133,e.t4=e.catch(122),H=!0,W=e.t4;case 137:e.prev=137,e.prev=138,!Y&&G.return&&G.return();case 140:if(e.prev=140,!H){e.next=143;break}throw W;case 143:return e.finish(140);case 144:return e.finish(137);case 145:e.next=150;break;case 147:e.prev=147,e.t5=e.catch(49),console.error(e.t5);case 150:if(null===(Z=_(T.name))){e.next=168;break}if(null!==(J=y(Z))){e.next=155;break}throw Error("No path for "+Z);case 155:return e.next=157,cozy.client.files.statByPath(J);case 157:return X=e.sent,e.prev=158,e.next=161,cozy.client.files.updateAttributesById(T.id,{dir_id:X._id,tags:[Z]});case 161:console.log("Move file",T,J,Z),e.next=166;break;case 164:e.prev=164,e.t6=e.catch(158);case 166:e.next=175;break;case 168:if("tradimaison"!==T.name){e.next=174;break}return console.log("Detect tradimaison"),e.next=172,C("tradimaisons");case 172:e.next=175;break;case 174:console.log("Unknown file",T);case 175:h=!0,e.next=46;break;case 178:e.next=184;break;case 180:e.prev=180,e.t7=e.catch(44),v=!0,g=e.t7;case 184:e.prev=184,e.prev=185,!h&&A.return&&A.return();case 187:if(e.prev=187,!v){e.next=190;break}throw g;case 190:return e.finish(187);case 191:return e.finish(184);case 192:return e.next=194,cozy.client.files.trashById(r._id);case 194:return e.next=196,cozy.client.files.destroyById(r._id);case 196:return e.abrupt("return",1);case 197:case"end":return e.stop()}},e,void 0,[[4,10],[22,27],[44,180,184,192],[49,147],[68,79,83,91],[84,,86,90],[96,107,111,119],[112,,114,118],[122,133,137,145],[138,,140,144],[158,164],[185,,187,191]])}));return function(){return e.apply(this,arguments)}}(),function(e){var t=!0,n=!1,a=void 0;try{for(var r,u=E.default[Symbol.iterator]();!(t=(r=u.next()).done);t=!0){var l=r.value;if(-1!==e.indexOf(l.name))return l.tag}}catch(e){n=!0,a=e}finally{try{!t&&u.return&&u.return()}finally{if(n)throw a}}return null}),y=function(e){var t=!0,n=!1,a=void 0;try{for(var r,u=v[Symbol.iterator]();!(t=(r=u.next()).done);t=!0){var l=r.value;if(l.key===e)return l.location}}catch(e){n=!0,a=e}finally{try{!t&&u.return&&u.return()}finally{if(n)throw a}}return null},b=function(){var e=r(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cozy.client.fetchJSON("GET","/jobs/"+t);case 2:if(n=e.sent,"done"!==(a=n.attributes.state)){e.next=6;break}return e.abrupt("return");case 6:if("errored"!==a){e.next=8;break}throw Error("Job fail",n.attributes.error);case 8:return e.abrupt("return",new Promise(function(e,n){setTimeout(function(){b(t).then(function(){return e()})},10)}));case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=r(regeneratorRuntime.mark(function e(t){var n,a,r,u,l,o,s,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,e.next=4,cozy.client.data.defineIndex(m.DOCTYPE_META,["name"]);case 4:return a=e.sent,e.next=7,cozy.client.data.query(a,{selector:{name:"actors"}});case 7:n=e.sent,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:r=!0,u=!1,l=void 0,e.prev=15,o=n[Symbol.iterator]();case 17:if(r=(s=o.next()).done){e.next=24;break}return i=s.value,e.next=21,cozy.client.data.delete(m.DOCTYPE_META,i);case 21:r=!0,e.next=17;break;case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(15),u=!0,l=e.t1;case 30:e.prev=30,e.prev=31,!r&&o.return&&o.return();case 33:if(e.prev=33,!u){e.next=36;break}throw l;case 36:return e.finish(33);case 37:return e.finish(30);case 38:return e.next=40,cozy.client.data.create(m.DOCTYPE_META,{name:"actors",actor:t});case 40:case"end":return e.stop()}},e,void 0,[[1,10],[15,26,30,38],[31,,33,37]])}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=r(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return{way:e.ligne,code:e.code_postal,city:e.ville}},e.abrupt("return",new Promise(function(e,a){(0,c.parseString)(t,{strict:!0,async:!0,explicitArray:!1},function(t,r){if(null!==t)return a(t);var u={contacts:[],homeData:{name:"Données importées",constructionDate:null,address:null,livingArea:null},equipments:[],diagnoses:[]},l=(0,o.default)("projet.Datas_Comp.donnees_generales")(r);l&&(l.BET&&u.contacts.push({company:l.BET.nom,telephones:[{type:"FIXE",phone:l.BET.tel}],address:n(l.BET.adresse)}),l.bureau_controle&&u.contacts.push({company:l.bureau_controle.nom,telephones:[{type:"FIXE",phone:l.bureau_controle.tel}],address:n(l.bureau_controle.adresse)}),l.maitre_oeuvre&&u.contacts.push({company:l.maitre_oeuvre.nom,telephones:[{type:"FIXE",phone:l.maitre_oeuvre.tel}],address:n(l.maitre_oeuvre.adresse)}),l.maitre_ouvrage&&u.contacts.push({lastName:l.maitre_ouvrage.nom,telephones:[{type:"FIXE",phone:l.maitre_ouvrage.tel}],address:n(l.maitre_ouvrage.adresse)}));var s=(0,o.default)("projet.Entree_Projet.Date")(r);s&&(u.homeData.constructionDate=(0,f.default)(s,"YYYYMMDD").format("DD/MM/YYYY")),u.homeData.address=n((0,o.default)("projet.Datas_Comp.donnees_generales.operation.adresse")(r)),u.homeData.livingArea=(0,o.default)("projet.Datas_Comp.batiment_collection.batiment.zone_collection.zone.O_SHAB")(r);var i=(0,o.default)("projet.Entree_Projet.Batiment_Collection.Batiment.Zone_Collection.Zone")(r),c=(0,o.default)("projet.Entree_Projet.Generation_Collection.Generation.Generateur_Collection.Generateur_Combustion.Name")(r);c&&u.equipments.push({type:"Chaudière à gaz",name:c}),c=(0,o.default)("projet.Entree_Projet.Batiment_Collection.Batiment.PV_install_Collection.PV_install.Name")(r),c&&u.equipments.push({type:"Installation photovoltaïques",name:c}),c=(0,o.default)("Emetteur_Collection.Emetteur.Name")(i),c&&u.equipments.push({type:"Radiateurs électriques",name:c}),c=(0,o.default)("Emetteur_ECS_Collection.Emetteur_ECS.Name")(i),c&&u.equipments.push({type:"Eau chaude sanitaire électrique",name:c}),c=(0,o.default)("Entree_Air_Collection.Entree_Air.Name")(i),c&&u.equipments.push({type:"Ventilation naturelle",name:c}),c=(0,o.default)("Eclairage_Collection.Eclairage.Name")(i),c&&u.equipments.push({name:c}),(c=(0,o.default)("projet.Entree_Projet.Batiment_Collection.Batiment.Zone_Collection.Zone.Ventilation_Mecanique_Collection.Ventilation_Mecanique.Name")(r))&&u.equipments.push({type:"VMC",name:c});var d={bbio:null,cep:null,tic:null,date:null,CO2emission:"",DPEEnergyClass:"",carbonClass:"",data:{},equipmentData:{},expirationDate:"",name:"DPE initiale",realEnergyConsommation:"",type:"DPE"};d.bbio=(0,o.default)("projet.Sortie_Projet.Sortie_Batiment_B_Collection.Sortie_Batiment_B.O_Bbio_pts_annuel")(r),d.cep=(0,o.default)("projet.Sortie_Projet.Sortie_Batiment_C_Collection.Sortie_Batiment_C.O_Cep_annuel")(r),d.tic=(0,o.default)("projet.Sortie_Projet.Sortie_Batiment_E_Collection.Sortie_Batiment_E.Sortie_Zone_E_Collection.Sortie_Zone_E.Sortie_Groupe_E_Collection.Sortie_Groupe_E.O_Tic")(r),s=(0,o.default)("projet.Datas_Comp.donnees_generales.BET.date_etude")(r),s&&(d.date=(0,f.default)(s,"YYYY-MM-DD").format("DD/MM/YYYY")),u.diagnoses.push(d),e(u)})}));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},"./src/scripts/InitKonnector.js":function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var r=t.InitKonnector=function(){var e=a(regeneratorRuntime.mark(function e(){var t,n,a,r,u,l,o,s,i,c,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cozy.client.fetchJSON("GET","/jobs/triggers");case 2:if(t=e.sent,n=t.filter(function(e){return"konnector"===e.attributes.worker}),1!==n.length){e.next=8;break}return e.abrupt("return","OK");case 8:if(!(n.length>1)){e.next=41;break}console.warn("More than 1 konnector Trigger set",n),a=!0,r=!1,u=void 0,e.prev=13,l=n[Symbol.iterator]();case 15:if(a=(o=l.next()).done){e.next=27;break}return s=o.value,e.prev=17,e.next=20,cozy.client.fetchJSON("DELETE","/jobs/triggers/"+s._id);case 20:e.next=24;break;case 22:e.prev=22,e.t0=e.catch(17);case 24:a=!0,e.next=15;break;case 27:e.next=33;break;case 29:e.prev=29,e.t1=e.catch(13),r=!0,u=e.t1;case 33:e.prev=33,e.prev=34,!a&&l.return&&l.return();case 36:if(e.prev=36,!r){e.next=39;break}throw u;case 39:return e.finish(36);case 40:return e.finish(33);case 41:return i={attributes:{type:"@cron",arguments:"0 */8 * * *",worker:"konnector",worker_arguments:{konnector:"homebook-news"}}},e.prev=42,e.next=45,cozy.client.fetchJSON("POST","/jobs/triggers",{data:i});case 45:c=e.sent,e.next=51;break;case 48:e.prev=48,e.t2=e.catch(42),console.error("Error in trigger creation",e.t2);case 51:return e.next=53,cozy.client.jobs.create("konnector",{konnector:"homebook-news"});case 53:return d=e.sent,console.log("Run job to update News",d._id),e.abrupt("return","NEW");case 56:case"end":return e.stop()}},e,void 0,[[13,29,33,41],[17,22],[34,,36,40],[42,48]])}));return function(){return e.apply(this,arguments)}}();t.default=r},"./src/scripts/TempFile.js":function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.getTemp=t.createFolder=t.create=t.deleteIfExist=t.deleteById=t.exist=void 0;var r=n("./src/constants/index.js"),u=(t.exist=function(){var e=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cozy.client.files.statByPath("/tmp/"+t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,void 0,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),t.deleteById=function(){var e=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cozy.client.files.trashById(t);case 3:return e.next=5,cozy.client.files.destroyById(t);case 5:return e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,void 0,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),t.deleteIfExist=function(){var e=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cozy.client.files.statByPath("/tmp/"+t);case 3:return n=e.sent,e.next=6,cozy.client.files.trashById(n._id);case 6:return e.next=8,cozy.client.files.destroyById(n._id);case 8:return e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,void 0,[[0,11]])}));return function(t){return e.apply(this,arguments)}}()),l=(t.create=function(){var e=a(regeneratorRuntime.mark(function e(t,n){var a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return a=e.sent,e.next=5,cozy.client.files.create(t,{name:n,dirID:a._id});case 5:return r=e.sent,r.path="/tmp/"+n,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.createFolder=function(){var e=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return n=e.sent,e.next=5,u(t);case 5:return e.next=7,cozy.client.files.createDirectory({name:t,dirID:n._id});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getTemp=function(){var e=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,e.prev=1,e.next=4,cozy.client.files.statByPath("/tmp");case 4:t=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,cozy.client.files.createDirectory({name:"tmp",dirID:r.COZY_ROOT_ID});case 11:t=e.sent;case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}},e,void 0,[[1,7]])}));return function(){return e.apply(this,arguments)}}())},"./src/scripts/XMLDataFile.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.exportData=t.importData=void 0;var u=n("./node_modules/xmlbuilder/lib/index.js"),l=a(u),o=n("./node_modules/xml2js/lib/xml2js.js"),s=a(o),i=n("./src/scripts/TempFile.js"),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),d=n("./src/constants/index.js"),f=n("./src/tools/index.js"),m=(t.importData=function(){var e=r(regeneratorRuntime.mark(function e(t){var n,a,r,u,l,o,i,d,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new s.default.Parser,e.next=3,c.getTemp();case 3:return a=e.sent,e.next=6,c.createFolder("unzip");case 6:return r=e.sent,e.next=9,cozy.client.jobs.create("unzip",{zip:t._id,destination:r._id});case 9:return u=e.sent,e.prev=10,e.next=13,waitForJob(u._id);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.error("Error in wait for job",e.t0);case 18:return e.next=20,cozy.client.files.statById(r._id);case 20:if(l=e.sent,o=l.relations("contents"),!(o.lenght<1)){e.next=24;break}throw Error("No file unziped");case 24:if(i=o.shift(),"homebook"===i.name){e.next=27;break}return e.abrupt("return",console.error("Error: the zip in not a homebook exported file"));case 27:return e.next=29,cozy.client.files.statById(i._id);case 29:d=e.sent,f=d.relations("contents");case 31:case"end":return e.stop()}},e,void 0,[[10,15]])}));return function(t){return e.apply(this,arguments)}}(),t.exportData=function(){var e=r(regeneratorRuntime.mark(function e(){var t,n,a,r,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return t=e.sent,n=t.end({pretty:!0,indent:"  ",newline:"\n",allowEmpty:!0}),a=new Blob([n],{type:"text/plain;charset=utf-8"}),e.next=7,c.deleteIfExist("homebook.xml");case 7:return e.next=9,c.create(a,"homebook.xml");case 9:return r=e.sent,e.next=12,cozy.client.files.getArchiveLinkByPaths([d.ROOT_PATH+"/",r.path],"homebook");case 12:return u=e.sent,e.next=15,cozy.client.fullpath(u);case 15:return l=e.sent,e.abrupt("return",l);case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),p=function(){var e=r(regeneratorRuntime.mark(function e(){var t,n,a,r,u,o,s,i,c,m,p,E,S,g,A,O,T,D,x,R,N,j,k,w,L,P,M,I,F,U,q,z,V,B,Y,H,W,G,Q,K,Z,J,X,$,ee,te,ne,ae;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.default.create("homebook").dec("1.0","UTF-8").ins("xml-stylesheet",'type="text/xsl" href="homebook.xsl"'),e.next=3,(0,f.getDataElements)(d.DOCTYPE_CONTACTS);case 3:for(n=e.sent,a=t.ele("contacts"),r=!0,u=!1,o=void 0,e.prev=8,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)c=i.value,m=C(c),a.importDocument(m);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),u=!0,o=e.t0;case 16:e.prev=16,e.prev=17,!r&&s.return&&s.return();case 19:if(e.prev=19,!u){e.next=22;break}throw o;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.next=26,(0,f.getDataElements)(d.DOCTYPE_HOMEDATA);case 26:return p=e.sent,E=p[0],void 0===E?t.ele("homedata"):(S=b(E),t.importDocument(S)),e.next=31,(0,f.getDataElements)(d.DOCTYPE_EQUIPMENTS);case 31:for(g=e.sent,A=t.ele("equipments"),O=!0,T=!1,D=void 0,e.prev=36,x=g[Symbol.iterator]();!(O=(R=x.next()).done);O=!0)N=R.value,m=y(N),A.importDocument(m);e.next=44;break;case 40:e.prev=40,e.t1=e.catch(36),T=!0,D=e.t1;case 44:e.prev=44,e.prev=45,!O&&x.return&&x.return();case 47:if(e.prev=47,!T){e.next=50;break}throw D;case 50:return e.finish(47);case 51:return e.finish(44);case 52:return e.next=54,(0,f.getDataElements)(d.DOCTYPE_WORKS);case 54:for(j=e.sent,k=t.ele("works"),w=!0,L=!1,P=void 0,e.prev=59,M=j[Symbol.iterator]();!(w=(I=M.next()).done);w=!0)F=I.value,U=_(F),k.importDocument(U);e.next=67;break;case 63:e.prev=63,e.t2=e.catch(59),L=!0,P=e.t2;case 67:e.prev=67,e.prev=68,!w&&M.return&&M.return();case 70:if(e.prev=70,!L){e.next=73;break}throw P;case 73:return e.finish(70);case 74:return e.finish(67);case 75:return e.next=77,(0,f.getDataElements)(d.DOCTYPE_MAINTENANCES);case 77:for(q=e.sent,z=t.ele("maintenances"),V=!0,B=!1,Y=void 0,e.prev=82,H=q[Symbol.iterator]();!(V=(W=H.next()).done);V=!0)G=W.value,Q=v(G),z.importDocument(Q);e.next=90;break;case 86:e.prev=86,e.t3=e.catch(82),B=!0,Y=e.t3;case 90:e.prev=90,e.prev=91,!V&&H.return&&H.return();case 93:if(e.prev=93,!B){e.next=96;break}throw Y;case 96:return e.finish(93);case 97:return e.finish(90);case 98:return e.next=100,(0,f.getDataElements)(d.DOCTYPE_DIAGNOSIS);case 100:for(K=e.sent,Z=t.ele("diagnoses"),J=!0,X=!1,$=void 0,e.prev=105,ee=K[Symbol.iterator]();!(J=(te=ee.next()).done);J=!0)ne=te.value,ae=h(ne),Z.importDocument(ae);e.next=113;break;case 109:e.prev=109,e.t4=e.catch(105),X=!0,$=e.t4;case 113:e.prev=113,e.prev=114,!J&&ee.return&&ee.return();case 116:if(e.prev=116,!X){e.next=119;break}throw $;case 119:return e.finish(116);case 120:return e.finish(113);case 121:return e.abrupt("return",t);case 122:case"end":return e.stop()}},e,void 0,[[8,12,16,24],[17,,19,23],[36,40,44,52],[45,,47,51],[59,63,67,75],[68,,70,74],[82,86,90,98],[91,,93,97],[105,109,113,121],[114,,116,120]])}));return function(){return e.apply(this,arguments)}}(),E=function(e){return l.default.create(e)},h=function(e){var t={diagnosis:{type:e.type,description:e.description,date:e.date,expirationDate:e.expirationDate,DPEEnergyClass:e.DPEEnergyClass,realEnergyConsommation:e.realEnergyConsommation,carbonClass:e.carbonClass,CO2emission:e.CO2emission,cep:e.cep,bbio:e.bbio,tic:e.tic,data:e.data,equipmentData:e.equipmentData}};return E(t)},v=function(e){var t={maintenance:{name:e.name,description:e.description,contractId:e.contractId,date:e.date,deadline:e.deadline,contract:e.conract}};return E(t)},_=function(e){var t={work:{description:e.description,roomNames:{roomName:e.roomNames},equipmentNames:{equipmentName:e.equipmentNames},craftsman:e.craftsman,cost:e.cost,date:e.date,contract:e.conract,satisfaction:e.satisfaction,status:e.status,commentary:e.commentary}};return E(t)},y=function(e){var t={equipment:{type:e.type,buyDate:e.buyDate,model:e.model,brand:e.brand,installDate:e.installDate,guaranteeEndDate:e.guaranteeEndDate,lastMaintenanceDate:e.lastMaintenanceDate,energyClass:e.energyClass}};return E(t)},b=function(e){var t={homeData:{type:e.type,status:e.status,constructionDate:e.constructionDate,address:e.address,email:e.email,phone:e.telephones&&e.telephones.map(function(e){return{"@type":e.type||"default","#text":e.phone}}),livingArea:e.livingArea,roomsCount:e.roomsCount,guarantees:{guarantee:e.guarantees},rooms:{room:e.rooms}}};return E(t)},C=function(e){var t={contact:{lastname:e.lastName,firstname:e.firstName,address:e.address,phone:e.telephones&&e.telephones.map(function(e){return{"@type":e.type||"default","#text":e.phone}}),email:e.email,company:e.company,commentary:e.commentary}};return E(t)};t.default=m},"./src/scripts/confirm.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.alert=void 0;var r=n("./node_modules/react/react.js"),u=a(r),l=n("./node_modules/react-dom/index.js"),o=a(l),s=function(){return document.body.appendChild(document.createElement("div"))},i=function(e){return new Promise(function(t,n){var a=s(),r=function(){o.default.unmountComponentAtNode(a),a.remove(),console.log("ICI"),n()},l=function(){o.default.unmountComponentAtNode(a),a.remove(),t()};o.default.render(u.default.cloneElement(e,{confirm:l,abort:r}),a)})};t.default=i;t.alert=function(e){var t=s(),n=function(){o.default.unmountComponentAtNode(t),t.remove()};o.default.render(u.default.cloneElement(e,{close:n}),t)}},"./src/scripts/cozyRecalls.js":function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.getJobs=t.getTriggers=t.trigger=t.send=t.deleteTrigger=void 0;var r=n("./node_modules/moment/moment.js"),u=function(e){return e&&e.__esModule?e:{default:e}}(r),l=function(){var e=a(regeneratorRuntime.mark(function e(t){var n,a,r,u,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cozy.client.authorize();case 2:return n=e.sent,e.next=5,cozy.client.fullpath(t);case 5:return a=e.sent,r={},r["Content-Type"]="application/json",r.Accept="application/json",r.Authorization=n.token.toAuthHeader(),u={headers:r,method:l,credentials:"include"},"POST"===l&&(o.data.type="io.cozy.jobs",u.body=JSON.stringify(o)),e.abrupt("return",fetch(a,u));case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o=(t.deleteTrigger=function(e){return l("/jobs/triggers/"+e,"DELETE").then(function(e){return e.text()})},t.send=function(e){if(void 0===e)return Promise.reject("No arguments");var t=((0,u.default)(e.date,"DD/MM/YYYY").toDate(),s(e.deadline,e.recallName,e.username));return l("/jobs/queue/sendmail","POST",t).then(function(e){return e.json()})},t.trigger=function(e){if(void 0===e)return Promise.reject("No arguments");var t=(0,u.default)(e.date,"DD/MM/YYYY").toDate(),n=o(t,e.deadline,e.recallName,e.username);return l("/jobs/triggers","POST",n).then(function(e){return e.json()})},t.getTriggers=function(e){return e=e?"/"+e:"",l("/jobs/triggers"+e).then(function(e){return e.json()})},t.getJobs=function(){return l("/jobs/queue/sendmail").then(function(e){return e})},function(e,t,n,a){if(!(e&&e instanceof Date))throw Error("Bad date argument");return{data:{attributes:{type:"@at",arguments:e.toJSON(),worker:"sendmail",worker_arguments:i(t,n,a),options:{}}}}}),s=function(e,t,n){return{data:{attributes:{options:{},arguments:i(e,t,n)}}}},i=function(e,t,n){return{mode:"noreply",subject:"Rappel Homebook",parts:[{type:"text/plain",body:c(e,t,n)}]}},c=function(e,t){return"Bonjour "+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")+",\n\nHomebook vous previent que le rappel "+t+" a pour échéance le "+e+".\n\nCordialement,\nHomebook"}},"./src/scripts/dataFields.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getInfosFromDoctype=t.getInfosFromSlug=t.getInfosFromPath=t.getFields=t.getMaintenanceFields=t.getWorkFields=t.getEquipmentFields=t.getHomeFields=t.getDiagnosisFields=t.getContactFields=void 0;var r=n("./src/constants/data/contact.json"),u=a(r),l=n("./src/constants/data/diagnosis.json"),o=a(l),s=n("./src/constants/data/home.json"),i=a(s),c=n("./src/constants/data/work.json"),d=a(c),f=n("./src/constants/data/maintenance.json"),m=a(f),p=n("./src/constants/data/equipment.json"),E=a(p),h=n("./src/constants/index.js");t.getContactFields=function(){return u.default},t.getDiagnosisFields=function(){return o.default},t.getHomeFields=function(){return i.default},t.getEquipmentFields=function(){return E.default},t.getWorkFields=function(){return d.default},t.getMaintenanceFields=function(){return m.default},t.getFields=function(e){switch(e){case h.DOCTYPE_DIAGNOSIS:return o.default;case h.DOCTYPE_EQUIPMENTS:return E.default;case h.DOCTYPE_HOMEDATA:return i.default;case h.DOCTYPE_MAINTENANCES:return m.default;case h.DOCTYPE_WORKS:return d.default}},t.getInfosFromPath=function(e){var t=!0,n=!1,a=void 0;try{for(var r,u=h.DATA_LIST[Symbol.iterator]();!(t=(r=u.next()).done);t=!0){var l=r.value;if(l.path===e)return l}}catch(e){n=!0,a=e}finally{try{!t&&u.return&&u.return()}finally{if(n)throw a}}},t.getInfosFromSlug=function(e){var t=!0,n=!1,a=void 0;try{for(var r,u=h.DATA_LIST[Symbol.iterator]();!(t=(r=u.next()).done);t=!0){var l=r.value;if(l.slug===e)return l}}catch(e){n=!0,a=e}finally{try{!t&&u.return&&u.return()}finally{if(n)throw a}}},t.getInfosFromDoctype=function(e){var t=!0,n=!1,a=void 0;try{for(var r,u=h.DATA_LIST[Symbol.iterator]();!(t=(r=u.next()).done);t=!0){var l=r.value;if(l.doctype===e)return l}}catch(e){n=!0,a=e}finally{try{!t&&u.return&&u.return()}finally{if(n)throw a}}}},"./src/scripts/fileTypes.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDisplayName=t.getTypesByGroup=t.getFileTypes=void 0;var a=n("./src/constants/types.json"),r=function(e){return e&&e.__esModule?e:{default:e}}(a),u=n("./src/constants/index.js");t.getFileTypes=function(){var e=[],t=!0,n=!1,a=void 0;try{for(var l,o=r.default[Symbol.iterator]();!(t=(l=o.next()).done);t=!0){var s=l.value,i=!0,c=!1,d=void 0;try{for(var f,m=s.types[Symbol.iterator]();!(i=(f=m.next()).done);i=!0){var p=f.value;p.location=u.ROOT_PATH+s.location,e.push(p)}}catch(e){c=!0,d=e}finally{try{!i&&m.return&&m.return()}finally{if(c)throw d}}}}catch(e){n=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}return e},t.getTypesByGroup=function(){return r.default},t.getDisplayName=function(e){var t=!0,n=!1,a=void 0;try{for(var u,l=r.default[Symbol.iterator]();!(t=(u=l.next()).done);t=!0){var o=u.value,s=!0,i=!1,c=void 0;try{for(var d,f=o.types[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var m=d.value;if(m.key===e)return m.name}}catch(e){i=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(i)throw c}}}}catch(e){n=!0,a=e}finally{try{!t&&l.return&&l.return()}finally{if(n)throw a}}}},"./src/scripts/initial.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./src/scripts/AutoImport.js"),r=n("./src/scripts/InitKonnector.js");t.default=function(){(0,a.autoImport)().then(function(e){console.log("Auto import OK",e),1===e&&location.reload()}).catch(function(e){return console.error("Auto import fail",e)}),(0,r.InitKonnector)().then(function(e){return console.log("Initialize Konnector",e)}).catch(function(e){return console.error("Initialize Konnector fail",e)})}},"./src/scripts/onboarding.js":function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.markAsShown=t.isAlreadyShown=t.getMeta=void 0;var r=n("./src/constants/index.js"),u=t.getMeta=function(){var e=a(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cozy.client.data.defineIndex(r.DOCTYPE_META,["name"]);case 3:return t=e.sent,n=cozy.client.data.query(t,{selector:{name:"onboarding"}}),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}},e,void 0,[[0,8]])}));return function(){return e.apply(this,arguments)}}();t.isAlreadyShown=function(){var e=a(regeneratorRuntime.mark(function e(){var t,n,a,l,o,s,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:if(t=e.sent,0!==t.length){e.next=7;break}return e.abrupt("return",!1);case 7:if(1!==t.length){e.next=11;break}return e.abrupt("return",t[0].value);case 11:n=t.shift(),a=!0,l=!1,o=void 0,e.prev=15,s=t[Symbol.iterator]();case 17:if(a=(i=s.next()).done){e.next=24;break}return c=i.value,e.next=21,cozy.client.data.delete(r.DOCTYPE_META,c);case 21:a=!0,e.next=17;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(15),l=!0,o=e.t0;case 30:e.prev=30,e.prev=31,!a&&s.return&&s.return();case 33:if(e.prev=33,!l){e.next=36;break}throw o;case 36:return e.finish(33);case 37:return e.finish(30);case 38:return e.abrupt("return",n);case 39:case"end":return e.stop()}},e,void 0,[[15,26,30,38],[31,,33,37]])}));return function(){return e.apply(this,arguments)}}(),t.markAsShown=function(){var e=a(regeneratorRuntime.mark(function e(){var t,n,a,l,o,s,i,c=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:t=e.sent,n=!0,a=!1,l=void 0,e.prev=6,o=t[Symbol.iterator]();case 8:if(n=(s=o.next()).done){e.next=15;break}return i=s.value,e.next=12,cozy.client.data.delete(r.DOCTYPE_META,i);case 12:n=!0,e.next=8;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),a=!0,l=e.t0;case 21:e.prev=21,e.prev=22,!n&&o.return&&o.return();case 24:if(e.prev=24,!a){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.next=31,cozy.client.data.create(r.DOCTYPE_META,{name:"onboarding",value:c});case 31:case"end":return e.stop()}},e,void 0,[[6,17,21,29],[22,,24,28]])}));return function(){return e.apply(this,arguments)}}()},"./src/store/index.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/redux/es/index.js"),u=n("./src/tracker.js"),l=n("./node_modules/redux-thunk/lib/index.js"),o=a(l),s=n("./node_modules/redux-logger/dist/redux-logger.js"),i=a(s),c=n("./src/reducers/index.js"),d=a(c),f=function(){var e=[o.default,i.default];return(0,u.shouldEnableTracking)()&&(0,u.getTracker)()&&e.push((0,u.createTrackerMiddleware)()),(0,r.createStore)(d.default,(0,r.compose)(r.applyMiddleware.apply(void 0,e)))};t.default=f},"./src/styles/App.sass":function(e,t){e.exports={app:"main__3svTAjG",container:"main__2W5H6DW",page:"main__MJPXvQh"}},"./src/styles/ConfirmModal.sass":function(e,t){e.exports={main:"main__3pv0tKd",content:"main__oTcCMPj",actions:"main__3uVdkmq"}},"./src/styles/ContactRecallModal.sass":function(e,t){e.exports={main:"main__-14fkm4",header:"main__28k7fuQ",content:"main__cHEnE0Y",edition:"main__3MimC6q main__-14fkm4",group:"main__1BLxtfV",inline:"main__1vqdb71",row:"main__KMPWzuA"}},"./src/styles/Contacts.sass":function(e,t){e.exports={letter:"main__3u2tF-N"}},"./src/styles/DataTable.sass":function(e,t){e.exports={main:"main__3O-K8xY",group:"main__3mtm93p",title:"main__3NWQcWO",item:"main__2W28N3U"}},"./src/styles/DirectoryPicker.sass":function(e,t){e.exports={main:"main__2J43lkU",container:"main__2ak5yop",name:"main__3bIRD20",selected:"main__1EkEs-X",icon:"main__2wYnh-1",content:"main__2PNYpLd"}},"./src/styles/Documents.sass":function(e,t){e.exports={breadcrums:"main__grwUWFc"}},"./src/styles/ElementList.sass":function(e,t){e.exports={list:"main__3TEqgoo",content:"main__3CeO2gN",checkbox:"main__1IqOZ2l",viewList:"main__2W9mpxX",document:"main__1JV2S3V",viewGrid:"main__3WsmiQU",selected:"main__2-L1ON-",name:"main__2nQOltw",contact:"main__J6YLRfQ",date:"main__2iD0ttO",dateText:"main__gZHa6oa"}},"./src/styles/Footer.sass":function(e,t){e.exports={main:"main__3ovLQP-",content:"main__37qY8C-"}},"./src/styles/Gauge.sass":function(e,t){e.exports={main:"main__ofekOKn",gauge:"main__yPb_UVw",title:"main__vgdOYYr",loader:"main__1ALf4-x",bar:"main__Z3KcCu4",list:"main__3Ed48b6"}},"./src/styles/ImporterModal.sass":function(e,t){e.exports={main:"main__UcziIVu",header:"main__1pmB95T",content:"main__3bw__JO",footer:"main__15IOCI4",dropzone:"main___4oVXqr",active:"main__1s_c4NN",message:"main__2mUNzch",doc:"main__2F9XVQJ",image:"main__3PlukMF",docName:"main__VdOLhj8",select:"main__2_KFL-y"}},"./src/styles/Loader.sass":function(e,t){e.exports={loader:"main__3oQ1FKj"}},"./src/styles/Main.sass":function(e,t){e.exports={main:"main__2PFFSaI"}},"./src/styles/Modal.sass":function(e,t){e.exports={modal:"main__1nLqP2l",popup:"main__3-GCqfo",header:"main__JHhrySh",content:"main__BjP9V9C",openActive:"main__3LC9Hrw",closeActive:"main__1RpdxzL",error:"main__mItkyDz"}},"./src/styles/Navigation.sass":function(e,t){e.exports={main:"main__18QynQg",nav:"main__3vIr2dw",list:"main__1s_fawV",button:"main__3aQBxq2",active:"main__1sZCTbE"}},"./src/styles/Onboarding.sass":function(e,t){e.exports={container:"main__1ajlB1D",background:"main__2v369sa",panel:"main__2DJkxV_",logo:"main__3Ebi-0U",sliderTitle:"main__N6ViV7G",sliderText:"main__R684Pc1",button:"main__34a0xOP",dot:"main__2FpaVKO",active:"main__3j2GOCl",close:"main__oaSyyi-"}},"./src/styles/Page.sass":function(e,t){e.exports={main:"main__1pYojXV",flex:"main__28Vg_jG",header:"main__1Ozy1Vk",row1:"main__1-uPPcn",row2:"main__1F-3peC",simpleList:"main__2H07KHW",actions:"main__1j4nIkL main__2H07KHW",options:"main__2YYsrM7 main__2H07KHW",headline:"main__12ij7nY",title:"main__MoztXUd main__12ij7nY",subtitle:"main__10YUF6i main__12ij7nY",content:"main__p72DAA6",back:"main__3YoKAZ1"}},"./src/styles/Preferences.sass":function(e,t){e.exports={title:"main__Vq_cI2O",article:"main__qHLujUF"}},"./src/styles/Recalls.sass":function(e,t){e.exports={calendar:"main__qTxiXrd"}},"./src/styles/ToolBoxOptions.sass":function(e,t){e.exports={toolBox:"main__3mXeRjU",triangle:"main__1UEAhEs",content:"main__1GBzk5r",active:"main__202ApM_"}},"./src/styles/buttons.scss":function(e,t){e.exports={button:"main__2Pc5skE",positive:"main__22b7nGI",light:"main__23JmHcl",assertive:"main__utAurO8",stable:"main__2sFmQGG",default:"main__fJ7Wm8k",clear:"main__2QcKfEd",icon:"main__1t6_Ak-",text:"main__30hO-5e"}},"./src/styles/help.sass":function(e,t){e.exports={tab:"main__2aePkZf",header:"main__1MkEkvO",title:"main__1Yq_Qv0"}},"./src/styles/pdf.sass":function(e,t){e.exports={previous:"main__31hI6PZ",next:"main__JDpfbfZ",zoom:"main__26q9qnA"}},"./src/tools/index.js":function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,u){try{var l=t[r](u),o=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.getDataElements=t.forceFileDownload=t.createOptionsFromArray=t.findParentPath=t.createFakePath=t.exctractReelPath=t.promiseTimeout=t.isDirectory=t.extractFileAttributes=void 0;var r=n("./src/constants/index.js");t.extractFileAttributes=function(e){return Object.assign({},e.attributes,{id:e._id,links:e.links})},t.isDirectory=function(e){return e&&e.type&&"directory"===e.type},t.promiseTimeout=function(e){return new Promise(function(t,n){return setTimeout(t,e)})},t.exctractReelPath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";0!==e.indexOf("/")&&(e="/"+e);var t=e.split("/");if(t.length<=1)return r.ROOT_PATH+"/"+e;var n=t.splice(2).join("/");return r.ROOT_PATH+(n.length>1?"/"+n:"")},t.createFakePath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";0!==e.indexOf("/")&&(e="/"+e);var t=e.split("/");if(t.length<=1)return r.ROOT_NAME+"/"+e;var n=t.splice(2).join("/");return r.ROOT_NAME+(n.length>1?"/"+n:"")},t.findParentPath=function(e){if(e){var t=e.split("/");if(t.length>2)return t.slice(0,t.length-1).join("/")}},t.createOptionsFromArray=function(e){return e.map(function(e,t){return React.createElement("option",{key:t,value:e},e)})},t.forceFileDownload=function(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},t.getDataElements=function(){var e=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cozy.client.data.defineIndex(t,["_id"]);case 2:return n=e.sent,e.next=5,cozy.client.data.query(n,{selector:{_id:{$gt:null}}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},"./src/tracker.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=null,r=(t.shouldEnableTracking=function(){var e=document.querySelector("[role=application]");if(e&&e.dataset){var t=e.dataset.cozyTracking;if(""===t||"true"===t)return!0;if("false"===t)return!1}},t.getTracker=function(e,t){var u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null!==a)return a;try{!1===l&&Piwik.getTracker();var o=n("./node_modules/piwik-react-router/index.js");return a=o({url:e||"https://piwik.cozycloud.cc",siteId:t||14,injectScript:l}),u&&r(),a}catch(e){return console.warn(e),a=null,null}},t.configureTracker=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null!==a){var t=void 0,n=void 0,r=document.querySelector("[role=application]");if(r&&r.dataset){n=r.dataset.cozyAppName,t=r.dataset.cozyDomain||"";var u=t.indexOf(":");u>=0&&(t=t.substring(0,u))}e=Object.assign({userId:t,appDimensionId:1,app:n,heartbeat:15},e),parseInt(e.heartbeat)>0&&a.push(["enableHeartBeatTimer",parseInt(e.heartbeat)]),a.push(["setUserId",e.userId]),a.push(["setCustomDimension",e.appDimensionId,e.app])}});t.createTrackerMiddleware=function(){return function(e){return function(e){return function(t){return a&&t.trackEvent&&t.trackEvent.category&&t.trackEvent.action&&a.push(["trackEvent",t.trackEvent.category,t.trackEvent.action,t.trackEvent.name,t.trackEvent.value]),e(t)}}}},t.resetTracker=function(){a&&(a.disconnectFromHistory(),a=null)}},0:function(e,t){},1:function(e,t,n){e.exports=n("./src/index.jsx")}},[1]);
//# sourceMappingURL=main.bundle.js.map